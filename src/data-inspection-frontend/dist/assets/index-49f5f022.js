var Fp=Object.defineProperty;var Dp=(t,e,r)=>e in t?Fp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Xe=(t,e,r)=>(Dp(t,typeof e!="symbol"?e+"":e,r),r),kc=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var Pc=(t,e,r)=>(kc(t,e,"read from private field"),r?r.call(t):e.get(t)),Su=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)};var Tu=(t,e,r)=>(kc(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var _u;const yo=window,La=yo.trustedTypes,Oc=La?La.createPolicy("lit-html",{createHTML:t=>t}):void 0,el="$lit$",wn=`lit$${(Math.random()+"").slice(9)}$`,Hd="?"+wn,Up=`<${Hd}>`,ea=document,Ci=()=>ea.createComment(""),Ii=t=>t===null||typeof t!="object"&&typeof t!="function",Wd=Array.isArray,Lp=t=>Wd(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Bu=`[ 	
\f\r]`,oi=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Mc=/-->/g,Fc=/>/g,$n=RegExp(`>|${Bu}(?:([^\\s"'>=/]+)(${Bu}*=${Bu}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Dc=/'/g,Uc=/"/g,Kd=/^(?:script|style|textarea|title)$/i,$p=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),zp=$p(1),Ni=Symbol.for("lit-noChange"),Bt=Symbol.for("lit-nothing"),Lc=new WeakMap,Xn=ea.createTreeWalker(ea,129,null,!1);function Yd(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Oc!==void 0?Oc.createHTML(e):e}const Vp=(t,e)=>{const r=t.length-1,n=[];let a,i=e===2?"<svg>":"",s=oi;for(let o=0;o<r;o++){const u=t[o];let l,c,f=-1,h=0;for(;h<u.length&&(s.lastIndex=h,c=s.exec(u),c!==null);)h=s.lastIndex,s===oi?c[1]==="!--"?s=Mc:c[1]!==void 0?s=Fc:c[2]!==void 0?(Kd.test(c[2])&&(a=RegExp("</"+c[2],"g")),s=$n):c[3]!==void 0&&(s=$n):s===$n?c[0]===">"?(s=a??oi,f=-1):c[1]===void 0?f=-2:(f=s.lastIndex-c[2].length,l=c[1],s=c[3]===void 0?$n:c[3]==='"'?Uc:Dc):s===Uc||s===Dc?s=$n:s===Mc||s===Fc?s=oi:(s=$n,a=void 0);const v=s===$n&&t[o+1].startsWith("/>")?" ":"";i+=s===oi?u+Up:f>=0?(n.push(l),u.slice(0,f)+el+u.slice(f)+wn+v):u+wn+(f===-2?(n.push(void 0),o):v)}return[Yd(t,i+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class Ri{constructor({strings:e,_$litType$:r},n){let a;this.parts=[];let i=0,s=0;const o=e.length-1,u=this.parts,[l,c]=Vp(e,r);if(this.el=Ri.createElement(l,n),Xn.currentNode=this.el.content,r===2){const f=this.el.content,h=f.firstChild;h.remove(),f.append(...h.childNodes)}for(;(a=Xn.nextNode())!==null&&u.length<o;){if(a.nodeType===1){if(a.hasAttributes()){const f=[];for(const h of a.getAttributeNames())if(h.endsWith(el)||h.startsWith(wn)){const v=c[s++];if(f.push(h),v!==void 0){const d=a.getAttribute(v.toLowerCase()+el).split(wn),b=/([.?@])?(.*)/.exec(v);u.push({type:1,index:i,name:b[2],strings:d,ctor:b[1]==="."?Gp:b[1]==="?"?Wp:b[1]==="@"?Kp:$o})}else u.push({type:6,index:i})}for(const h of f)a.removeAttribute(h)}if(Kd.test(a.tagName)){const f=a.textContent.split(wn),h=f.length-1;if(h>0){a.textContent=La?La.emptyScript:"";for(let v=0;v<h;v++)a.append(f[v],Ci()),Xn.nextNode(),u.push({type:2,index:++i});a.append(f[h],Ci())}}}else if(a.nodeType===8)if(a.data===Hd)u.push({type:2,index:i});else{let f=-1;for(;(f=a.data.indexOf(wn,f+1))!==-1;)u.push({type:7,index:i}),f+=wn.length-1}i++}}static createElement(e,r){const n=ea.createElement("template");return n.innerHTML=e,n}}function $a(t,e,r=t,n){var a,i,s,o;if(e===Ni)return e;let u=n!==void 0?(a=r._$Co)===null||a===void 0?void 0:a[n]:r._$Cl;const l=Ii(e)?void 0:e._$litDirective$;return(u==null?void 0:u.constructor)!==l&&((i=u==null?void 0:u._$AO)===null||i===void 0||i.call(u,!1),l===void 0?u=void 0:(u=new l(t),u._$AT(t,r,n)),n!==void 0?((s=(o=r)._$Co)!==null&&s!==void 0?s:o._$Co=[])[n]=u:r._$Cl=u),u!==void 0&&(e=$a(t,u._$AS(t,e.values),u,n)),e}class qp{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:a}=this._$AD,i=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:ea).importNode(n,!0);Xn.currentNode=i;let s=Xn.nextNode(),o=0,u=0,l=a[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new Yi(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new Yp(s,this,e)),this._$AV.push(c),l=a[++u]}o!==(l==null?void 0:l.index)&&(s=Xn.nextNode(),o++)}return Xn.currentNode=ea,i}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class Yi{constructor(e,r,n,a){var i;this.type=2,this._$AH=Bt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=a,this._$Cp=(i=a==null?void 0:a.isConnected)===null||i===void 0||i}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=$a(this,e,r),Ii(e)?e===Bt||e==null||e===""?(this._$AH!==Bt&&this._$AR(),this._$AH=Bt):e!==this._$AH&&e!==Ni&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Lp(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Bt&&Ii(this._$AH)?this._$AA.nextSibling.data=e:this.$(ea.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:a}=e,i=typeof a=="number"?this._$AC(e):(a.el===void 0&&(a.el=Ri.createElement(Yd(a.h,a.h[0]),this.options)),a);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===i)this._$AH.v(n);else{const s=new qp(i,this),o=s.u(this.options);s.v(n),this.$(o),this._$AH=s}}_$AC(e){let r=Lc.get(e.strings);return r===void 0&&Lc.set(e.strings,r=new Ri(e)),r}T(e){Wd(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,a=0;for(const i of e)a===r.length?r.push(n=new Yi(this.k(Ci()),this.k(Ci()),this,this.options)):n=r[a],n._$AI(i),a++;a<r.length&&(this._$AR(n&&n._$AB.nextSibling,a),r.length=a)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const a=e.nextSibling;e.remove(),e=a}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class $o{constructor(e,r,n,a,i){this.type=1,this._$AH=Bt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=a,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Bt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,a){const i=this.strings;let s=!1;if(i===void 0)e=$a(this,e,r,0),s=!Ii(e)||e!==this._$AH&&e!==Ni,s&&(this._$AH=e);else{const o=e;let u,l;for(e=i[0],u=0;u<i.length-1;u++)l=$a(this,o[n+u],r,u),l===Ni&&(l=this._$AH[u]),s||(s=!Ii(l)||l!==this._$AH[u]),l===Bt?e=Bt:e!==Bt&&(e+=(l??"")+i[u+1]),this._$AH[u]=l}s&&!a&&this.j(e)}j(e){e===Bt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Gp extends $o{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Bt?void 0:e}}const Hp=La?La.emptyScript:"";class Wp extends $o{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Bt?this.element.setAttribute(this.name,Hp):this.element.removeAttribute(this.name)}}class Kp extends $o{constructor(e,r,n,a,i){super(e,r,n,a,i),this.type=5}_$AI(e,r=this){var n;if((e=(n=$a(this,e,r,0))!==null&&n!==void 0?n:Bt)===Ni)return;const a=this._$AH,i=e===Bt&&a!==Bt||e.capture!==a.capture||e.once!==a.once||e.passive!==a.passive,s=e!==Bt&&(a===Bt||i);i&&this.element.removeEventListener(this.name,this,a),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class Yp{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){$a(this,e)}}const $c=yo.litHtmlPolyfillSupport;$c==null||$c(Ri,Yi),((_u=yo.litHtmlVersions)!==null&&_u!==void 0?_u:yo.litHtmlVersions=[]).push("2.8.0");const Zp=(t,e,r)=>{var n,a;const i=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let s=i._$litPart$;if(s===void 0){const o=(a=r==null?void 0:r.renderBefore)!==null&&a!==void 0?a:null;i._$litPart$=s=new Yi(e.insertBefore(Ci(),o),o,void 0,r??{})}return s._$AI(t),s};var za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zd={},Zi={};Zi.byteLength=Jp;Zi.toByteArray=tg;Zi.fromByteArray=ag;var Lr=[],cr=[],Qp=typeof Uint8Array<"u"?Uint8Array:Array,Au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ga=0,jp=Au.length;ga<jp;++ga)Lr[ga]=Au[ga],cr[Au.charCodeAt(ga)]=ga;cr["-".charCodeAt(0)]=62;cr["_".charCodeAt(0)]=63;function Xd(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Jp(t){var e=Xd(t),r=e[0],n=e[1];return(r+n)*3/4-n}function eg(t,e,r){return(e+r)*3/4-r}function tg(t){var e,r=Xd(t),n=r[0],a=r[1],i=new Qp(eg(t,n,a)),s=0,o=a>0?n-4:n,u;for(u=0;u<o;u+=4)e=cr[t.charCodeAt(u)]<<18|cr[t.charCodeAt(u+1)]<<12|cr[t.charCodeAt(u+2)]<<6|cr[t.charCodeAt(u+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=e&255;return a===2&&(e=cr[t.charCodeAt(u)]<<2|cr[t.charCodeAt(u+1)]>>4,i[s++]=e&255),a===1&&(e=cr[t.charCodeAt(u)]<<10|cr[t.charCodeAt(u+1)]<<4|cr[t.charCodeAt(u+2)]>>2,i[s++]=e>>8&255,i[s++]=e&255),i}function rg(t){return Lr[t>>18&63]+Lr[t>>12&63]+Lr[t>>6&63]+Lr[t&63]}function ng(t,e,r){for(var n,a=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),a.push(rg(n));return a.join("")}function ag(t){for(var e,r=t.length,n=r%3,a=[],i=16383,s=0,o=r-n;s<o;s+=i)a.push(ng(t,s,s+i>o?o:s+i));return n===1?(e=t[r-1],a.push(Lr[e>>2]+Lr[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],a.push(Lr[e>>10]+Lr[e>>4&63]+Lr[e<<2&63]+"=")),a.join("")}var Xi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Xi.read=function(t,e,r,n,a){var i,s,o=a*8-n-1,u=(1<<o)-1,l=u>>1,c=-7,f=r?a-1:0,h=r?-1:1,v=t[e+f];for(f+=h,i=v&(1<<-c)-1,v>>=-c,c+=o;c>0;i=i*256+t[e+f],f+=h,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=s*256+t[e+f],f+=h,c-=8);if(i===0)i=1-l;else{if(i===u)return s?NaN:(v?-1:1)*(1/0);s=s+Math.pow(2,n),i=i-l}return(v?-1:1)*s*Math.pow(2,i-n)};Xi.write=function(t,e,r,n,a,i){var s,o,u,l=i*8-a-1,c=(1<<l)-1,f=c>>1,h=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:i-1,d=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+f>=1?e+=h/u:e+=h*Math.pow(2,1-f),e*u>=2&&(s++,u/=2),s+f>=c?(o=0,s=c):s+f>=1?(o=(e*u-1)*Math.pow(2,a),s=s+f):(o=e*Math.pow(2,f-1)*Math.pow(2,a),s=0));a>=8;t[r+v]=o&255,v+=d,o/=256,a-=8);for(s=s<<a|o,l+=a;l>0;t[r+v]=s&255,v+=d,s/=256,l-=8);t[r+v-d]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Zi,r=Xi,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=E,t.INSPECT_MAX_BYTES=50;const a=2147483647;t.kMaxLength=a,o.TYPED_ARRAY_SUPPORT=i(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const T=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(T,p),T.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function s(T){if(T>a)throw new RangeError('The value "'+T+'" is invalid for option "size"');const p=new Uint8Array(T);return Object.setPrototypeOf(p,o.prototype),p}function o(T,p,x){if(typeof T=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(T)}return u(T,p,x)}o.poolSize=8192;function u(T,p,x){if(typeof T=="string")return h(T,p);if(ArrayBuffer.isView(T))return d(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(oe(T,ArrayBuffer)||T&&oe(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(oe(T,SharedArrayBuffer)||T&&oe(T.buffer,SharedArrayBuffer)))return b(T,p,x);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const z=T.valueOf&&T.valueOf();if(z!=null&&z!==T)return o.from(z,p,x);const Y=y(T);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return o.from(T[Symbol.toPrimitive]("string"),p,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}o.from=function(T,p,x){return u(T,p,x)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function l(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function c(T,p,x){return l(T),T<=0?s(T):p!==void 0?typeof x=="string"?s(T).fill(p,x):s(T).fill(p):s(T)}o.alloc=function(T,p,x){return c(T,p,x)};function f(T){return l(T),s(T<0?0:m(T)|0)}o.allocUnsafe=function(T){return f(T)},o.allocUnsafeSlow=function(T){return f(T)};function h(T,p){if((typeof p!="string"||p==="")&&(p="utf8"),!o.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const x=S(T,p)|0;let z=s(x);const Y=z.write(T,p);return Y!==x&&(z=z.slice(0,Y)),z}function v(T){const p=T.length<0?0:m(T.length)|0,x=s(p);for(let z=0;z<p;z+=1)x[z]=T[z]&255;return x}function d(T){if(oe(T,Uint8Array)){const p=new Uint8Array(T);return b(p.buffer,p.byteOffset,p.byteLength)}return v(T)}function b(T,p,x){if(p<0||T.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<p+(x||0))throw new RangeError('"length" is outside of buffer bounds');let z;return p===void 0&&x===void 0?z=new Uint8Array(T):x===void 0?z=new Uint8Array(T,p):z=new Uint8Array(T,p,x),Object.setPrototypeOf(z,o.prototype),z}function y(T){if(o.isBuffer(T)){const p=m(T.length)|0,x=s(p);return x.length===0||T.copy(x,0,0,p),x}if(T.length!==void 0)return typeof T.length!="number"||ge(T.length)?s(0):v(T);if(T.type==="Buffer"&&Array.isArray(T.data))return v(T.data)}function m(T){if(T>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return T|0}function E(T){return+T!=T&&(T=0),o.alloc(+T)}o.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==o.prototype},o.compare=function(p,x){if(oe(p,Uint8Array)&&(p=o.from(p,p.offset,p.byteLength)),oe(x,Uint8Array)&&(x=o.from(x,x.offset,x.byteLength)),!o.isBuffer(p)||!o.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===x)return 0;let z=p.length,Y=x.length;for(let ne=0,ue=Math.min(z,Y);ne<ue;++ne)if(p[ne]!==x[ne]){z=p[ne],Y=x[ne];break}return z<Y?-1:Y<z?1:0},o.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(p,x){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return o.alloc(0);let z;if(x===void 0)for(x=0,z=0;z<p.length;++z)x+=p[z].length;const Y=o.allocUnsafe(x);let ne=0;for(z=0;z<p.length;++z){let ue=p[z];if(oe(ue,Uint8Array))ne+ue.length>Y.length?(o.isBuffer(ue)||(ue=o.from(ue)),ue.copy(Y,ne)):Uint8Array.prototype.set.call(Y,ue,ne);else if(o.isBuffer(ue))ue.copy(Y,ne);else throw new TypeError('"list" argument must be an Array of Buffers');ne+=ue.length}return Y};function S(T,p){if(o.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||oe(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const x=T.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&x===0)return 0;let Y=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return g(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return q(T).length;default:if(Y)return z?-1:g(T).length;p=(""+p).toLowerCase(),Y=!0}}o.byteLength=S;function B(T,p,x){let z=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,p>>>=0,x<=p))return"";for(T||(T="utf8");;)switch(T){case"hex":return ae(this,p,x);case"utf8":case"utf-8":return I(this,p,x);case"ascii":return $(this,p,x);case"latin1":case"binary":return X(this,p,x);case"base64":return R(this,p,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,p,x);default:if(z)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),z=!0}}o.prototype._isBuffer=!0;function C(T,p,x){const z=T[p];T[p]=T[x],T[x]=z}o.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<p;x+=2)C(this,x,x+1);return this},o.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<p;x+=4)C(this,x,x+3),C(this,x+1,x+2);return this},o.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<p;x+=8)C(this,x,x+7),C(this,x+1,x+6),C(this,x+2,x+5),C(this,x+3,x+4);return this},o.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?I(this,0,p):B.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(p){if(!o.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:o.compare(this,p)===0},o.prototype.inspect=function(){let p="";const x=t.INSPECT_MAX_BYTES;return p=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(p+=" ... "),"<Buffer "+p+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(p,x,z,Y,ne){if(oe(p,Uint8Array)&&(p=o.from(p,p.offset,p.byteLength)),!o.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(x===void 0&&(x=0),z===void 0&&(z=p?p.length:0),Y===void 0&&(Y=0),ne===void 0&&(ne=this.length),x<0||z>p.length||Y<0||ne>this.length)throw new RangeError("out of range index");if(Y>=ne&&x>=z)return 0;if(Y>=ne)return-1;if(x>=z)return 1;if(x>>>=0,z>>>=0,Y>>>=0,ne>>>=0,this===p)return 0;let ue=ne-Y,me=z-x;const be=Math.min(ue,me),we=this.slice(Y,ne),ye=p.slice(x,z);for(let xe=0;xe<be;++xe)if(we[xe]!==ye[xe]){ue=we[xe],me=ye[xe];break}return ue<me?-1:me<ue?1:0};function O(T,p,x,z,Y){if(T.length===0)return-1;if(typeof x=="string"?(z=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,ge(x)&&(x=Y?0:T.length-1),x<0&&(x=T.length+x),x>=T.length){if(Y)return-1;x=T.length-1}else if(x<0)if(Y)x=0;else return-1;if(typeof p=="string"&&(p=o.from(p,z)),o.isBuffer(p))return p.length===0?-1:A(T,p,x,z,Y);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(T,p,x):Uint8Array.prototype.lastIndexOf.call(T,p,x):A(T,[p],x,z,Y);throw new TypeError("val must be string, number or Buffer")}function A(T,p,x,z,Y){let ne=1,ue=T.length,me=p.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(T.length<2||p.length<2)return-1;ne=2,ue/=2,me/=2,x/=2}function be(ye,xe){return ne===1?ye[xe]:ye.readUInt16BE(xe*ne)}let we;if(Y){let ye=-1;for(we=x;we<ue;we++)if(be(T,we)===be(p,ye===-1?0:we-ye)){if(ye===-1&&(ye=we),we-ye+1===me)return ye*ne}else ye!==-1&&(we-=we-ye),ye=-1}else for(x+me>ue&&(x=ue-me),we=x;we>=0;we--){let ye=!0;for(let xe=0;xe<me;xe++)if(be(T,we+xe)!==be(p,xe)){ye=!1;break}if(ye)return we}return-1}o.prototype.includes=function(p,x,z){return this.indexOf(p,x,z)!==-1},o.prototype.indexOf=function(p,x,z){return O(this,p,x,z,!0)},o.prototype.lastIndexOf=function(p,x,z){return O(this,p,x,z,!1)};function D(T,p,x,z){x=Number(x)||0;const Y=T.length-x;z?(z=Number(z),z>Y&&(z=Y)):z=Y;const ne=p.length;z>ne/2&&(z=ne/2);let ue;for(ue=0;ue<z;++ue){const me=parseInt(p.substr(ue*2,2),16);if(ge(me))return ue;T[x+ue]=me}return ue}function F(T,p,x,z){return j(g(p,T.length-x),T,x,z)}function U(T,p,x,z){return j(w(p),T,x,z)}function W(T,p,x,z){return j(q(p),T,x,z)}function H(T,p,x,z){return j(P(p,T.length-x),T,x,z)}o.prototype.write=function(p,x,z,Y){if(x===void 0)Y="utf8",z=this.length,x=0;else if(z===void 0&&typeof x=="string")Y=x,z=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(z)?(z=z>>>0,Y===void 0&&(Y="utf8")):(Y=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ne=this.length-x;if((z===void 0||z>ne)&&(z=ne),p.length>0&&(z<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");Y||(Y="utf8");let ue=!1;for(;;)switch(Y){case"hex":return D(this,p,x,z);case"utf8":case"utf-8":return F(this,p,x,z);case"ascii":case"latin1":case"binary":return U(this,p,x,z);case"base64":return W(this,p,x,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,p,x,z);default:if(ue)throw new TypeError("Unknown encoding: "+Y);Y=(""+Y).toLowerCase(),ue=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(T,p,x){return p===0&&x===T.length?e.fromByteArray(T):e.fromByteArray(T.slice(p,x))}function I(T,p,x){x=Math.min(T.length,x);const z=[];let Y=p;for(;Y<x;){const ne=T[Y];let ue=null,me=ne>239?4:ne>223?3:ne>191?2:1;if(Y+me<=x){let be,we,ye,xe;switch(me){case 1:ne<128&&(ue=ne);break;case 2:be=T[Y+1],(be&192)===128&&(xe=(ne&31)<<6|be&63,xe>127&&(ue=xe));break;case 3:be=T[Y+1],we=T[Y+2],(be&192)===128&&(we&192)===128&&(xe=(ne&15)<<12|(be&63)<<6|we&63,xe>2047&&(xe<55296||xe>57343)&&(ue=xe));break;case 4:be=T[Y+1],we=T[Y+2],ye=T[Y+3],(be&192)===128&&(we&192)===128&&(ye&192)===128&&(xe=(ne&15)<<18|(be&63)<<12|(we&63)<<6|ye&63,xe>65535&&xe<1114112&&(ue=xe))}}ue===null?(ue=65533,me=1):ue>65535&&(ue-=65536,z.push(ue>>>10&1023|55296),ue=56320|ue&1023),z.push(ue),Y+=me}return V(z)}const G=4096;function V(T){const p=T.length;if(p<=G)return String.fromCharCode.apply(String,T);let x="",z=0;for(;z<p;)x+=String.fromCharCode.apply(String,T.slice(z,z+=G));return x}function $(T,p,x){let z="";x=Math.min(T.length,x);for(let Y=p;Y<x;++Y)z+=String.fromCharCode(T[Y]&127);return z}function X(T,p,x){let z="";x=Math.min(T.length,x);for(let Y=p;Y<x;++Y)z+=String.fromCharCode(T[Y]);return z}function ae(T,p,x){const z=T.length;(!p||p<0)&&(p=0),(!x||x<0||x>z)&&(x=z);let Y="";for(let ne=p;ne<x;++ne)Y+=ve[T[ne]];return Y}function ce(T,p,x){const z=T.slice(p,x);let Y="";for(let ne=0;ne<z.length-1;ne+=2)Y+=String.fromCharCode(z[ne]+z[ne+1]*256);return Y}o.prototype.slice=function(p,x){const z=this.length;p=~~p,x=x===void 0?z:~~x,p<0?(p+=z,p<0&&(p=0)):p>z&&(p=z),x<0?(x+=z,x<0&&(x=0)):x>z&&(x=z),x<p&&(x=p);const Y=this.subarray(p,x);return Object.setPrototypeOf(Y,o.prototype),Y};function re(T,p,x){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+p>x)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(p,x,z){p=p>>>0,x=x>>>0,z||re(p,x,this.length);let Y=this[p],ne=1,ue=0;for(;++ue<x&&(ne*=256);)Y+=this[p+ue]*ne;return Y},o.prototype.readUintBE=o.prototype.readUIntBE=function(p,x,z){p=p>>>0,x=x>>>0,z||re(p,x,this.length);let Y=this[p+--x],ne=1;for(;x>0&&(ne*=256);)Y+=this[p+--x]*ne;return Y},o.prototype.readUint8=o.prototype.readUInt8=function(p,x){return p=p>>>0,x||re(p,1,this.length),this[p]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(p,x){return p=p>>>0,x||re(p,2,this.length),this[p]|this[p+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(p,x){return p=p>>>0,x||re(p,2,this.length),this[p]<<8|this[p+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(p,x){return p=p>>>0,x||re(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(p,x){return p=p>>>0,x||re(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},o.prototype.readBigUInt64LE=L(function(p){p=p>>>0,te(p,"offset");const x=this[p],z=this[p+7];(x===void 0||z===void 0)&&Q(p,this.length-8);const Y=x+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,ne=this[++p]+this[++p]*2**8+this[++p]*2**16+z*2**24;return BigInt(Y)+(BigInt(ne)<<BigInt(32))}),o.prototype.readBigUInt64BE=L(function(p){p=p>>>0,te(p,"offset");const x=this[p],z=this[p+7];(x===void 0||z===void 0)&&Q(p,this.length-8);const Y=x*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],ne=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+z;return(BigInt(Y)<<BigInt(32))+BigInt(ne)}),o.prototype.readIntLE=function(p,x,z){p=p>>>0,x=x>>>0,z||re(p,x,this.length);let Y=this[p],ne=1,ue=0;for(;++ue<x&&(ne*=256);)Y+=this[p+ue]*ne;return ne*=128,Y>=ne&&(Y-=Math.pow(2,8*x)),Y},o.prototype.readIntBE=function(p,x,z){p=p>>>0,x=x>>>0,z||re(p,x,this.length);let Y=x,ne=1,ue=this[p+--Y];for(;Y>0&&(ne*=256);)ue+=this[p+--Y]*ne;return ne*=128,ue>=ne&&(ue-=Math.pow(2,8*x)),ue},o.prototype.readInt8=function(p,x){return p=p>>>0,x||re(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},o.prototype.readInt16LE=function(p,x){p=p>>>0,x||re(p,2,this.length);const z=this[p]|this[p+1]<<8;return z&32768?z|4294901760:z},o.prototype.readInt16BE=function(p,x){p=p>>>0,x||re(p,2,this.length);const z=this[p+1]|this[p]<<8;return z&32768?z|4294901760:z},o.prototype.readInt32LE=function(p,x){return p=p>>>0,x||re(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},o.prototype.readInt32BE=function(p,x){return p=p>>>0,x||re(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},o.prototype.readBigInt64LE=L(function(p){p=p>>>0,te(p,"offset");const x=this[p],z=this[p+7];(x===void 0||z===void 0)&&Q(p,this.length-8);const Y=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(z<<24);return(BigInt(Y)<<BigInt(32))+BigInt(x+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),o.prototype.readBigInt64BE=L(function(p){p=p>>>0,te(p,"offset");const x=this[p],z=this[p+7];(x===void 0||z===void 0)&&Q(p,this.length-8);const Y=(x<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(Y)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+z)}),o.prototype.readFloatLE=function(p,x){return p=p>>>0,x||re(p,4,this.length),r.read(this,p,!0,23,4)},o.prototype.readFloatBE=function(p,x){return p=p>>>0,x||re(p,4,this.length),r.read(this,p,!1,23,4)},o.prototype.readDoubleLE=function(p,x){return p=p>>>0,x||re(p,8,this.length),r.read(this,p,!0,52,8)},o.prototype.readDoubleBE=function(p,x){return p=p>>>0,x||re(p,8,this.length),r.read(this,p,!1,52,8)};function Z(T,p,x,z,Y,ne){if(!o.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>Y||p<ne)throw new RangeError('"value" argument is out of bounds');if(x+z>T.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(p,x,z,Y){if(p=+p,x=x>>>0,z=z>>>0,!Y){const me=Math.pow(2,8*z)-1;Z(this,p,x,z,me,0)}let ne=1,ue=0;for(this[x]=p&255;++ue<z&&(ne*=256);)this[x+ue]=p/ne&255;return x+z},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(p,x,z,Y){if(p=+p,x=x>>>0,z=z>>>0,!Y){const me=Math.pow(2,8*z)-1;Z(this,p,x,z,me,0)}let ne=z-1,ue=1;for(this[x+ne]=p&255;--ne>=0&&(ue*=256);)this[x+ne]=p/ue&255;return x+z},o.prototype.writeUint8=o.prototype.writeUInt8=function(p,x,z){return p=+p,x=x>>>0,z||Z(this,p,x,1,255,0),this[x]=p&255,x+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(p,x,z){return p=+p,x=x>>>0,z||Z(this,p,x,2,65535,0),this[x]=p&255,this[x+1]=p>>>8,x+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(p,x,z){return p=+p,x=x>>>0,z||Z(this,p,x,2,65535,0),this[x]=p>>>8,this[x+1]=p&255,x+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(p,x,z){return p=+p,x=x>>>0,z||Z(this,p,x,4,4294967295,0),this[x+3]=p>>>24,this[x+2]=p>>>16,this[x+1]=p>>>8,this[x]=p&255,x+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(p,x,z){return p=+p,x=x>>>0,z||Z(this,p,x,4,4294967295,0),this[x]=p>>>24,this[x+1]=p>>>16,this[x+2]=p>>>8,this[x+3]=p&255,x+4};function le(T,p,x,z,Y){K(p,z,Y,T,x,7);let ne=Number(p&BigInt(4294967295));T[x++]=ne,ne=ne>>8,T[x++]=ne,ne=ne>>8,T[x++]=ne,ne=ne>>8,T[x++]=ne;let ue=Number(p>>BigInt(32)&BigInt(4294967295));return T[x++]=ue,ue=ue>>8,T[x++]=ue,ue=ue>>8,T[x++]=ue,ue=ue>>8,T[x++]=ue,x}function N(T,p,x,z,Y){K(p,z,Y,T,x,7);let ne=Number(p&BigInt(4294967295));T[x+7]=ne,ne=ne>>8,T[x+6]=ne,ne=ne>>8,T[x+5]=ne,ne=ne>>8,T[x+4]=ne;let ue=Number(p>>BigInt(32)&BigInt(4294967295));return T[x+3]=ue,ue=ue>>8,T[x+2]=ue,ue=ue>>8,T[x+1]=ue,ue=ue>>8,T[x]=ue,x+8}o.prototype.writeBigUInt64LE=L(function(p,x=0){return le(this,p,x,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=L(function(p,x=0){return N(this,p,x,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(p,x,z,Y){if(p=+p,x=x>>>0,!Y){const be=Math.pow(2,8*z-1);Z(this,p,x,z,be-1,-be)}let ne=0,ue=1,me=0;for(this[x]=p&255;++ne<z&&(ue*=256);)p<0&&me===0&&this[x+ne-1]!==0&&(me=1),this[x+ne]=(p/ue>>0)-me&255;return x+z},o.prototype.writeIntBE=function(p,x,z,Y){if(p=+p,x=x>>>0,!Y){const be=Math.pow(2,8*z-1);Z(this,p,x,z,be-1,-be)}let ne=z-1,ue=1,me=0;for(this[x+ne]=p&255;--ne>=0&&(ue*=256);)p<0&&me===0&&this[x+ne+1]!==0&&(me=1),this[x+ne]=(p/ue>>0)-me&255;return x+z},o.prototype.writeInt8=function(p,x,z){return p=+p,x=x>>>0,z||Z(this,p,x,1,127,-128),p<0&&(p=255+p+1),this[x]=p&255,x+1},o.prototype.writeInt16LE=function(p,x,z){return p=+p,x=x>>>0,z||Z(this,p,x,2,32767,-32768),this[x]=p&255,this[x+1]=p>>>8,x+2},o.prototype.writeInt16BE=function(p,x,z){return p=+p,x=x>>>0,z||Z(this,p,x,2,32767,-32768),this[x]=p>>>8,this[x+1]=p&255,x+2},o.prototype.writeInt32LE=function(p,x,z){return p=+p,x=x>>>0,z||Z(this,p,x,4,2147483647,-2147483648),this[x]=p&255,this[x+1]=p>>>8,this[x+2]=p>>>16,this[x+3]=p>>>24,x+4},o.prototype.writeInt32BE=function(p,x,z){return p=+p,x=x>>>0,z||Z(this,p,x,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[x]=p>>>24,this[x+1]=p>>>16,this[x+2]=p>>>8,this[x+3]=p&255,x+4},o.prototype.writeBigInt64LE=L(function(p,x=0){return le(this,p,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=L(function(p,x=0){return N(this,p,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(T,p,x,z,Y,ne){if(x+z>T.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function he(T,p,x,z,Y){return p=+p,x=x>>>0,Y||fe(T,p,x,4),r.write(T,p,x,z,23,4),x+4}o.prototype.writeFloatLE=function(p,x,z){return he(this,p,x,!0,z)},o.prototype.writeFloatBE=function(p,x,z){return he(this,p,x,!1,z)};function pe(T,p,x,z,Y){return p=+p,x=x>>>0,Y||fe(T,p,x,8),r.write(T,p,x,z,52,8),x+8}o.prototype.writeDoubleLE=function(p,x,z){return pe(this,p,x,!0,z)},o.prototype.writeDoubleBE=function(p,x,z){return pe(this,p,x,!1,z)},o.prototype.copy=function(p,x,z,Y){if(!o.isBuffer(p))throw new TypeError("argument should be a Buffer");if(z||(z=0),!Y&&Y!==0&&(Y=this.length),x>=p.length&&(x=p.length),x||(x=0),Y>0&&Y<z&&(Y=z),Y===z||p.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("sourceEnd out of bounds");Y>this.length&&(Y=this.length),p.length-x<Y-z&&(Y=p.length-x+z);const ne=Y-z;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,z,Y):Uint8Array.prototype.set.call(p,this.subarray(z,Y),x),ne},o.prototype.fill=function(p,x,z,Y){if(typeof p=="string"){if(typeof x=="string"?(Y=x,x=0,z=this.length):typeof z=="string"&&(Y=z,z=this.length),Y!==void 0&&typeof Y!="string")throw new TypeError("encoding must be a string");if(typeof Y=="string"&&!o.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);if(p.length===1){const ue=p.charCodeAt(0);(Y==="utf8"&&ue<128||Y==="latin1")&&(p=ue)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(x<0||this.length<x||this.length<z)throw new RangeError("Out of range index");if(z<=x)return this;x=x>>>0,z=z===void 0?this.length:z>>>0,p||(p=0);let ne;if(typeof p=="number")for(ne=x;ne<z;++ne)this[ne]=p;else{const ue=o.isBuffer(p)?p:o.from(p,Y),me=ue.length;if(me===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(ne=0;ne<z-x;++ne)this[ne+x]=ue[ne%me]}return this};const ie={};function J(T,p,x){ie[T]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(Y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Y,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}J("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(T,p){return`The "${T}" argument must be of type number. Received type ${typeof p}`},TypeError),J("ERR_OUT_OF_RANGE",function(T,p,x){let z=`The value of "${T}" is out of range.`,Y=x;return Number.isInteger(x)&&Math.abs(x)>2**32?Y=k(String(x)):typeof x=="bigint"&&(Y=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(Y=k(Y)),Y+="n"),z+=` It must be ${p}. Received ${Y}`,z},RangeError);function k(T){let p="",x=T.length;const z=T[0]==="-"?1:0;for(;x>=z+4;x-=3)p=`_${T.slice(x-3,x)}${p}`;return`${T.slice(0,x)}${p}`}function M(T,p,x){te(p,"offset"),(T[p]===void 0||T[p+x]===void 0)&&Q(p,T.length-(x+1))}function K(T,p,x,z,Y,ne){if(T>x||T<p){const ue=typeof p=="bigint"?"n":"";let me;throw ne>3?p===0||p===BigInt(0)?me=`>= 0${ue} and < 2${ue} ** ${(ne+1)*8}${ue}`:me=`>= -(2${ue} ** ${(ne+1)*8-1}${ue}) and < 2 ** ${(ne+1)*8-1}${ue}`:me=`>= ${p}${ue} and <= ${x}${ue}`,new ie.ERR_OUT_OF_RANGE("value",me,T)}M(z,Y,ne)}function te(T,p){if(typeof T!="number")throw new ie.ERR_INVALID_ARG_TYPE(p,"number",T)}function Q(T,p,x){throw Math.floor(T)!==T?(te(T,x),new ie.ERR_OUT_OF_RANGE(x||"offset","an integer",T)):p<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE(x||"offset",`>= ${x?1:0} and <= ${p}`,T)}const ee=/[^+/0-9A-Za-z-_]/g;function _(T){if(T=T.split("=")[0],T=T.trim().replace(ee,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function g(T,p){p=p||1/0;let x;const z=T.length;let Y=null;const ne=[];for(let ue=0;ue<z;++ue){if(x=T.charCodeAt(ue),x>55295&&x<57344){if(!Y){if(x>56319){(p-=3)>-1&&ne.push(239,191,189);continue}else if(ue+1===z){(p-=3)>-1&&ne.push(239,191,189);continue}Y=x;continue}if(x<56320){(p-=3)>-1&&ne.push(239,191,189),Y=x;continue}x=(Y-55296<<10|x-56320)+65536}else Y&&(p-=3)>-1&&ne.push(239,191,189);if(Y=null,x<128){if((p-=1)<0)break;ne.push(x)}else if(x<2048){if((p-=2)<0)break;ne.push(x>>6|192,x&63|128)}else if(x<65536){if((p-=3)<0)break;ne.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((p-=4)<0)break;ne.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return ne}function w(T){const p=[];for(let x=0;x<T.length;++x)p.push(T.charCodeAt(x)&255);return p}function P(T,p){let x,z,Y;const ne=[];for(let ue=0;ue<T.length&&!((p-=2)<0);++ue)x=T.charCodeAt(ue),z=x>>8,Y=x%256,ne.push(Y),ne.push(z);return ne}function q(T){return e.toByteArray(_(T))}function j(T,p,x,z){let Y;for(Y=0;Y<z&&!(Y+x>=p.length||Y>=T.length);++Y)p[Y+x]=T[Y];return Y}function oe(T,p){return T instanceof p||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===p.name}function ge(T){return T!==T}const ve=function(){const T="0123456789abcdef",p=new Array(256);for(let x=0;x<16;++x){const z=x*16;for(let Y=0;Y<16;++Y)p[z+Y]=T[x]+T[Y]}return p}();function L(T){return typeof BigInt>"u"?de:T}function de(){throw new Error("BigInt not supported")}})(Zd);var tl;(function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"})(tl||(tl={}));const ig="modulepreload",sg=function(t){return"/"+t},zc={},og=function(e,r,n){if(!r||r.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=sg(i),i in zc)return;zc[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(!!n)for(let c=a.length-1;c>=0;c--){const f=a[c];if(f.href===i&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${o}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":ig,s||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),s)return new Promise((c,f)=>{l.addEventListener("load",c),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})},mo="abcdefghijklmnopqrstuvwxyz234567",Va=Object.create(null);for(let t=0;t<mo.length;t++)Va[mo[t]]=t;Va[0]=Va.o;Va[1]=Va.i;function ug(t){let e=0,r=0,n="";function a(i){return e<0?r|=i>>-e:r=i<<e&248,e>3?(e-=8,1):(e<4&&(n+=mo[r>>3],e+=5),0)}for(let i=0;i<t.length;)i+=a(t[i]);return n+(e<0?mo[r>>3]:"")}function lg(t){let e=0,r=0;const n=new Uint8Array(t.length*4/3|0);let a=0;function i(s){let o=Va[s.toLowerCase()];if(o===void 0)throw new Error(`Invalid character: ${JSON.stringify(s)}`);o<<=3,r|=o>>>e,e+=5,e>=8&&(n[a++]=r,e-=8,e>0?r=o<<5-e&255:r=0)}for(const s of t)i(s);return n.slice(0,a)}const cg=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function fg(t){const e=new Uint8Array(t);let r=-1;for(let n=0;n<e.length;n++){const i=(e[n]^r)&255;r=cg[i]^r>>>8}return(r^-1)>>>0}function dg(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Qd(t,...e){if(!dg(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Vc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function hg(t,e){Qd(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const ya=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cu=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Nr=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function vg(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function jd(t){return typeof t=="string"&&(t=vg(t)),Qd(t),t}let pg=class{clone(){return this._cloneInto()}};function Wl(t){const e=n=>t().update(jd(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Jd(t=32){if(ya&&typeof ya.getRandomValues=="function")return ya.getRandomValues(new Uint8Array(t));if(ya&&typeof ya.randomBytes=="function")return ya.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function gg(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const a=BigInt(32),i=BigInt(4294967295),s=Number(r>>a&i),o=Number(r&i),u=n?4:0,l=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+l,o,n)}const yg=(t,e,r)=>t&e^~t&r,mg=(t,e,r)=>t&e^t&r^e&r;class eh extends pg{constructor(e,r,n,a){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Cu(this.buffer)}update(e){Vc(this);const{view:r,buffer:n,blockLen:a}=this;e=jd(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(a-this.pos,i-s);if(o===a){const u=Cu(e);for(;a<=i-s;s+=a)this.process(u,s);continue}n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===a&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Vc(this),hg(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:a,isLE:i}=this;let{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>a-s&&(this.process(n,0),s=0);for(let f=s;f<a;f++)r[f]=0;gg(n,a-8,BigInt(this.length*8),i),this.process(n,0);const o=Cu(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)o.setUint32(4*f,c[f],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:a,finished:i,destroyed:s,pos:o}=this;return e.length=a,e.pos=o,e.finished=i,e.destroyed=s,a%r&&e.buffer.set(n),e}}const bg=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fn=new Uint32Array(64);class th extends eh{constructor(){super(64,32,8,!1),this.A=cn[0]|0,this.B=cn[1]|0,this.C=cn[2]|0,this.D=cn[3]|0,this.E=cn[4]|0,this.F=cn[5]|0,this.G=cn[6]|0,this.H=cn[7]|0}get(){const{A:e,B:r,C:n,D:a,E:i,F:s,G:o,H:u}=this;return[e,r,n,a,i,s,o,u]}set(e,r,n,a,i,s,o,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=a|0,this.E=i|0,this.F=s|0,this.G=o|0,this.H=u|0}process(e,r){for(let f=0;f<16;f++,r+=4)fn[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){const h=fn[f-15],v=fn[f-2],d=Nr(h,7)^Nr(h,18)^h>>>3,b=Nr(v,17)^Nr(v,19)^v>>>10;fn[f]=b+fn[f-7]+d+fn[f-16]|0}let{A:n,B:a,C:i,D:s,E:o,F:u,G:l,H:c}=this;for(let f=0;f<64;f++){const h=Nr(o,6)^Nr(o,11)^Nr(o,25),v=c+h+yg(o,u,l)+bg[f]+fn[f]|0,b=(Nr(n,2)^Nr(n,13)^Nr(n,22))+mg(n,a,i)|0;c=l,l=u,u=o,o=s+v|0,s=i,i=a,a=n,n=v+b|0}n=n+this.A|0,a=a+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,u=u+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,a,i,s,o,u,l,c)}roundClean(){fn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class wg extends th{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Kl=Wl(()=>new th),xg=Wl(()=>new wg);function Eg(t){return xg.create().update(new Uint8Array(t)).digest()}const hs="__principal__",Sg=2,qc=4,Tg="aaaaa-aa",_g=t=>{var e;return new Uint8Array(((e=t.match(/.{1,2}/g))!==null&&e!==void 0?e:[]).map(r=>parseInt(r,16)))},Bg=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"");let Me=class Ls{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([qc]))}static managementCanister(){return this.fromHex(Tg)}static selfAuthenticating(e){const r=Eg(e);return new this(new Uint8Array([...r,Sg]))}static from(e){if(typeof e=="string")return Ls.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new Ls(e);if(typeof e=="object"&&e!==null&&e._isPrincipal===!0)return new Ls(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(_g(e))}static fromText(e){let r=e;if(e.includes(hs)){const s=JSON.parse(e);hs in s&&(r=s[hs])}const n=r.toLowerCase().replace(/-/g,"");let a=lg(n);a=a.slice(4,a.length);const i=new this(a);if(i.toText()!==r)throw new Error(`Principal "${i.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return i}static fromUint8Array(e){return new this(e)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===qc}toUint8Array(){return this._arr}toHex(){return Bg(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,fg(this._arr));const n=new Uint8Array(e),a=Uint8Array.from(this._arr),i=new Uint8Array([...n,...a]),o=ug(i).match(/.{1,5}/g);if(!o)throw new Error;return o.join("-")}toString(){return this.toText()}toJSON(){return{[hs]:this.toText()}}compareTo(e){for(let r=0;r<Math.min(this._arr.length,e._arr.length);r++){if(this._arr[r]<e._arr[r])return"lt";if(this._arr[r]>e._arr[r])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const r=this.compareTo(e);return r=="lt"||r=="eq"}gtEq(e){const r=this.compareTo(e);return r=="gt"||r=="eq"}};class Jt extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,Jt.prototype)}}function He(...t){const e=new Uint8Array(t.reduce((n,a)=>n+a.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e}class Za{constructor(e,r=(e==null?void 0:e.byteLength)||0){this._buffer=rl(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}get buffer(){return rl(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){const r=this._view.subarray(0,e);return this._view=this._view.subarray(e),r.slice().buffer}readUint8(){const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){const r=new Uint8Array(e),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(e){const r=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+e);n.set(this._view),this._buffer=r,this._view=n}}function Iu(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function rl(t){return t instanceof Uint8Array?Iu(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Iu(new Uint8Array(t)):"buffer"in t?rl(t.buffer):Iu(new Uint8Array(t))}function Ag(t){const r=new TextEncoder().encode(t);let n=0;for(const a of r)n=(n*223+a)%2**32;return n}function $r(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return Ag(t)}function rh(){throw new Error("unexpected end of buffer")}function ta(t,e){return t.byteLength<e&&rh(),t.read(e)}function ra(t){const e=t.readUint8();return e===void 0&&rh(),e}function it(t){if(typeof t=="number"&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,r=new Za(new ArrayBuffer(e),0);for(;;){const n=Number(t&BigInt(127));if(t/=BigInt(128),t===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function Tt(t){let e=BigInt(1),r=BigInt(0),n;do n=ra(t),r+=BigInt(n&127).valueOf()*e,e*=BigInt(128);while(n>=128);return r}function mt(t){typeof t=="number"&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const r=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,n=new Za(new ArrayBuffer(r),0);for(;;){const i=a(t);if(t/=BigInt(128),e&&t===BigInt(0)&&i&64||!e&&t===BigInt(0)&&!(i&64)){n.write(new Uint8Array([i]));break}else n.write(new Uint8Array([i|128]))}function a(i){const s=i%BigInt(128);return Number(e?BigInt(128)-s-BigInt(1):s)}return n.buffer}function yn(t){const e=new Uint8Array(t.buffer);let r=0;for(;r<e.byteLength;r++)if(e[r]<128){if(!(e[r]&64))return Tt(t);break}const n=new Uint8Array(ta(t,r+1));let a=BigInt(0);for(let i=n.byteLength-1;i>=0;i--)a=a*BigInt(128)+BigInt(128-(n[i]&127)-1);return-a-BigInt(1)}function Cg(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return nh(t,e)}function nh(t,e){t=BigInt(t);const r=new Za(new ArrayBuffer(Math.min(1,e)),0);let n=0,a=BigInt(256),i=BigInt(0),s=Number(t%a);for(r.write(new Uint8Array([s]));++n<e;)t<0&&i===BigInt(0)&&s!==0&&(i=BigInt(1)),s=Number((t/a-i)%BigInt(256)),r.write(new Uint8Array([s])),a*=BigInt(256);return r.buffer}function ah(t,e){let r=BigInt(ra(t)),n=BigInt(1),a=0;for(;++a<e;){n*=BigInt(256);const i=BigInt(ra(t));r=r+n*i}return r}function Ig(t,e){let r=ah(t,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function nl(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const $s="DIDL",Gc=400;function ki(t,e,r){return t.map((n,a)=>r(n,e[a]))}class Ng{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,r){const n=this._typs.length;this._idx.set(e.name,n),this._typs.push(r)}merge(e,r){const n=this._idx.get(e.name),a=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+e);if(a===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[a],this._typs.splice(a,1),this._idx.delete(r)}encode(){const e=it(this._typs.length),r=He(...this._typs);return He(e,r)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return mt(this._idx.get(e)||0)}}class Rg{visitType(e,r){throw new Error("Not implemented")}visitPrimitive(e,r){return this.visitType(e,r)}visitEmpty(e,r){return this.visitPrimitive(e,r)}visitBool(e,r){return this.visitPrimitive(e,r)}visitNull(e,r){return this.visitPrimitive(e,r)}visitReserved(e,r){return this.visitPrimitive(e,r)}visitText(e,r){return this.visitPrimitive(e,r)}visitNumber(e,r){return this.visitPrimitive(e,r)}visitInt(e,r){return this.visitNumber(e,r)}visitNat(e,r){return this.visitNumber(e,r)}visitFloat(e,r){return this.visitPrimitive(e,r)}visitFixedInt(e,r){return this.visitNumber(e,r)}visitFixedNat(e,r){return this.visitNumber(e,r)}visitPrincipal(e,r){return this.visitPrimitive(e,r)}visitConstruct(e,r){return this.visitType(e,r)}visitVec(e,r,n){return this.visitConstruct(e,n)}visitOpt(e,r,n){return this.visitConstruct(e,n)}visitRecord(e,r,n){return this.visitConstruct(e,n)}visitTuple(e,r,n){const a=r.map((i,s)=>[`_${s}_`,i]);return this.visitRecord(e,a,n)}visitVariant(e,r,n){return this.visitConstruct(e,n)}visitRec(e,r,n){return this.visitConstruct(r,n)}visitFunc(e,r){return this.visitConstruct(e,r)}visitService(e,r){return this.visitConstruct(e,r)}}let zo=class{display(){return this.name}valueToString(e){return ct(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}};class pr extends zo{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class On extends zo{checkType(e){if(e instanceof Mn){const r=e.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class ih extends pr{accept(e,r){return e.visitEmpty(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return mt(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class sh extends zo{checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,r){throw e.visitType(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,r){let n=r.decodeValue(e,r);Object(n)!==n&&(n=Object(n));let a;return r instanceof Mn?a=()=>r.getType():a=()=>r,Object.defineProperty(n,"type",{value:a,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class oh extends pr{accept(e,r){return e.visitBool(this,r)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return mt(-2)}decodeValue(e,r){switch(this.checkType(r),ra(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class uh extends pr{accept(e,r){return e.visitNull(this,r)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return mt(-1)}decodeValue(e,r){return this.checkType(r),null}get name(){return"null"}}class bo extends pr{accept(e,r){return e.visitReserved(this,r)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return mt(-16)}decodeValue(e,r){return r.name!==this.name&&r.decodeValue(e,r),null}get name(){return"reserved"}}class lh extends pr{accept(e,r){return e.visitText(this,r)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){const r=new TextEncoder().encode(e),n=it(r.byteLength);return He(n,r)}encodeType(){return mt(-15)}decodeValue(e,r){this.checkType(r);const n=Tt(e),a=ta(e,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(a)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class ch extends pr{accept(e,r){return e.visitInt(this,r)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){return mt(e)}encodeType(){return mt(-4)}decodeValue(e,r){return this.checkType(r),yn(e)}get name(){return"int"}valueToString(e){return e.toString()}}class fh extends pr{accept(e,r){return e.visitNat(this,r)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){return it(e)}encodeType(){return mt(-3)}decodeValue(e,r){return this.checkType(r),Tt(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class Yl extends pr{constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,r){return e.visitFloat(this,r)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,e,!0):n.setFloat64(0,e,!0),r}encodeType(){const e=this._bits===32?-13:-14;return mt(e)}decodeValue(e,r){this.checkType(r);const n=ta(e,this._bits/8),a=new DataView(n);return this._bits===32?a.getFloat32(0,!0):a.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class na extends pr{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedInt(this,r)}covariant(e){const r=nl(this._bits-1)*BigInt(-1),n=nl(this._bits-1)-BigInt(1);let a=!1;if(typeof e=="bigint")a=e>=r&&e<=n;else if(Number.isInteger(e)){const i=BigInt(e);a=i>=r&&i<=n}else a=!1;if(a)return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){return nh(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return mt(-9-e)}decodeValue(e,r){this.checkType(r);const n=Ig(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class _n extends pr{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedNat(this,r)}covariant(e){const r=nl(this._bits);let n=!1;if(typeof e=="bigint"&&e>=BigInt(0)?n=e<r:Number.isInteger(e)&&e>=0?n=BigInt(e)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){return Cg(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return mt(-5-e)}decodeValue(e,r){this.checkType(r);const n=ah(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class Vo extends On{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof _n&&e._bits===8&&(this._blobOptimization=!0)}accept(e,r){return e.visitVec(this,this._type,r)}covariant(e){const r=this._type instanceof _n?this._type._bits:this._type instanceof na?this._type._bits:0;if(ArrayBuffer.isView(e)&&r==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((n,a)=>{try{return this._type.covariant(n)}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${a} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){const r=it(e.length);if(this._blobOptimization)return He(r,new Uint8Array(e));if(ArrayBuffer.isView(e))return He(r,new Uint8Array(e.buffer));const n=new Za(new ArrayBuffer(r.byteLength+e.length),0);n.write(r);for(const a of e){const i=this._type.encodeValue(a);n.write(new Uint8Array(i))}return n.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=mt(-19),n=this._type.encodeType(e);e.add(this,He(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Vo))throw new Error("Not a vector type");const a=Number(Tt(e));if(this._type instanceof _n){if(this._type._bits==8)return new Uint8Array(e.read(a));if(this._type._bits==16)return new Uint16Array(e.read(a*2));if(this._type._bits==32)return new Uint32Array(e.read(a*4));if(this._type._bits==64)return new BigUint64Array(e.read(a*8))}if(this._type instanceof na){if(this._type._bits==8)return new Int8Array(e.read(a));if(this._type._bits==16)return new Int16Array(e.read(a*2));if(this._type._bits==32)return new Int32Array(e.read(a*4));if(this._type._bits==64)return new BigInt64Array(e.read(a*8))}const i=[];for(let s=0;s<a;s++)i.push(this._type.decodeValue(e,n._type));return i}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class qa extends On{constructor(e){super(),this._type=e}accept(e,r){return e.visitOpt(this,this._type,r)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${ct(e)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):He(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=mt(-18),n=this._type.encodeType(e);e.add(this,He(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof qa))throw new Error("Not an option type");switch(ra(e)){case 0:return[];case 1:return[this._type.decodeValue(e,n._type)];default:throw new Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class Qi extends On{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>$r(r[0])-$r(n[0]))}accept(e,r){return e.visitRecord(this,this._fields,r)}tryAsTuple(){const e=[];for(let r=0;r<this._fields.length;r++){const[n,a]=this._fields[r];if(n!==`_${r}_`)return null;e.push(a)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([r,n])=>{if(!e.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(e[r])}catch(a){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${a.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){const r=this._fields.map(([a])=>e[a]),n=ki(this._fields,r,([,a],i)=>a.encodeValue(i));return He(...n)}_buildTypeTableImpl(e){this._fields.forEach(([i,s])=>s.buildTypeTable(e));const r=mt(-20),n=it(this._fields.length),a=this._fields.map(([i,s])=>He(it($r(i)),s.encodeType(e)));e.add(this,He(r,n,He(...a)))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Qi))throw new Error("Not a record type");const a={};let i=0,s=0;for(;s<n._fields.length;){const[o,u]=n._fields[s];if(i>=this._fields.length){u.decodeValue(e,u),s++;continue}const[l,c]=this._fields[i],f=$r(this._fields[i][0]),h=$r(o);if(f===h)a[l]=c.decodeValue(e,u),i++,s++;else if(h>f)if(c instanceof qa||c instanceof bo)a[l]=[],i++;else throw new Error("Cannot find required field "+l);else u.decodeValue(e,u),s++}for(const[o,u]of this._fields.slice(i))if(u instanceof qa||u instanceof bo)a[o]=[];else throw new Error("Cannot find required field "+o);return a}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(e){const r=this._fields.map(([a])=>e[a]);return`record {${ki(this._fields,r,([a,i],s)=>a+"="+i.valueToString(s)).join("; ")}}`}}class qo extends Qi{constructor(e){const r={};e.forEach((n,a)=>r["_"+a+"_"]=n),super(r),this._components=e}accept(e,r){return e.visitTuple(this,this._components,r)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(e[n])}catch(a){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${a.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){const r=ki(this._components,e,(n,a)=>n.encodeValue(a));return He(...r)}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof qo))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const a=[];for(const[i,s]of n._components.entries())i>=this._components.length?s.decodeValue(e,s):a.push(this._components[i].decodeValue(e,s));return a}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(e){return`record {${ki(this._components,e,(n,a)=>n.valueToString(a)).join("; ")}}`}}class Go extends On{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>$r(r[0])-$r(n[0]))}accept(e,r){return e.visitVariant(this,this._fields,r)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([r,n])=>{try{return!e.hasOwnProperty(r)||n.covariant(e[r])}catch(a){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${a.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){for(let r=0;r<this._fields.length;r++){const[n,a]=this._fields[r];if(e.hasOwnProperty(n)){const i=it(r),s=a.encodeValue(e[n]);return He(i,s)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,i])=>{i.buildTypeTable(e)});const r=mt(-21),n=it(this._fields.length),a=this._fields.map(([i,s])=>He(it($r(i)),s.encodeType(e)));e.add(this,He(r,n,...a))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Go))throw new Error("Not a variant type");const a=Number(Tt(e));if(a>=n._fields.length)throw Error("Invalid variant index: "+a);const[i,s]=n._fields[a];for(const[o,u]of this._fields)if($r(i)===$r(o)){const l=u.decodeValue(e,s);return{[o]:l}}throw new Error("Cannot find field hash "+i)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(e){for(const[r,n]of this._fields)if(e.hasOwnProperty(r)){const a=n.valueToString(e[r]);return a==="null"?`variant {${r}}`:`variant {${r}=${a}}`}throw new Error("Variant has no data: "+e)}}class Mn extends On{constructor(){super(...arguments),this._id=Mn._counter++,this._type=void 0}accept(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,r)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}Mn._counter=0;function Zl(t){if(ra(t)!==1)throw new Error("Cannot decode principal");const r=Number(Tt(t));return Me.fromUint8Array(new Uint8Array(ta(t,r)))}class dh extends pr{accept(e,r){return e.visitPrincipal(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=it(r.byteLength);return He(new Uint8Array([1]),n,r)}encodeType(){return mt(-24)}decodeValue(e,r){return this.checkType(r),Zl(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class Xl extends On{constructor(e,r,n=[]){super(),this.argTypes=e,this.retTypes=r,this.annotations=n}static argsToString(e,r){if(e.length!==r.length)throw new Error("arity mismatch");return"("+e.map((n,a)=>n.valueToString(r[a])).join(", ")+")"}accept(e,r){return e.visitFunc(this,r)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue([e,r]){const n=e.toUint8Array(),a=it(n.byteLength),i=He(new Uint8Array([1]),a,n),s=new TextEncoder().encode(r),o=it(s.byteLength);return He(new Uint8Array([1]),i,o,s)}_buildTypeTableImpl(e){this.argTypes.forEach(l=>l.buildTypeTable(e)),this.retTypes.forEach(l=>l.buildTypeTable(e));const r=mt(-22),n=it(this.argTypes.length),a=He(...this.argTypes.map(l=>l.encodeType(e))),i=it(this.retTypes.length),s=He(...this.retTypes.map(l=>l.encodeType(e))),o=it(this.annotations.length),u=He(...this.annotations.map(l=>this.encodeAnnotation(l)));e.add(this,He(r,n,a,i,s,o,u))}decodeValue(e){if(ra(e)!==1)throw new Error("Cannot decode function reference");const n=Zl(e),a=Number(Tt(e)),i=ta(e,a),o=new TextDecoder("utf8",{fatal:!0}).decode(i);return[n,o]}get name(){const e=this.argTypes.map(a=>a.name).join(", "),r=this.retTypes.map(a=>a.name).join(", "),n=" "+this.annotations.join(" ");return`(${e}) -> (${r})${n}`}valueToString([e,r]){return`func "${e.toText()}".${r}`}display(){const e=this.argTypes.map(a=>a.display()).join(", "),r=this.retTypes.map(a=>a.display()).join(", "),n=" "+this.annotations.join(" ");return`(${e}) → (${r})${n}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class hh extends On{constructor(e){super(),this._fields=Object.entries(e).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(e,r){return e.visitService(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${ct(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=it(r.length);return He(new Uint8Array([1]),n,r)}_buildTypeTableImpl(e){this._fields.forEach(([i,s])=>s.buildTypeTable(e));const r=mt(-23),n=it(this._fields.length),a=this._fields.map(([i,s])=>{const o=new TextEncoder().encode(i),u=it(o.length);return He(u,o,s.encodeType(e))});e.add(this,He(r,n,...a))}decodeValue(e){return Zl(e)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function ct(t){const e=JSON.stringify(t,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return e&&e.length>Gc?e.substring(0,Gc-3)+"...":e}function al(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const r=new Ng;t.forEach(u=>u.buildTypeTable(r));const n=new TextEncoder().encode($s),a=r.encode(),i=it(e.length),s=He(...t.map(u=>u.encodeType(r))),o=He(...ki(t,e,(u,l)=>{try{u.covariant(l)}catch(c){throw new Error(c.message+`

`)}return u.encodeValue(l)}));return He(n,a,i,s,o)}function vh(t,e){const r=new Za(e);if(e.byteLength<$s.length)throw new Error("Message length smaller than magic number");const n=ta(r,$s.length),a=new TextDecoder().decode(n);if(a!==$s)throw new Error("Wrong magic number: "+JSON.stringify(a));function i(v){const d=[],b=Number(Tt(v));for(let E=0;E<b;E++){const S=Number(yn(v));switch(S){case-18:case-19:{const B=Number(yn(v));d.push([S,B]);break}case-20:case-21:{const B=[];let C=Number(Tt(v)),O;for(;C--;){const A=Number(Tt(v));if(A>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof O=="number"&&O>=A)throw new Error("field id collision or not sorted");O=A;const D=Number(yn(v));B.push([A,D])}d.push([S,B]);break}case-22:{const B=[];let C=Number(Tt(v));for(;C--;)B.push(Number(yn(v)));const O=[];let A=Number(Tt(v));for(;A--;)O.push(Number(yn(v)));const D=[];let F=Number(Tt(v));for(;F--;)switch(Number(Tt(v))){case 1:{D.push("query");break}case 2:{D.push("oneway");break}case 3:{D.push("composite_query");break}default:throw new Error("unknown annotation")}d.push([S,[B,O,D]]);break}case-23:{let B=Number(Tt(v));const C=[];for(;B--;){const O=Number(Tt(v)),A=new TextDecoder().decode(ta(v,O)),D=yn(v);C.push([A,D])}d.push([S,C]);break}default:throw new Error("Illegal op_code: "+S)}}const y=[],m=Number(Tt(v));for(let E=0;E<m;E++)y.push(Number(yn(v)));return[d,y]}const[s,o]=i(r);if(o.length<t.length)throw new Error("Wrong number of return values");const u=s.map(v=>Uh());function l(v){if(v<-24)throw new Error("future value not supported");if(v<0)switch(v){case-1:return mh;case-2:return yh;case-3:return xh;case-4:return wh;case-5:return Ch;case-6:return Ih;case-7:return Nh;case-8:return Rh;case-9:return Th;case-10:return _h;case-11:return Bh;case-12:return Ah;case-13:return Eh;case-14:return Sh;case-15:return bh;case-16:return gh;case-17:return ph;case-24:return kh;default:throw new Error("Illegal op_code: "+v)}if(v>=s.length)throw new Error("type index out of range");return u[v]}function c(v){switch(v[0]){case-19:{const d=l(v[1]);return Oh(d)}case-18:{const d=l(v[1]);return Mh(d)}case-20:{const d={};for(const[m,E]of v[1]){const S=`_${m}_`;d[S]=l(E)}const b=Fh(d),y=b.tryAsTuple();return Array.isArray(y)?Ph(...y):b}case-21:{const d={};for(const[b,y]of v[1]){const m=`_${b}_`;d[m]=l(y)}return Dh(d)}case-22:{const[d,b,y]=v[1];return Lh(d.map(m=>l(m)),b.map(m=>l(m)),y)}case-23:{const d={},b=v[1];for(const[y,m]of b){let E=l(m);if(E instanceof Mn&&(E=E.getType()),!(E instanceof Xl))throw new Error("Illegal service definition: services can only contain functions");d[y]=E}return $h(d)}default:throw new Error("Illegal op_code: "+v[0])}}s.forEach((v,d)=>{if(v[0]===-22){const b=c(v);u[d].fill(b)}}),s.forEach((v,d)=>{if(v[0]!==-22){const b=c(v);u[d].fill(b)}});const f=o.map(v=>l(v)),h=t.map((v,d)=>v.decodeValue(r,f[d]));for(let v=t.length;v<f.length;v++)f[v].decodeValue(r,f[v]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return h}const ph=new ih,gh=new bo,kg=new sh,yh=new oh,mh=new uh,bh=new lh,wh=new ch,xh=new fh,Eh=new Yl(32),Sh=new Yl(64),Th=new na(8),_h=new na(16),Bh=new na(32),Ah=new na(64),Ch=new _n(8),Ih=new _n(16),Nh=new _n(32),Rh=new _n(64),kh=new dh;function Ph(...t){return new qo(t)}function Oh(t){return new Vo(t)}function Mh(t){return new qa(t)}function Fh(t){return new Qi(t)}function Dh(t){return new Go(t)}function Uh(){return new Mn}function Lh(t,e,r=[]){return new Xl(t,e,r)}function $h(t){return new hh(t)}const Pg=Object.freeze(Object.defineProperty({__proto__:null,Bool:yh,BoolClass:oh,ConstructType:On,Empty:ph,EmptyClass:ih,FixedIntClass:na,FixedNatClass:_n,Float32:Eh,Float64:Sh,FloatClass:Yl,Func:Lh,FuncClass:Xl,Int:wh,Int16:_h,Int32:Bh,Int64:Ah,Int8:Th,IntClass:ch,Nat:xh,Nat16:Ih,Nat32:Nh,Nat64:Rh,Nat8:Ch,NatClass:fh,Null:mh,NullClass:uh,Opt:Mh,OptClass:qa,PrimitiveType:pr,Principal:kh,PrincipalClass:dh,Rec:Uh,RecClass:Mn,Record:Fh,RecordClass:Qi,Reserved:gh,ReservedClass:bo,Service:$h,ServiceClass:hh,Text:bh,TextClass:lh,Tuple:Ph,TupleClass:qo,Type:zo,Unknown:kg,UnknownClass:sh,Variant:Dh,VariantClass:Go,Vec:Oh,VecClass:Vo,Visitor:Rg,decode:vh,encode:al},Symbol.toStringTag,{value:"Module"}));var zh={},ji={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=Zi,r=Xi,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=E,t.INSPECT_MAX_BYTES=50;var a=2147483647;t.kMaxLength=a,o.TYPED_ARRAY_SUPPORT=i(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var _=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(_,g),_.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function s(_){if(_>a)throw new RangeError('The value "'+_+'" is invalid for option "size"');var g=new Uint8Array(_);return Object.setPrototypeOf(g,o.prototype),g}function o(_,g,w){if(typeof _=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(_)}return u(_,g,w)}o.poolSize=8192;function u(_,g,w){if(typeof _=="string")return h(_,g);if(ArrayBuffer.isView(_))return d(_);if(_==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _);if(te(_,ArrayBuffer)||_&&te(_.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(te(_,SharedArrayBuffer)||_&&te(_.buffer,SharedArrayBuffer)))return b(_,g,w);if(typeof _=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var P=_.valueOf&&_.valueOf();if(P!=null&&P!==_)return o.from(P,g,w);var q=y(_);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _[Symbol.toPrimitive]=="function")return o.from(_[Symbol.toPrimitive]("string"),g,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _)}o.from=function(_,g,w){return u(_,g,w)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function l(_){if(typeof _!="number")throw new TypeError('"size" argument must be of type number');if(_<0)throw new RangeError('The value "'+_+'" is invalid for option "size"')}function c(_,g,w){return l(_),_<=0?s(_):g!==void 0?typeof w=="string"?s(_).fill(g,w):s(_).fill(g):s(_)}o.alloc=function(_,g,w){return c(_,g,w)};function f(_){return l(_),s(_<0?0:m(_)|0)}o.allocUnsafe=function(_){return f(_)},o.allocUnsafeSlow=function(_){return f(_)};function h(_,g){if((typeof g!="string"||g==="")&&(g="utf8"),!o.isEncoding(g))throw new TypeError("Unknown encoding: "+g);var w=S(_,g)|0,P=s(w),q=P.write(_,g);return q!==w&&(P=P.slice(0,q)),P}function v(_){for(var g=_.length<0?0:m(_.length)|0,w=s(g),P=0;P<g;P+=1)w[P]=_[P]&255;return w}function d(_){if(te(_,Uint8Array)){var g=new Uint8Array(_);return b(g.buffer,g.byteOffset,g.byteLength)}return v(_)}function b(_,g,w){if(g<0||_.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(_.byteLength<g+(w||0))throw new RangeError('"length" is outside of buffer bounds');var P;return g===void 0&&w===void 0?P=new Uint8Array(_):w===void 0?P=new Uint8Array(_,g):P=new Uint8Array(_,g,w),Object.setPrototypeOf(P,o.prototype),P}function y(_){if(o.isBuffer(_)){var g=m(_.length)|0,w=s(g);return w.length===0||_.copy(w,0,0,g),w}if(_.length!==void 0)return typeof _.length!="number"||Q(_.length)?s(0):v(_);if(_.type==="Buffer"&&Array.isArray(_.data))return v(_.data)}function m(_){if(_>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return _|0}function E(_){return+_!=_&&(_=0),o.alloc(+_)}o.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==o.prototype},o.compare=function(g,w){if(te(g,Uint8Array)&&(g=o.from(g,g.offset,g.byteLength)),te(w,Uint8Array)&&(w=o.from(w,w.offset,w.byteLength)),!o.isBuffer(g)||!o.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===w)return 0;for(var P=g.length,q=w.length,j=0,oe=Math.min(P,q);j<oe;++j)if(g[j]!==w[j]){P=g[j],q=w[j];break}return P<q?-1:q<P?1:0},o.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(g,w){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return o.alloc(0);var P;if(w===void 0)for(w=0,P=0;P<g.length;++P)w+=g[P].length;var q=o.allocUnsafe(w),j=0;for(P=0;P<g.length;++P){var oe=g[P];if(te(oe,Uint8Array))j+oe.length>q.length?o.from(oe).copy(q,j):Uint8Array.prototype.set.call(q,oe,j);else if(o.isBuffer(oe))oe.copy(q,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=oe.length}return q};function S(_,g){if(o.isBuffer(_))return _.length;if(ArrayBuffer.isView(_)||te(_,ArrayBuffer))return _.byteLength;if(typeof _!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _);var w=_.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&w===0)return 0;for(var q=!1;;)switch(g){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return ie(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return M(_).length;default:if(q)return P?-1:ie(_).length;g=(""+g).toLowerCase(),q=!0}}o.byteLength=S;function B(_,g,w){var P=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,g>>>=0,w<=g))return"";for(_||(_="utf8");;)switch(_){case"hex":return ae(this,g,w);case"utf8":case"utf-8":return I(this,g,w);case"ascii":return $(this,g,w);case"latin1":case"binary":return X(this,g,w);case"base64":return R(this,g,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,g,w);default:if(P)throw new TypeError("Unknown encoding: "+_);_=(_+"").toLowerCase(),P=!0}}o.prototype._isBuffer=!0;function C(_,g,w){var P=_[g];_[g]=_[w],_[w]=P}o.prototype.swap16=function(){var g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var w=0;w<g;w+=2)C(this,w,w+1);return this},o.prototype.swap32=function(){var g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var w=0;w<g;w+=4)C(this,w,w+3),C(this,w+1,w+2);return this},o.prototype.swap64=function(){var g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var w=0;w<g;w+=8)C(this,w,w+7),C(this,w+1,w+6),C(this,w+2,w+5),C(this,w+3,w+4);return this},o.prototype.toString=function(){var g=this.length;return g===0?"":arguments.length===0?I(this,0,g):B.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(g){if(!o.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:o.compare(this,g)===0},o.prototype.inspect=function(){var g="",w=t.INSPECT_MAX_BYTES;return g=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(g+=" ... "),"<Buffer "+g+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(g,w,P,q,j){if(te(g,Uint8Array)&&(g=o.from(g,g.offset,g.byteLength)),!o.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(w===void 0&&(w=0),P===void 0&&(P=g?g.length:0),q===void 0&&(q=0),j===void 0&&(j=this.length),w<0||P>g.length||q<0||j>this.length)throw new RangeError("out of range index");if(q>=j&&w>=P)return 0;if(q>=j)return-1;if(w>=P)return 1;if(w>>>=0,P>>>=0,q>>>=0,j>>>=0,this===g)return 0;for(var oe=j-q,ge=P-w,ve=Math.min(oe,ge),L=this.slice(q,j),de=g.slice(w,P),T=0;T<ve;++T)if(L[T]!==de[T]){oe=L[T],ge=de[T];break}return oe<ge?-1:ge<oe?1:0};function O(_,g,w,P,q){if(_.length===0)return-1;if(typeof w=="string"?(P=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,Q(w)&&(w=q?0:_.length-1),w<0&&(w=_.length+w),w>=_.length){if(q)return-1;w=_.length-1}else if(w<0)if(q)w=0;else return-1;if(typeof g=="string"&&(g=o.from(g,P)),o.isBuffer(g))return g.length===0?-1:A(_,g,w,P,q);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call(_,g,w):Uint8Array.prototype.lastIndexOf.call(_,g,w):A(_,[g],w,P,q);throw new TypeError("val must be string, number or Buffer")}function A(_,g,w,P,q){var j=1,oe=_.length,ge=g.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(_.length<2||g.length<2)return-1;j=2,oe/=2,ge/=2,w/=2}function ve(x,z){return j===1?x[z]:x.readUInt16BE(z*j)}var L;if(q){var de=-1;for(L=w;L<oe;L++)if(ve(_,L)===ve(g,de===-1?0:L-de)){if(de===-1&&(de=L),L-de+1===ge)return de*j}else de!==-1&&(L-=L-de),de=-1}else for(w+ge>oe&&(w=oe-ge),L=w;L>=0;L--){for(var T=!0,p=0;p<ge;p++)if(ve(_,L+p)!==ve(g,p)){T=!1;break}if(T)return L}return-1}o.prototype.includes=function(g,w,P){return this.indexOf(g,w,P)!==-1},o.prototype.indexOf=function(g,w,P){return O(this,g,w,P,!0)},o.prototype.lastIndexOf=function(g,w,P){return O(this,g,w,P,!1)};function D(_,g,w,P){w=Number(w)||0;var q=_.length-w;P?(P=Number(P),P>q&&(P=q)):P=q;var j=g.length;P>j/2&&(P=j/2);for(var oe=0;oe<P;++oe){var ge=parseInt(g.substr(oe*2,2),16);if(Q(ge))return oe;_[w+oe]=ge}return oe}function F(_,g,w,P){return K(ie(g,_.length-w),_,w,P)}function U(_,g,w,P){return K(J(g),_,w,P)}function W(_,g,w,P){return K(M(g),_,w,P)}function H(_,g,w,P){return K(k(g,_.length-w),_,w,P)}o.prototype.write=function(g,w,P,q){if(w===void 0)q="utf8",P=this.length,w=0;else if(P===void 0&&typeof w=="string")q=w,P=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(P)?(P=P>>>0,q===void 0&&(q="utf8")):(q=P,P=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var j=this.length-w;if((P===void 0||P>j)&&(P=j),g.length>0&&(P<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");for(var oe=!1;;)switch(q){case"hex":return D(this,g,w,P);case"utf8":case"utf-8":return F(this,g,w,P);case"ascii":case"latin1":case"binary":return U(this,g,w,P);case"base64":return W(this,g,w,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,g,w,P);default:if(oe)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),oe=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(_,g,w){return g===0&&w===_.length?e.fromByteArray(_):e.fromByteArray(_.slice(g,w))}function I(_,g,w){w=Math.min(_.length,w);for(var P=[],q=g;q<w;){var j=_[q],oe=null,ge=j>239?4:j>223?3:j>191?2:1;if(q+ge<=w){var ve,L,de,T;switch(ge){case 1:j<128&&(oe=j);break;case 2:ve=_[q+1],(ve&192)===128&&(T=(j&31)<<6|ve&63,T>127&&(oe=T));break;case 3:ve=_[q+1],L=_[q+2],(ve&192)===128&&(L&192)===128&&(T=(j&15)<<12|(ve&63)<<6|L&63,T>2047&&(T<55296||T>57343)&&(oe=T));break;case 4:ve=_[q+1],L=_[q+2],de=_[q+3],(ve&192)===128&&(L&192)===128&&(de&192)===128&&(T=(j&15)<<18|(ve&63)<<12|(L&63)<<6|de&63,T>65535&&T<1114112&&(oe=T))}}oe===null?(oe=65533,ge=1):oe>65535&&(oe-=65536,P.push(oe>>>10&1023|55296),oe=56320|oe&1023),P.push(oe),q+=ge}return V(P)}var G=4096;function V(_){var g=_.length;if(g<=G)return String.fromCharCode.apply(String,_);for(var w="",P=0;P<g;)w+=String.fromCharCode.apply(String,_.slice(P,P+=G));return w}function $(_,g,w){var P="";w=Math.min(_.length,w);for(var q=g;q<w;++q)P+=String.fromCharCode(_[q]&127);return P}function X(_,g,w){var P="";w=Math.min(_.length,w);for(var q=g;q<w;++q)P+=String.fromCharCode(_[q]);return P}function ae(_,g,w){var P=_.length;(!g||g<0)&&(g=0),(!w||w<0||w>P)&&(w=P);for(var q="",j=g;j<w;++j)q+=ee[_[j]];return q}function ce(_,g,w){for(var P=_.slice(g,w),q="",j=0;j<P.length-1;j+=2)q+=String.fromCharCode(P[j]+P[j+1]*256);return q}o.prototype.slice=function(g,w){var P=this.length;g=~~g,w=w===void 0?P:~~w,g<0?(g+=P,g<0&&(g=0)):g>P&&(g=P),w<0?(w+=P,w<0&&(w=0)):w>P&&(w=P),w<g&&(w=g);var q=this.subarray(g,w);return Object.setPrototypeOf(q,o.prototype),q};function re(_,g,w){if(_%1!==0||_<0)throw new RangeError("offset is not uint");if(_+g>w)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(g,w,P){g=g>>>0,w=w>>>0,P||re(g,w,this.length);for(var q=this[g],j=1,oe=0;++oe<w&&(j*=256);)q+=this[g+oe]*j;return q},o.prototype.readUintBE=o.prototype.readUIntBE=function(g,w,P){g=g>>>0,w=w>>>0,P||re(g,w,this.length);for(var q=this[g+--w],j=1;w>0&&(j*=256);)q+=this[g+--w]*j;return q},o.prototype.readUint8=o.prototype.readUInt8=function(g,w){return g=g>>>0,w||re(g,1,this.length),this[g]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(g,w){return g=g>>>0,w||re(g,2,this.length),this[g]|this[g+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(g,w){return g=g>>>0,w||re(g,2,this.length),this[g]<<8|this[g+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(g,w){return g=g>>>0,w||re(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(g,w){return g=g>>>0,w||re(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},o.prototype.readIntLE=function(g,w,P){g=g>>>0,w=w>>>0,P||re(g,w,this.length);for(var q=this[g],j=1,oe=0;++oe<w&&(j*=256);)q+=this[g+oe]*j;return j*=128,q>=j&&(q-=Math.pow(2,8*w)),q},o.prototype.readIntBE=function(g,w,P){g=g>>>0,w=w>>>0,P||re(g,w,this.length);for(var q=w,j=1,oe=this[g+--q];q>0&&(j*=256);)oe+=this[g+--q]*j;return j*=128,oe>=j&&(oe-=Math.pow(2,8*w)),oe},o.prototype.readInt8=function(g,w){return g=g>>>0,w||re(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},o.prototype.readInt16LE=function(g,w){g=g>>>0,w||re(g,2,this.length);var P=this[g]|this[g+1]<<8;return P&32768?P|4294901760:P},o.prototype.readInt16BE=function(g,w){g=g>>>0,w||re(g,2,this.length);var P=this[g+1]|this[g]<<8;return P&32768?P|4294901760:P},o.prototype.readInt32LE=function(g,w){return g=g>>>0,w||re(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},o.prototype.readInt32BE=function(g,w){return g=g>>>0,w||re(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},o.prototype.readFloatLE=function(g,w){return g=g>>>0,w||re(g,4,this.length),r.read(this,g,!0,23,4)},o.prototype.readFloatBE=function(g,w){return g=g>>>0,w||re(g,4,this.length),r.read(this,g,!1,23,4)},o.prototype.readDoubleLE=function(g,w){return g=g>>>0,w||re(g,8,this.length),r.read(this,g,!0,52,8)},o.prototype.readDoubleBE=function(g,w){return g=g>>>0,w||re(g,8,this.length),r.read(this,g,!1,52,8)};function Z(_,g,w,P,q,j){if(!o.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>q||g<j)throw new RangeError('"value" argument is out of bounds');if(w+P>_.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(g,w,P,q){if(g=+g,w=w>>>0,P=P>>>0,!q){var j=Math.pow(2,8*P)-1;Z(this,g,w,P,j,0)}var oe=1,ge=0;for(this[w]=g&255;++ge<P&&(oe*=256);)this[w+ge]=g/oe&255;return w+P},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(g,w,P,q){if(g=+g,w=w>>>0,P=P>>>0,!q){var j=Math.pow(2,8*P)-1;Z(this,g,w,P,j,0)}var oe=P-1,ge=1;for(this[w+oe]=g&255;--oe>=0&&(ge*=256);)this[w+oe]=g/ge&255;return w+P},o.prototype.writeUint8=o.prototype.writeUInt8=function(g,w,P){return g=+g,w=w>>>0,P||Z(this,g,w,1,255,0),this[w]=g&255,w+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(g,w,P){return g=+g,w=w>>>0,P||Z(this,g,w,2,65535,0),this[w]=g&255,this[w+1]=g>>>8,w+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(g,w,P){return g=+g,w=w>>>0,P||Z(this,g,w,2,65535,0),this[w]=g>>>8,this[w+1]=g&255,w+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(g,w,P){return g=+g,w=w>>>0,P||Z(this,g,w,4,4294967295,0),this[w+3]=g>>>24,this[w+2]=g>>>16,this[w+1]=g>>>8,this[w]=g&255,w+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(g,w,P){return g=+g,w=w>>>0,P||Z(this,g,w,4,4294967295,0),this[w]=g>>>24,this[w+1]=g>>>16,this[w+2]=g>>>8,this[w+3]=g&255,w+4},o.prototype.writeIntLE=function(g,w,P,q){if(g=+g,w=w>>>0,!q){var j=Math.pow(2,8*P-1);Z(this,g,w,P,j-1,-j)}var oe=0,ge=1,ve=0;for(this[w]=g&255;++oe<P&&(ge*=256);)g<0&&ve===0&&this[w+oe-1]!==0&&(ve=1),this[w+oe]=(g/ge>>0)-ve&255;return w+P},o.prototype.writeIntBE=function(g,w,P,q){if(g=+g,w=w>>>0,!q){var j=Math.pow(2,8*P-1);Z(this,g,w,P,j-1,-j)}var oe=P-1,ge=1,ve=0;for(this[w+oe]=g&255;--oe>=0&&(ge*=256);)g<0&&ve===0&&this[w+oe+1]!==0&&(ve=1),this[w+oe]=(g/ge>>0)-ve&255;return w+P},o.prototype.writeInt8=function(g,w,P){return g=+g,w=w>>>0,P||Z(this,g,w,1,127,-128),g<0&&(g=255+g+1),this[w]=g&255,w+1},o.prototype.writeInt16LE=function(g,w,P){return g=+g,w=w>>>0,P||Z(this,g,w,2,32767,-32768),this[w]=g&255,this[w+1]=g>>>8,w+2},o.prototype.writeInt16BE=function(g,w,P){return g=+g,w=w>>>0,P||Z(this,g,w,2,32767,-32768),this[w]=g>>>8,this[w+1]=g&255,w+2},o.prototype.writeInt32LE=function(g,w,P){return g=+g,w=w>>>0,P||Z(this,g,w,4,2147483647,-2147483648),this[w]=g&255,this[w+1]=g>>>8,this[w+2]=g>>>16,this[w+3]=g>>>24,w+4},o.prototype.writeInt32BE=function(g,w,P){return g=+g,w=w>>>0,P||Z(this,g,w,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[w]=g>>>24,this[w+1]=g>>>16,this[w+2]=g>>>8,this[w+3]=g&255,w+4};function le(_,g,w,P,q,j){if(w+P>_.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function N(_,g,w,P,q){return g=+g,w=w>>>0,q||le(_,g,w,4),r.write(_,g,w,P,23,4),w+4}o.prototype.writeFloatLE=function(g,w,P){return N(this,g,w,!0,P)},o.prototype.writeFloatBE=function(g,w,P){return N(this,g,w,!1,P)};function fe(_,g,w,P,q){return g=+g,w=w>>>0,q||le(_,g,w,8),r.write(_,g,w,P,52,8),w+8}o.prototype.writeDoubleLE=function(g,w,P){return fe(this,g,w,!0,P)},o.prototype.writeDoubleBE=function(g,w,P){return fe(this,g,w,!1,P)},o.prototype.copy=function(g,w,P,q){if(!o.isBuffer(g))throw new TypeError("argument should be a Buffer");if(P||(P=0),!q&&q!==0&&(q=this.length),w>=g.length&&(w=g.length),w||(w=0),q>0&&q<P&&(q=P),q===P||g.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),g.length-w<q-P&&(q=g.length-w+P);var j=q-P;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,P,q):Uint8Array.prototype.set.call(g,this.subarray(P,q),w),j},o.prototype.fill=function(g,w,P,q){if(typeof g=="string"){if(typeof w=="string"?(q=w,w=0,P=this.length):typeof P=="string"&&(q=P,P=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!o.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(g.length===1){var j=g.charCodeAt(0);(q==="utf8"&&j<128||q==="latin1")&&(g=j)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(w<0||this.length<w||this.length<P)throw new RangeError("Out of range index");if(P<=w)return this;w=w>>>0,P=P===void 0?this.length:P>>>0,g||(g=0);var oe;if(typeof g=="number")for(oe=w;oe<P;++oe)this[oe]=g;else{var ge=o.isBuffer(g)?g:o.from(g,q),ve=ge.length;if(ve===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(oe=0;oe<P-w;++oe)this[oe+w]=ge[oe%ve]}return this};var he=/[^+/0-9A-Za-z-_]/g;function pe(_){if(_=_.split("=")[0],_=_.trim().replace(he,""),_.length<2)return"";for(;_.length%4!==0;)_=_+"=";return _}function ie(_,g){g=g||1/0;for(var w,P=_.length,q=null,j=[],oe=0;oe<P;++oe){if(w=_.charCodeAt(oe),w>55295&&w<57344){if(!q){if(w>56319){(g-=3)>-1&&j.push(239,191,189);continue}else if(oe+1===P){(g-=3)>-1&&j.push(239,191,189);continue}q=w;continue}if(w<56320){(g-=3)>-1&&j.push(239,191,189),q=w;continue}w=(q-55296<<10|w-56320)+65536}else q&&(g-=3)>-1&&j.push(239,191,189);if(q=null,w<128){if((g-=1)<0)break;j.push(w)}else if(w<2048){if((g-=2)<0)break;j.push(w>>6|192,w&63|128)}else if(w<65536){if((g-=3)<0)break;j.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((g-=4)<0)break;j.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return j}function J(_){for(var g=[],w=0;w<_.length;++w)g.push(_.charCodeAt(w)&255);return g}function k(_,g){for(var w,P,q,j=[],oe=0;oe<_.length&&!((g-=2)<0);++oe)w=_.charCodeAt(oe),P=w>>8,q=w%256,j.push(q),j.push(P);return j}function M(_){return e.toByteArray(pe(_))}function K(_,g,w,P){for(var q=0;q<P&&!(q+w>=g.length||q>=_.length);++q)g[q+w]=_[q];return q}function te(_,g){return _ instanceof g||_!=null&&_.constructor!=null&&_.constructor.name!=null&&_.constructor.name===g.name}function Q(_){return _!==_}var ee=function(){for(var _="0123456789abcdef",g=new Array(256),w=0;w<16;++w)for(var P=w*16,q=0;q<16;++q)g[P+q]=_[w]+_[q];return g}()})(ji);var Vh={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,i=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",u=1e14,l=14,c=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,v=1e9;function d(O){var A,D,F,U=N.prototype={constructor:N,toString:null,valueOf:null},W=new N(1),H=20,R=4,I=-7,G=21,V=-1e7,$=1e7,X=!1,ae=1,ce=0,re={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Z="0123456789abcdefghijklmnopqrstuvwxyz",le=!0;function N(k,M){var K,te,Q,ee,_,g,w,P,q=this;if(!(q instanceof N))return new N(k,M);if(M==null){if(k&&k._isBigNumber===!0){q.s=k.s,!k.c||k.e>$?q.c=q.e=null:k.e<V?q.c=[q.e=0]:(q.e=k.e,q.c=k.c.slice());return}if((g=typeof k=="number")&&k*0==0){if(q.s=1/k<0?(k=-k,-1):1,k===~~k){for(ee=0,_=k;_>=10;_/=10,ee++);ee>$?q.c=q.e=null:(q.e=ee,q.c=[k]);return}P=String(k)}else{if(!n.test(P=String(k)))return F(q,P,g);q.s=P.charCodeAt(0)==45?(P=P.slice(1),-1):1}(ee=P.indexOf("."))>-1&&(P=P.replace(".","")),(_=P.search(/e/i))>0?(ee<0&&(ee=_),ee+=+P.slice(_+1),P=P.substring(0,_)):ee<0&&(ee=P.length)}else{if(E(M,2,Z.length,"Base"),M==10&&le)return q=new N(k),ie(q,H+q.e+1,R);if(P=String(k),g=typeof k=="number"){if(k*0!=0)return F(q,P,g,M);if(q.s=1/k<0?(P=P.slice(1),-1):1,N.DEBUG&&P.replace(/^0\.0*|\./,"").length>15)throw Error(o+k)}else q.s=P.charCodeAt(0)===45?(P=P.slice(1),-1):1;for(K=Z.slice(0,M),ee=_=0,w=P.length;_<w;_++)if(K.indexOf(te=P.charAt(_))<0){if(te=="."){if(_>ee){ee=w;continue}}else if(!Q&&(P==P.toUpperCase()&&(P=P.toLowerCase())||P==P.toLowerCase()&&(P=P.toUpperCase()))){Q=!0,_=-1,ee=0;continue}return F(q,String(k),g,M)}g=!1,P=D(P,M,10,q.s),(ee=P.indexOf("."))>-1?P=P.replace(".",""):ee=P.length}for(_=0;P.charCodeAt(_)===48;_++);for(w=P.length;P.charCodeAt(--w)===48;);if(P=P.slice(_,++w)){if(w-=_,g&&N.DEBUG&&w>15&&(k>c||k!==i(k)))throw Error(o+q.s*k);if((ee=ee-_-1)>$)q.c=q.e=null;else if(ee<V)q.c=[q.e=0];else{if(q.e=ee,q.c=[],_=(ee+1)%l,ee<0&&(_+=l),_<w){for(_&&q.c.push(+P.slice(0,_)),w-=l;_<w;)q.c.push(+P.slice(_,_+=l));_=l-(P=P.slice(_)).length}else _-=w;for(;_--;P+="0");q.c.push(+P)}}else q.c=[q.e=0]}N.clone=d,N.ROUND_UP=0,N.ROUND_DOWN=1,N.ROUND_CEIL=2,N.ROUND_FLOOR=3,N.ROUND_HALF_UP=4,N.ROUND_HALF_DOWN=5,N.ROUND_HALF_EVEN=6,N.ROUND_HALF_CEIL=7,N.ROUND_HALF_FLOOR=8,N.EUCLID=9,N.config=N.set=function(k){var M,K;if(k!=null)if(typeof k=="object"){if(k.hasOwnProperty(M="DECIMAL_PLACES")&&(K=k[M],E(K,0,v,M),H=K),k.hasOwnProperty(M="ROUNDING_MODE")&&(K=k[M],E(K,0,8,M),R=K),k.hasOwnProperty(M="EXPONENTIAL_AT")&&(K=k[M],K&&K.pop?(E(K[0],-v,0,M),E(K[1],0,v,M),I=K[0],G=K[1]):(E(K,-v,v,M),I=-(G=K<0?-K:K))),k.hasOwnProperty(M="RANGE"))if(K=k[M],K&&K.pop)E(K[0],-v,-1,M),E(K[1],1,v,M),V=K[0],$=K[1];else if(E(K,-v,v,M),K)V=-($=K<0?-K:K);else throw Error(s+M+" cannot be zero: "+K);if(k.hasOwnProperty(M="CRYPTO"))if(K=k[M],K===!!K)if(K)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))X=K;else throw X=!K,Error(s+"crypto unavailable");else X=K;else throw Error(s+M+" not true or false: "+K);if(k.hasOwnProperty(M="MODULO_MODE")&&(K=k[M],E(K,0,9,M),ae=K),k.hasOwnProperty(M="POW_PRECISION")&&(K=k[M],E(K,0,v,M),ce=K),k.hasOwnProperty(M="FORMAT"))if(K=k[M],typeof K=="object")re=K;else throw Error(s+M+" not an object: "+K);if(k.hasOwnProperty(M="ALPHABET"))if(K=k[M],typeof K=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(K))le=K.slice(0,10)=="0123456789",Z=K;else throw Error(s+M+" invalid: "+K)}else throw Error(s+"Object expected: "+k);return{DECIMAL_PLACES:H,ROUNDING_MODE:R,EXPONENTIAL_AT:[I,G],RANGE:[V,$],CRYPTO:X,MODULO_MODE:ae,POW_PRECISION:ce,FORMAT:re,ALPHABET:Z}},N.isBigNumber=function(k){if(!k||k._isBigNumber!==!0)return!1;if(!N.DEBUG)return!0;var M,K,te=k.c,Q=k.e,ee=k.s;e:if({}.toString.call(te)=="[object Array]"){if((ee===1||ee===-1)&&Q>=-v&&Q<=v&&Q===i(Q)){if(te[0]===0){if(Q===0&&te.length===1)return!0;break e}if(M=(Q+1)%l,M<1&&(M+=l),String(te[0]).length==M){for(M=0;M<te.length;M++)if(K=te[M],K<0||K>=u||K!==i(K))break e;if(K!==0)return!0}}}else if(te===null&&Q===null&&(ee===null||ee===1||ee===-1))return!0;throw Error(s+"Invalid BigNumber: "+k)},N.maximum=N.max=function(){return he(arguments,-1)},N.minimum=N.min=function(){return he(arguments,1)},N.random=function(){var k=9007199254740992,M=Math.random()*k&2097151?function(){return i(Math.random()*k)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(K){var te,Q,ee,_,g,w=0,P=[],q=new N(W);if(K==null?K=H:E(K,0,v),_=a(K/l),X)if(crypto.getRandomValues){for(te=crypto.getRandomValues(new Uint32Array(_*=2));w<_;)g=te[w]*131072+(te[w+1]>>>11),g>=9e15?(Q=crypto.getRandomValues(new Uint32Array(2)),te[w]=Q[0],te[w+1]=Q[1]):(P.push(g%1e14),w+=2);w=_/2}else if(crypto.randomBytes){for(te=crypto.randomBytes(_*=7);w<_;)g=(te[w]&31)*281474976710656+te[w+1]*1099511627776+te[w+2]*4294967296+te[w+3]*16777216+(te[w+4]<<16)+(te[w+5]<<8)+te[w+6],g>=9e15?crypto.randomBytes(7).copy(te,w):(P.push(g%1e14),w+=7);w=_/7}else throw X=!1,Error(s+"crypto unavailable");if(!X)for(;w<_;)g=M(),g<9e15&&(P[w++]=g%1e14);for(_=P[--w],K%=l,_&&K&&(g=f[l-K],P[w]=i(_/g)*g);P[w]===0;P.pop(),w--);if(w<0)P=[ee=0];else{for(ee=-1;P[0]===0;P.splice(0,1),ee-=l);for(w=1,g=P[0];g>=10;g/=10,w++);w<l&&(ee-=l-w)}return q.e=ee,q.c=P,q}}(),N.sum=function(){for(var k=1,M=arguments,K=new N(M[0]);k<M.length;)K=K.plus(M[k++]);return K},D=function(){var k="0123456789";function M(K,te,Q,ee){for(var _,g=[0],w,P=0,q=K.length;P<q;){for(w=g.length;w--;g[w]*=te);for(g[0]+=ee.indexOf(K.charAt(P++)),_=0;_<g.length;_++)g[_]>Q-1&&(g[_+1]==null&&(g[_+1]=0),g[_+1]+=g[_]/Q|0,g[_]%=Q)}return g.reverse()}return function(K,te,Q,ee,_){var g,w,P,q,j,oe,ge,ve,L=K.indexOf("."),de=H,T=R;for(L>=0&&(q=ce,ce=0,K=K.replace(".",""),ve=new N(te),oe=ve.pow(K.length-L),ce=q,ve.c=M(C(y(oe.c),oe.e,"0"),10,Q,k),ve.e=ve.c.length),ge=M(K,te,Q,_?(g=Z,k):(g=k,Z)),P=q=ge.length;ge[--q]==0;ge.pop());if(!ge[0])return g.charAt(0);if(L<0?--P:(oe.c=ge,oe.e=P,oe.s=ee,oe=A(oe,ve,de,T,Q),ge=oe.c,j=oe.r,P=oe.e),w=P+de+1,L=ge[w],q=Q/2,j=j||w<0||ge[w+1]!=null,j=T<4?(L!=null||j)&&(T==0||T==(oe.s<0?3:2)):L>q||L==q&&(T==4||j||T==6&&ge[w-1]&1||T==(oe.s<0?8:7)),w<1||!ge[0])K=j?C(g.charAt(1),-de,g.charAt(0)):g.charAt(0);else{if(ge.length=w,j)for(--Q;++ge[--w]>Q;)ge[w]=0,w||(++P,ge=[1].concat(ge));for(q=ge.length;!ge[--q];);for(L=0,K="";L<=q;K+=g.charAt(ge[L++]));K=C(K,P,g.charAt(0))}return K}}(),A=function(){function k(te,Q,ee){var _,g,w,P,q=0,j=te.length,oe=Q%h,ge=Q/h|0;for(te=te.slice();j--;)w=te[j]%h,P=te[j]/h|0,_=ge*w+P*oe,g=oe*w+_%h*h+q,q=(g/ee|0)+(_/h|0)+ge*P,te[j]=g%ee;return q&&(te=[q].concat(te)),te}function M(te,Q,ee,_){var g,w;if(ee!=_)w=ee>_?1:-1;else for(g=w=0;g<ee;g++)if(te[g]!=Q[g]){w=te[g]>Q[g]?1:-1;break}return w}function K(te,Q,ee,_){for(var g=0;ee--;)te[ee]-=g,g=te[ee]<Q[ee]?1:0,te[ee]=g*_+te[ee]-Q[ee];for(;!te[0]&&te.length>1;te.splice(0,1));}return function(te,Q,ee,_,g){var w,P,q,j,oe,ge,ve,L,de,T,p,x,z,Y,ne,ue,me,be=te.s==Q.s?1:-1,we=te.c,ye=Q.c;if(!we||!we[0]||!ye||!ye[0])return new N(!te.s||!Q.s||(we?ye&&we[0]==ye[0]:!ye)?NaN:we&&we[0]==0||!ye?be*0:be/0);for(L=new N(be),de=L.c=[],P=te.e-Q.e,be=ee+P+1,g||(g=u,P=b(te.e/l)-b(Q.e/l),be=be/l|0),q=0;ye[q]==(we[q]||0);q++);if(ye[q]>(we[q]||0)&&P--,be<0)de.push(1),j=!0;else{for(Y=we.length,ue=ye.length,q=0,be+=2,oe=i(g/(ye[0]+1)),oe>1&&(ye=k(ye,oe,g),we=k(we,oe,g),ue=ye.length,Y=we.length),z=ue,T=we.slice(0,ue),p=T.length;p<ue;T[p++]=0);me=ye.slice(),me=[0].concat(me),ne=ye[0],ye[1]>=g/2&&ne++;do{if(oe=0,w=M(ye,T,ue,p),w<0){if(x=T[0],ue!=p&&(x=x*g+(T[1]||0)),oe=i(x/ne),oe>1)for(oe>=g&&(oe=g-1),ge=k(ye,oe,g),ve=ge.length,p=T.length;M(ge,T,ve,p)==1;)oe--,K(ge,ue<ve?me:ye,ve,g),ve=ge.length,w=1;else oe==0&&(w=oe=1),ge=ye.slice(),ve=ge.length;if(ve<p&&(ge=[0].concat(ge)),K(T,ge,p,g),p=T.length,w==-1)for(;M(ye,T,ue,p)<1;)oe++,K(T,ue<p?me:ye,p,g),p=T.length}else w===0&&(oe++,T=[0]);de[q++]=oe,T[0]?T[p++]=we[z]||0:(T=[we[z]],p=1)}while((z++<Y||T[0]!=null)&&be--);j=T[0]!=null,de[0]||de.splice(0,1)}if(g==u){for(q=1,be=de[0];be>=10;be/=10,q++);ie(L,ee+(L.e=q+P*l-1)+1,_,j)}else L.e=P,L.r=+j;return L}}();function fe(k,M,K,te){var Q,ee,_,g,w;if(K==null?K=R:E(K,0,8),!k.c)return k.toString();if(Q=k.c[0],_=k.e,M==null)w=y(k.c),w=te==1||te==2&&(_<=I||_>=G)?B(w,_):C(w,_,"0");else if(k=ie(new N(k),M,K),ee=k.e,w=y(k.c),g=w.length,te==1||te==2&&(M<=ee||ee<=I)){for(;g<M;w+="0",g++);w=B(w,ee)}else if(M-=_,w=C(w,ee,"0"),ee+1>g){if(--M>0)for(w+=".";M--;w+="0");}else if(M+=ee-g,M>0)for(ee+1==g&&(w+=".");M--;w+="0");return k.s<0&&Q?"-"+w:w}function he(k,M){for(var K,te,Q=1,ee=new N(k[0]);Q<k.length;Q++)te=new N(k[Q]),(!te.s||(K=m(ee,te))===M||K===0&&ee.s===M)&&(ee=te);return ee}function pe(k,M,K){for(var te=1,Q=M.length;!M[--Q];M.pop());for(Q=M[0];Q>=10;Q/=10,te++);return(K=te+K*l-1)>$?k.c=k.e=null:K<V?k.c=[k.e=0]:(k.e=K,k.c=M),k}F=function(){var k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,M=/^([^.]+)\.$/,K=/^\.([^.]+)$/,te=/^-?(Infinity|NaN)$/,Q=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(ee,_,g,w){var P,q=g?_:_.replace(Q,"");if(te.test(q))ee.s=isNaN(q)?null:q<0?-1:1;else{if(!g&&(q=q.replace(k,function(j,oe,ge){return P=(ge=ge.toLowerCase())=="x"?16:ge=="b"?2:8,!w||w==P?oe:j}),w&&(P=w,q=q.replace(M,"$1").replace(K,"0.$1")),_!=q))return new N(q,P);if(N.DEBUG)throw Error(s+"Not a"+(w?" base "+w:"")+" number: "+_);ee.s=null}ee.c=ee.e=null}}();function ie(k,M,K,te){var Q,ee,_,g,w,P,q,j=k.c,oe=f;if(j){e:{for(Q=1,g=j[0];g>=10;g/=10,Q++);if(ee=M-Q,ee<0)ee+=l,_=M,w=j[P=0],q=i(w/oe[Q-_-1]%10);else if(P=a((ee+1)/l),P>=j.length)if(te){for(;j.length<=P;j.push(0));w=q=0,Q=1,ee%=l,_=ee-l+1}else break e;else{for(w=g=j[P],Q=1;g>=10;g/=10,Q++);ee%=l,_=ee-l+Q,q=_<0?0:i(w/oe[Q-_-1]%10)}if(te=te||M<0||j[P+1]!=null||(_<0?w:w%oe[Q-_-1]),te=K<4?(q||te)&&(K==0||K==(k.s<0?3:2)):q>5||q==5&&(K==4||te||K==6&&(ee>0?_>0?w/oe[Q-_]:0:j[P-1])%10&1||K==(k.s<0?8:7)),M<1||!j[0])return j.length=0,te?(M-=k.e+1,j[0]=oe[(l-M%l)%l],k.e=-M||0):j[0]=k.e=0,k;if(ee==0?(j.length=P,g=1,P--):(j.length=P+1,g=oe[l-ee],j[P]=_>0?i(w/oe[Q-_]%oe[_])*g:0),te)for(;;)if(P==0){for(ee=1,_=j[0];_>=10;_/=10,ee++);for(_=j[0]+=g,g=1;_>=10;_/=10,g++);ee!=g&&(k.e++,j[0]==u&&(j[0]=1));break}else{if(j[P]+=g,j[P]!=u)break;j[P--]=0,g=1}for(ee=j.length;j[--ee]===0;j.pop());}k.e>$?k.c=k.e=null:k.e<V&&(k.c=[k.e=0])}return k}function J(k){var M,K=k.e;return K===null?k.toString():(M=y(k.c),M=K<=I||K>=G?B(M,K):C(M,K,"0"),k.s<0?"-"+M:M)}return U.absoluteValue=U.abs=function(){var k=new N(this);return k.s<0&&(k.s=1),k},U.comparedTo=function(k,M){return m(this,new N(k,M))},U.decimalPlaces=U.dp=function(k,M){var K,te,Q,ee=this;if(k!=null)return E(k,0,v),M==null?M=R:E(M,0,8),ie(new N(ee),k+ee.e+1,M);if(!(K=ee.c))return null;if(te=((Q=K.length-1)-b(this.e/l))*l,Q=K[Q])for(;Q%10==0;Q/=10,te--);return te<0&&(te=0),te},U.dividedBy=U.div=function(k,M){return A(this,new N(k,M),H,R)},U.dividedToIntegerBy=U.idiv=function(k,M){return A(this,new N(k,M),0,1)},U.exponentiatedBy=U.pow=function(k,M){var K,te,Q,ee,_,g,w,P,q,j=this;if(k=new N(k),k.c&&!k.isInteger())throw Error(s+"Exponent not an integer: "+J(k));if(M!=null&&(M=new N(M)),g=k.e>14,!j.c||!j.c[0]||j.c[0]==1&&!j.e&&j.c.length==1||!k.c||!k.c[0])return q=new N(Math.pow(+J(j),g?k.s*(2-S(k)):+J(k))),M?q.mod(M):q;if(w=k.s<0,M){if(M.c?!M.c[0]:!M.s)return new N(NaN);te=!w&&j.isInteger()&&M.isInteger(),te&&(j=j.mod(M))}else{if(k.e>9&&(j.e>0||j.e<-1||(j.e==0?j.c[0]>1||g&&j.c[1]>=24e7:j.c[0]<8e13||g&&j.c[0]<=9999975e7)))return ee=j.s<0&&S(k)?-0:0,j.e>-1&&(ee=1/ee),new N(w?1/ee:ee);ce&&(ee=a(ce/l+2))}for(g?(K=new N(.5),w&&(k.s=1),P=S(k)):(Q=Math.abs(+J(k)),P=Q%2),q=new N(W);;){if(P){if(q=q.times(j),!q.c)break;ee?q.c.length>ee&&(q.c.length=ee):te&&(q=q.mod(M))}if(Q){if(Q=i(Q/2),Q===0)break;P=Q%2}else if(k=k.times(K),ie(k,k.e+1,1),k.e>14)P=S(k);else{if(Q=+J(k),Q===0)break;P=Q%2}j=j.times(j),ee?j.c&&j.c.length>ee&&(j.c.length=ee):te&&(j=j.mod(M))}return te?q:(w&&(q=W.div(q)),M?q.mod(M):ee?ie(q,ce,R,_):q)},U.integerValue=function(k){var M=new N(this);return k==null?k=R:E(k,0,8),ie(M,M.e+1,k)},U.isEqualTo=U.eq=function(k,M){return m(this,new N(k,M))===0},U.isFinite=function(){return!!this.c},U.isGreaterThan=U.gt=function(k,M){return m(this,new N(k,M))>0},U.isGreaterThanOrEqualTo=U.gte=function(k,M){return(M=m(this,new N(k,M)))===1||M===0},U.isInteger=function(){return!!this.c&&b(this.e/l)>this.c.length-2},U.isLessThan=U.lt=function(k,M){return m(this,new N(k,M))<0},U.isLessThanOrEqualTo=U.lte=function(k,M){return(M=m(this,new N(k,M)))===-1||M===0},U.isNaN=function(){return!this.s},U.isNegative=function(){return this.s<0},U.isPositive=function(){return this.s>0},U.isZero=function(){return!!this.c&&this.c[0]==0},U.minus=function(k,M){var K,te,Q,ee,_=this,g=_.s;if(k=new N(k,M),M=k.s,!g||!M)return new N(NaN);if(g!=M)return k.s=-M,_.plus(k);var w=_.e/l,P=k.e/l,q=_.c,j=k.c;if(!w||!P){if(!q||!j)return q?(k.s=-M,k):new N(j?_:NaN);if(!q[0]||!j[0])return j[0]?(k.s=-M,k):new N(q[0]?_:R==3?-0:0)}if(w=b(w),P=b(P),q=q.slice(),g=w-P){for((ee=g<0)?(g=-g,Q=q):(P=w,Q=j),Q.reverse(),M=g;M--;Q.push(0));Q.reverse()}else for(te=(ee=(g=q.length)<(M=j.length))?g:M,g=M=0;M<te;M++)if(q[M]!=j[M]){ee=q[M]<j[M];break}if(ee&&(Q=q,q=j,j=Q,k.s=-k.s),M=(te=j.length)-(K=q.length),M>0)for(;M--;q[K++]=0);for(M=u-1;te>g;){if(q[--te]<j[te]){for(K=te;K&&!q[--K];q[K]=M);--q[K],q[te]+=u}q[te]-=j[te]}for(;q[0]==0;q.splice(0,1),--P);return q[0]?pe(k,q,P):(k.s=R==3?-1:1,k.c=[k.e=0],k)},U.modulo=U.mod=function(k,M){var K,te,Q=this;return k=new N(k,M),!Q.c||!k.s||k.c&&!k.c[0]?new N(NaN):!k.c||Q.c&&!Q.c[0]?new N(Q):(ae==9?(te=k.s,k.s=1,K=A(Q,k,0,3),k.s=te,K.s*=te):K=A(Q,k,0,ae),k=Q.minus(K.times(k)),!k.c[0]&&ae==1&&(k.s=Q.s),k)},U.multipliedBy=U.times=function(k,M){var K,te,Q,ee,_,g,w,P,q,j,oe,ge,ve,L,de,T=this,p=T.c,x=(k=new N(k,M)).c;if(!p||!x||!p[0]||!x[0])return!T.s||!k.s||p&&!p[0]&&!x||x&&!x[0]&&!p?k.c=k.e=k.s=null:(k.s*=T.s,!p||!x?k.c=k.e=null:(k.c=[0],k.e=0)),k;for(te=b(T.e/l)+b(k.e/l),k.s*=T.s,w=p.length,j=x.length,w<j&&(ve=p,p=x,x=ve,Q=w,w=j,j=Q),Q=w+j,ve=[];Q--;ve.push(0));for(L=u,de=h,Q=j;--Q>=0;){for(K=0,oe=x[Q]%de,ge=x[Q]/de|0,_=w,ee=Q+_;ee>Q;)P=p[--_]%de,q=p[_]/de|0,g=ge*P+q*oe,P=oe*P+g%de*de+ve[ee]+K,K=(P/L|0)+(g/de|0)+ge*q,ve[ee--]=P%L;ve[ee]=K}return K?++te:ve.splice(0,1),pe(k,ve,te)},U.negated=function(){var k=new N(this);return k.s=-k.s||null,k},U.plus=function(k,M){var K,te=this,Q=te.s;if(k=new N(k,M),M=k.s,!Q||!M)return new N(NaN);if(Q!=M)return k.s=-M,te.minus(k);var ee=te.e/l,_=k.e/l,g=te.c,w=k.c;if(!ee||!_){if(!g||!w)return new N(Q/0);if(!g[0]||!w[0])return w[0]?k:new N(g[0]?te:Q*0)}if(ee=b(ee),_=b(_),g=g.slice(),Q=ee-_){for(Q>0?(_=ee,K=w):(Q=-Q,K=g),K.reverse();Q--;K.push(0));K.reverse()}for(Q=g.length,M=w.length,Q-M<0&&(K=w,w=g,g=K,M=Q),Q=0;M;)Q=(g[--M]=g[M]+w[M]+Q)/u|0,g[M]=u===g[M]?0:g[M]%u;return Q&&(g=[Q].concat(g),++_),pe(k,g,_)},U.precision=U.sd=function(k,M){var K,te,Q,ee=this;if(k!=null&&k!==!!k)return E(k,1,v),M==null?M=R:E(M,0,8),ie(new N(ee),k,M);if(!(K=ee.c))return null;if(Q=K.length-1,te=Q*l+1,Q=K[Q]){for(;Q%10==0;Q/=10,te--);for(Q=K[0];Q>=10;Q/=10,te++);}return k&&ee.e+1>te&&(te=ee.e+1),te},U.shiftedBy=function(k){return E(k,-c,c),this.times("1e"+k)},U.squareRoot=U.sqrt=function(){var k,M,K,te,Q,ee=this,_=ee.c,g=ee.s,w=ee.e,P=H+4,q=new N("0.5");if(g!==1||!_||!_[0])return new N(!g||g<0&&(!_||_[0])?NaN:_?ee:1/0);if(g=Math.sqrt(+J(ee)),g==0||g==1/0?(M=y(_),(M.length+w)%2==0&&(M+="0"),g=Math.sqrt(+M),w=b((w+1)/2)-(w<0||w%2),g==1/0?M="5e"+w:(M=g.toExponential(),M=M.slice(0,M.indexOf("e")+1)+w),K=new N(M)):K=new N(g+""),K.c[0]){for(w=K.e,g=w+P,g<3&&(g=0);;)if(Q=K,K=q.times(Q.plus(A(ee,Q,P,1))),y(Q.c).slice(0,g)===(M=y(K.c)).slice(0,g))if(K.e<w&&--g,M=M.slice(g-3,g+1),M=="9999"||!te&&M=="4999"){if(!te&&(ie(Q,Q.e+H+2,0),Q.times(Q).eq(ee))){K=Q;break}P+=4,g+=4,te=1}else{(!+M||!+M.slice(1)&&M.charAt(0)=="5")&&(ie(K,K.e+H+2,1),k=!K.times(K).eq(ee));break}}return ie(K,K.e+H+1,R,k)},U.toExponential=function(k,M){return k!=null&&(E(k,0,v),k++),fe(this,k,M,1)},U.toFixed=function(k,M){return k!=null&&(E(k,0,v),k=k+this.e+1),fe(this,k,M)},U.toFormat=function(k,M,K){var te,Q=this;if(K==null)k!=null&&M&&typeof M=="object"?(K=M,M=null):k&&typeof k=="object"?(K=k,k=M=null):K=re;else if(typeof K!="object")throw Error(s+"Argument not an object: "+K);if(te=Q.toFixed(k,M),Q.c){var ee,_=te.split("."),g=+K.groupSize,w=+K.secondaryGroupSize,P=K.groupSeparator||"",q=_[0],j=_[1],oe=Q.s<0,ge=oe?q.slice(1):q,ve=ge.length;if(w&&(ee=g,g=w,w=ee,ve-=ee),g>0&&ve>0){for(ee=ve%g||g,q=ge.substr(0,ee);ee<ve;ee+=g)q+=P+ge.substr(ee,g);w>0&&(q+=P+ge.slice(ee)),oe&&(q="-"+q)}te=j?q+(K.decimalSeparator||"")+((w=+K.fractionGroupSize)?j.replace(new RegExp("\\d{"+w+"}\\B","g"),"$&"+(K.fractionGroupSeparator||"")):j):q}return(K.prefix||"")+te+(K.suffix||"")},U.toFraction=function(k){var M,K,te,Q,ee,_,g,w,P,q,j,oe,ge=this,ve=ge.c;if(k!=null&&(g=new N(k),!g.isInteger()&&(g.c||g.s!==1)||g.lt(W)))throw Error(s+"Argument "+(g.isInteger()?"out of range: ":"not an integer: ")+J(g));if(!ve)return new N(ge);for(M=new N(W),P=K=new N(W),te=w=new N(W),oe=y(ve),ee=M.e=oe.length-ge.e-1,M.c[0]=f[(_=ee%l)<0?l+_:_],k=!k||g.comparedTo(M)>0?ee>0?M:P:g,_=$,$=1/0,g=new N(oe),w.c[0]=0;q=A(g,M,0,1),Q=K.plus(q.times(te)),Q.comparedTo(k)!=1;)K=te,te=Q,P=w.plus(q.times(Q=P)),w=Q,M=g.minus(q.times(Q=M)),g=Q;return Q=A(k.minus(K),te,0,1),w=w.plus(Q.times(P)),K=K.plus(Q.times(te)),w.s=P.s=ge.s,ee=ee*2,j=A(P,te,ee,R).minus(ge).abs().comparedTo(A(w,K,ee,R).minus(ge).abs())<1?[P,te]:[w,K],$=_,j},U.toNumber=function(){return+J(this)},U.toPrecision=function(k,M){return k!=null&&E(k,1,v),fe(this,k,M,2)},U.toString=function(k){var M,K=this,te=K.s,Q=K.e;return Q===null?te?(M="Infinity",te<0&&(M="-"+M)):M="NaN":(k==null?M=Q<=I||Q>=G?B(y(K.c),Q):C(y(K.c),Q,"0"):k===10&&le?(K=ie(new N(K),H+Q+1,R),M=C(y(K.c),K.e,"0")):(E(k,2,Z.length,"Base"),M=D(C(y(K.c),Q,"0"),10,k,te,!0)),te<0&&K.c[0]&&(M="-"+M)),M},U.valueOf=U.toJSON=function(){return J(this)},U._isBigNumber=!0,O!=null&&N.set(O),N}function b(O){var A=O|0;return O>0||O===A?A:A-1}function y(O){for(var A,D,F=1,U=O.length,W=O[0]+"";F<U;){for(A=O[F++]+"",D=l-A.length;D--;A="0"+A);W+=A}for(U=W.length;W.charCodeAt(--U)===48;);return W.slice(0,U+1||1)}function m(O,A){var D,F,U=O.c,W=A.c,H=O.s,R=A.s,I=O.e,G=A.e;if(!H||!R)return null;if(D=U&&!U[0],F=W&&!W[0],D||F)return D?F?0:-R:H;if(H!=R)return H;if(D=H<0,F=I==G,!U||!W)return F?0:!U^D?1:-1;if(!F)return I>G^D?1:-1;for(R=(I=U.length)<(G=W.length)?I:G,H=0;H<R;H++)if(U[H]!=W[H])return U[H]>W[H]^D?1:-1;return I==G?0:I>G^D?1:-1}function E(O,A,D,F){if(O<A||O>D||O!==i(O))throw Error(s+(F||"Argument")+(typeof O=="number"?O<A||O>D?" out of range: ":" not an integer: ":" not a primitive number: ")+String(O))}function S(O){var A=O.c.length-1;return b(O.e/l)==A&&O.c[A]%2!=0}function B(O,A){return(O.length>1?O.charAt(0)+"."+O.slice(1):O)+(A<0?"e":"e+")+A}function C(O,A,D){var F,U;if(A<0){for(U=D+".";++A;U+=D);O=U+O}else if(F=O.length,++A>F){for(U=D,A-=F;--A;U+=D);O+=U}else A<F&&(O=O.slice(0,A)+"."+O.slice(A));return O}r=d(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(za)})(Vh);var Ho=Vh.exports,Og=function(e,r,n){var a=new e.Uint8Array(n),i=r.pushInt,s=r.pushInt32,o=r.pushInt32Neg,u=r.pushInt64,l=r.pushInt64Neg,c=r.pushFloat,f=r.pushFloatSingle,h=r.pushFloatDouble,v=r.pushTrue,d=r.pushFalse,b=r.pushUndefined,y=r.pushNull,m=r.pushInfinity,E=r.pushInfinityNeg,S=r.pushNaN,B=r.pushNaNNeg,C=r.pushArrayStart,O=r.pushArrayStartFixed,A=r.pushArrayStartFixed32,D=r.pushArrayStartFixed64,F=r.pushObjectStart,U=r.pushObjectStartFixed,W=r.pushObjectStartFixed32,H=r.pushObjectStartFixed64,R=r.pushByteString,I=r.pushByteStringStart,G=r.pushUtf8String,V=r.pushUtf8StringStart,$=r.pushSimpleUnassigned,X=r.pushTagStart,ae=r.pushTagStart4,ce=r.pushTagStart8,re=r.pushTagUnassigned,Z=r.pushBreak,le=e.Math.pow,N=0,fe=0,he=0;function pe(se){for(se=se|0,N=0,fe=se;(N|0)<(fe|0)&&(he=ds[a[N]&255](a[N]|0)|0,!((he|0)>0)););return he|0}function ie(se){return se=se|0,((N|0)+(se|0)|0)<(fe|0)?0:1}function J(se){return se=se|0,a[se|0]<<8|a[se+1|0]|0}function k(se){return se=se|0,a[se|0]<<24|a[se+1|0]<<16|a[se+2|0]<<8|a[se+3|0]|0}function M(se){return se=se|0,i(se|0),N=N+1|0,0}function K(se){return se=se|0,ie(1)|0?1:(i(a[N+1|0]|0),N=N+2|0,0)}function te(se){return se=se|0,ie(2)|0?1:(i(J(N+1|0)|0),N=N+3|0,0)}function Q(se){return se=se|0,ie(4)|0?1:(s(J(N+1|0)|0,J(N+3|0)|0),N=N+5|0,0)}function ee(se){return se=se|0,ie(8)|0?1:(u(J(N+1|0)|0,J(N+3|0)|0,J(N+5|0)|0,J(N+7|0)|0),N=N+9|0,0)}function _(se){return se=se|0,i(-1-(se-32|0)|0),N=N+1|0,0}function g(se){return se=se|0,ie(1)|0?1:(i(-1-(a[N+1|0]|0)|0),N=N+2|0,0)}function w(se){se=se|0;var Pe=0;return ie(2)|0?1:(Pe=J(N+1|0)|0,i(-1-(Pe|0)|0),N=N+3|0,0)}function P(se){return se=se|0,ie(4)|0?1:(o(J(N+1|0)|0,J(N+3|0)|0),N=N+5|0,0)}function q(se){return se=se|0,ie(8)|0?1:(l(J(N+1|0)|0,J(N+3|0)|0,J(N+5|0)|0,J(N+7|0)|0),N=N+9|0,0)}function j(se){se=se|0;var Pe=0,Ie=0,Ne=0;return Ne=se-64|0,ie(Ne|0)|0?1:(Pe=N+1|0,Ie=(N+1|0)+(Ne|0)|0,R(Pe|0,Ie|0),N=Ie|0,0)}function oe(se){se=se|0;var Pe=0,Ie=0,Ne=0;return ie(1)|0||(Ne=a[N+1|0]|0,Pe=N+2|0,Ie=(N+2|0)+(Ne|0)|0,ie(Ne+1|0)|0)?1:(R(Pe|0,Ie|0),N=Ie|0,0)}function ge(se){se=se|0;var Pe=0,Ie=0,Ne=0;return ie(2)|0||(Ne=J(N+1|0)|0,Pe=N+3|0,Ie=(N+3|0)+(Ne|0)|0,ie(Ne+2|0)|0)?1:(R(Pe|0,Ie|0),N=Ie|0,0)}function ve(se){se=se|0;var Pe=0,Ie=0,Ne=0;return ie(4)|0||(Ne=k(N+1|0)|0,Pe=N+5|0,Ie=(N+5|0)+(Ne|0)|0,ie(Ne+4|0)|0)?1:(R(Pe|0,Ie|0),N=Ie|0,0)}function L(se){return se=se|0,1}function de(se){return se=se|0,I(),N=N+1|0,0}function T(se){se=se|0;var Pe=0,Ie=0,Ne=0;return Ne=se-96|0,ie(Ne|0)|0?1:(Pe=N+1|0,Ie=(N+1|0)+(Ne|0)|0,G(Pe|0,Ie|0),N=Ie|0,0)}function p(se){se=se|0;var Pe=0,Ie=0,Ne=0;return ie(1)|0||(Ne=a[N+1|0]|0,Pe=N+2|0,Ie=(N+2|0)+(Ne|0)|0,ie(Ne+1|0)|0)?1:(G(Pe|0,Ie|0),N=Ie|0,0)}function x(se){se=se|0;var Pe=0,Ie=0,Ne=0;return ie(2)|0||(Ne=J(N+1|0)|0,Pe=N+3|0,Ie=(N+3|0)+(Ne|0)|0,ie(Ne+2|0)|0)?1:(G(Pe|0,Ie|0),N=Ie|0,0)}function z(se){se=se|0;var Pe=0,Ie=0,Ne=0;return ie(4)|0||(Ne=k(N+1|0)|0,Pe=N+5|0,Ie=(N+5|0)+(Ne|0)|0,ie(Ne+4|0)|0)?1:(G(Pe|0,Ie|0),N=Ie|0,0)}function Y(se){return se=se|0,1}function ne(se){return se=se|0,V(),N=N+1|0,0}function ue(se){return se=se|0,O(se-128|0),N=N+1|0,0}function me(se){return se=se|0,ie(1)|0?1:(O(a[N+1|0]|0),N=N+2|0,0)}function be(se){return se=se|0,ie(2)|0?1:(O(J(N+1|0)|0),N=N+3|0,0)}function we(se){return se=se|0,ie(4)|0?1:(A(J(N+1|0)|0,J(N+3|0)|0),N=N+5|0,0)}function ye(se){return se=se|0,ie(8)|0?1:(D(J(N+1|0)|0,J(N+3|0)|0,J(N+5|0)|0,J(N+7|0)|0),N=N+9|0,0)}function xe(se){return se=se|0,C(),N=N+1|0,0}function Ce(se){se=se|0;var Pe=0;return Pe=se-160|0,ie(Pe|0)|0?1:(U(Pe|0),N=N+1|0,0)}function qe(se){return se=se|0,ie(1)|0?1:(U(a[N+1|0]|0),N=N+2|0,0)}function Ct(se){return se=se|0,ie(2)|0?1:(U(J(N+1|0)|0),N=N+3|0,0)}function vt(se){return se=se|0,ie(4)|0?1:(W(J(N+1|0)|0,J(N+3|0)|0),N=N+5|0,0)}function ut(se){return se=se|0,ie(8)|0?1:(H(J(N+1|0)|0,J(N+3|0)|0,J(N+5|0)|0,J(N+7|0)|0),N=N+9|0,0)}function Mt(se){return se=se|0,F(),N=N+1|0,0}function et(se){return se=se|0,X(se-192|0|0),N=N+1|0,0}function Ft(se){return se=se|0,X(se|0),N=N+1|0,0}function ir(se){return se=se|0,X(se|0),N=N+1|0,0}function tr(se){return se=se|0,X(se|0),N=N+1|0,0}function Ht(se){return se=se|0,X(se|0),N=N+1|0,0}function Ge(se){return se=se|0,X(se-192|0|0),N=N+1|0,0}function Ir(se){return se=se|0,X(se|0),N=N+1|0,0}function sr(se){return se=se|0,X(se|0),N=N+1|0,0}function ft(se){return se=se|0,X(se|0),N=N+1|0,0}function dt(se){return se=se|0,ie(1)|0?1:(X(a[N+1|0]|0),N=N+2|0,0)}function Et(se){return se=se|0,ie(2)|0?1:(X(J(N+1|0)|0),N=N+3|0,0)}function ln(se){return se=se|0,ie(4)|0?1:(ae(J(N+1|0)|0,J(N+3|0)|0),N=N+5|0,0)}function or(se){return se=se|0,ie(8)|0?1:(ce(J(N+1|0)|0,J(N+3|0)|0,J(N+5|0)|0,J(N+7|0)|0),N=N+9|0,0)}function rt(se){return se=se|0,$((se|0)-224|0),N=N+1|0,0}function gu(se){return se=se|0,d(),N=N+1|0,0}function yu(se){return se=se|0,v(),N=N+1|0,0}function mu(se){return se=se|0,y(),N=N+1|0,0}function bu(se){return se=se|0,b(),N=N+1|0,0}function wu(se){return se=se|0,ie(1)|0?1:($(a[N+1|0]|0),N=N+2|0,0)}function xu(se){se=se|0;var Pe=0,Ie=0,Ne=1,Ln=0,gr=0,ur=0;return ie(2)|0?1:(Pe=a[N+1|0]|0,Ie=a[N+2|0]|0,(Pe|0)&128&&(Ne=-1),Ln=+(((Pe|0)&124)>>2),gr=+(((Pe|0)&3)<<8|Ie),+Ln==0?c(+(+Ne*5960464477539063e-23*+gr)):+Ln==31?+Ne==1?+gr>0?S():m():+gr>0?B():E():c(+(+Ne*le(2,+(+Ln-25))*+(1024+gr))),N=N+3|0,0)}function Eu(se){return se=se|0,ie(4)|0?1:(f(a[N+1|0]|0,a[N+2|0]|0,a[N+3|0]|0,a[N+4|0]|0),N=N+5|0,0)}function Un(se){return se=se|0,ie(8)|0?1:(h(a[N+1|0]|0,a[N+2|0]|0,a[N+3|0]|0,a[N+4|0]|0,a[N+5|0]|0,a[N+6|0]|0,a[N+7|0]|0,a[N+8|0]|0),N=N+9|0,0)}function $e(se){return se=se|0,1}function pa(se){return se=se|0,Z(),N=N+1|0,0}var ds=[M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,K,te,Q,ee,$e,$e,$e,$e,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,g,w,P,q,$e,$e,$e,$e,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,oe,ge,ve,L,$e,$e,$e,de,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,p,x,z,Y,$e,$e,$e,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,me,be,we,ye,$e,$e,$e,xe,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,qe,Ct,vt,ut,$e,$e,$e,Mt,et,et,et,et,et,et,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,dt,Et,ln,or,$e,$e,$e,$e,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,gu,yu,mu,bu,wu,xu,Eu,Un,$e,$e,$e,pa];return{parse:pe}},Wo={},Vt={};const Ql=Ho.BigNumber;Vt.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};Vt.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};Vt.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};Vt.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};Vt.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};Vt.SHIFT32=Math.pow(2,32);Vt.SHIFT16=Math.pow(2,16);Vt.MAX_SAFE_HIGH=2097151;Vt.NEG_ONE=new Ql(-1);Vt.TEN=new Ql(10);Vt.TWO=new Ql(2);Vt.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(t){const{Buffer:e}=ji,r=Ho.BigNumber,n=Vt,a=n.SHIFT32,i=n.SHIFT16,s=2097151;t.parseHalf=function(l){var c,f,h;return h=l[0]&128?-1:1,c=(l[0]&124)>>2,f=(l[0]&3)<<8|l[1],c?c===31?h*(f?0/0:1/0):h*Math.pow(2,c-25)*(1024+f):h*5960464477539063e-23*f};function o(u){return u<16?"0"+u.toString(16):u.toString(16)}t.arrayBufferToBignumber=function(u){const l=u.byteLength;let c="";for(let f=0;f<l;f++)c+=o(u[f]);return new r(c,16)},t.buildMap=u=>{const l=new Map,c=Object.keys(u),f=c.length;for(let h=0;h<f;h++)l.set(c[h],u[c[h]]);return l},t.buildInt32=(u,l)=>u*i+l,t.buildInt64=(u,l,c,f)=>{const h=t.buildInt32(u,l),v=t.buildInt32(c,f);return h>s?new r(h).times(a).plus(v):h*a+v},t.writeHalf=function(l,c){const f=e.allocUnsafe(4);f.writeFloatBE(c,0);const h=f.readUInt32BE(0);if(h&8191)return!1;var v=h>>16&32768;const d=h>>23&255,b=h&8388607;if(d>=113&&d<=142)v+=(d-112<<10)+(b>>13);else if(d>=103&&d<113){if(b&(1<<126-d)-1)return!1;v+=b+8388608>>126-d}else return!1;return l.writeUInt16BE(v,0),!0},t.keySorter=function(u,l){var c=u[0].byteLength,f=l[0].byteLength;return c>f?1:f>c?-1:u[0].compare(l[0])},t.isNegativeZero=u=>u===0&&1/u<0,t.nextPowerOf2=u=>{let l=0;if(u&&!(u&u-1))return u;for(;u!==0;)u>>=1,l+=1;return 1<<l}})(Wo);const jl=Vt,Mg=jl.MT,vs=jl.SIMPLE,Nu=jl.SYMS;let Fg=class il{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,Mg.SIMPLE_FLOAT)}static isSimple(e){return e instanceof il}static decode(e,r){switch(r==null&&(r=!0),e){case vs.FALSE:return!1;case vs.TRUE:return!0;case vs.NULL:return r?null:Nu.NULL;case vs.UNDEFINED:return r?void 0:Nu.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return Nu.BREAK;default:return new il(e)}}};var qh=Fg;let Dg=class sl{constructor(e,r,n){if(this.tag=e,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=sl["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(sl,this.value)}catch(a){return r=a,this.err=r,this}}};var Gh=Dg;const Hh=self.location?self.location.protocol+"//"+self.location.host:"",ol=self.URL;let Ug=class{constructor(e="",r=Hh){this.super=new ol(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Lg(t){if(typeof t=="string")return new ol(t).toString();if(!(t instanceof ol)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",a=t.protocol?t.protocol+"//":"",i=t.host||"",s=t.hostname||"",o=t.search||(t.query?"?"+t.query:""),u=t.hash||"",l=t.pathname||"",c=t.path||l+o;return`${a}${e||r}${i||s+n}${c}${u}`}}var Wh={URLWithLegacySupport:Ug,URLSearchParams:self.URLSearchParams,defaultBase:Hh,format:Lg};const{URLWithLegacySupport:Hc,format:$g}=Wh;var zg=(t,e={},r={},n)=>{let a=e.protocol?e.protocol.replace(":",""):"http";a=(r[a]||n||a)+":";let i;try{i=new Hc(t)}catch{i={}}const s=Object.assign({},e,{protocol:a||i.protocol,host:e.host||i.host});return new Hc(t,$g(s)).toString()};const{URLWithLegacySupport:Vg,format:qg,URLSearchParams:Gg,defaultBase:Hg}=Wh,Wg=zg;var Kh={URL:Vg,URLSearchParams:Gg,format:qg,relative:Wg,defaultBase:Hg};const{Buffer:ma}=ji,Wc=Xi,Kg=Ho.BigNumber,Yg=Og,Wt=Wo,We=Vt,Zg=qh,Xg=Gh,{URL:Qg}=Kh;let ul=class ll{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=Wt.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=ma.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>Wt.arrayBufferToBignumber(r),3:r=>We.NEG_ONE.minus(Wt.arrayBufferToBignumber(r)),4:r=>We.TEN.pow(r[0]).times(r[1]),5:r=>We.TWO.pow(r[0]).times(r[1]),32:r=>new Qg(r),35:r=>new RegExp(r)},e.tags),this.parser=Yg(za,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case We.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case We.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case We.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case We.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case We.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case We.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===We.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,r){const n=this._currentParent;switch(n.values++,n.type){case We.PARENT.ARRAY:case We.PARENT.BYTE_STRING:case We.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case We.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=We.PARENT.MAP,n.ref=Wt.buildMap(n.ref)));break;case We.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case We.PARENT.TAG:this._ref.push(e),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,r,n){this._parents[this._depth]={type:r,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:We.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,r){const n=this._knownTags[e];return n?n(r):new Xg(e,r)}createMap(e,r){return e}createObject(e,r){return e}createArray(e,r){return e}createByteString(e,r){return ma.concat(e)}createByteStringFromHeap(e,r){return e===r?ma.alloc(0):ma.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,r){return Wt.buildInt32(e,r)}createInt64(e,r,n,a){return Wt.buildInt64(e,r,n,a)}createFloat(e){return e}createFloatSingle(e,r,n,a){return Wc.read([e,r,n,a],0,!1,23,4)}createFloatDouble(e,r,n,a,i,s,o,u){return Wc.read([e,r,n,a,i,s,o,u],0,!1,52,8)}createInt32Neg(e,r){return-1-Wt.buildInt32(e,r)}createInt64Neg(e,r,n,a){const i=Wt.buildInt32(e,r),s=Wt.buildInt32(n,a);return i>We.MAX_SAFE_HIGH?We.NEG_ONE.minus(new Kg(i).times(We.SHIFT32).plus(s)):-1-(i*We.SHIFT32+s)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,r){return e.join("")}createUtf8StringFromHeap(e,r){return e===r?"":this._buffer.toString("utf8",e,r)}createSimpleUnassigned(e){return new Zg(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,r){this._push(this.createInt32(e,r))}pushInt64(e,r,n,a){this._push(this.createInt64(e,r,n,a))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,r,n,a){this._push(this.createFloatSingle(e,r,n,a))}pushFloatDouble(e,r,n,a,i,s,o,u){this._push(this.createFloatDouble(e,r,n,a,i,s,o,u))}pushInt32Neg(e,r){this._push(this.createInt32Neg(e,r))}pushInt64Neg(e,r,n,a){this._push(this.createInt64Neg(e,r,n,a))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],We.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,r){const n=Wt.buildInt32(e,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,r,n,a){const i=Wt.buildInt64(e,r,n,a);this._createArrayStartFixed(i)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,r){const n=Wt.buildInt32(e,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,r,n,a){const i=Wt.buildInt64(e,r,n,a);this._createObjectStartFixed(i)}pushByteStringStart(){this._parents[this._depth]={type:We.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,r){this._push(this.createByteStringFromHeap(e,r))}pushUtf8StringStart(){this._parents[this._depth]={type:We.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,r){this._push(this.createUtf8StringFromHeap(e,r))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:We.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,r){this.pushTagStart(Wt.buildInt32(e,r))}pushTagStart8(e,r,n,a){this.pushTagStart(Wt.buildInt64(e,r,n,a))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},We.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),We.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const r=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return typeof e=="string"&&(e=ma.from(e,r||"hex")),new ll({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return typeof e=="string"&&(e=ma.from(e,r||"hex")),new ll({size:e.length}).decodeAll(e)}};ul.decodeFirst=ul.decode;var Yh=ul;const{Buffer:Ru}=ji,jg=Yh,Jg=Wo;class Jl extends jg{createTag(e,r){return`${e}(${r})`}createInt(e){return super.createInt(e).toString()}createInt32(e,r){return super.createInt32(e,r).toString()}createInt64(e,r,n,a){return super.createInt64(e,r,n,a).toString()}createInt32Neg(e,r){return super.createInt32Neg(e,r).toString()}createInt64Neg(e,r,n,a){return super.createInt64Neg(e,r,n,a).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const r=super.createFloat(e);return Jg.isNegativeZero(e)?"-0_1":`${r}_1`}createFloatSingle(e,r,n,a){return`${super.createFloatSingle(e,r,n,a)}_2`}createFloatDouble(e,r,n,a,i,s,o,u){return`${super.createFloatDouble(e,r,n,a,i,s,o,u)}_3`}createByteString(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,r){return`h'${Ru.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,r){const n=super.createArray(e,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,r){const n=super.createMap(e),a=Array.from(n.keys()).reduce(Kc(n),"");return r===-1?`{_ ${a}}`:`{${a}}`}createObject(e,r){const n=super.createObject(e),a=Object.keys(n).reduce(Kc(n),"");return r===-1?`{_ ${a}}`:`{${a}}`}createUtf8String(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,r){return`"${Ru.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return typeof e=="string"&&(e=Ru.from(e,r||"hex")),new Jl().decodeFirst(e)}}var ey=Jl;function Kc(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:Dr}=ji,{URL:ty}=Kh,cl=Ho.BigNumber,ku=Wo,bt=Vt,yr=bt.MT,ps=bt.NUMBYTES,Yc=bt.SHIFT32,Zc=bt.SYMS,ba=bt.TAG,ry=bt.MT.SIMPLE_FLOAT<<5|bt.NUMBYTES.TWO,ny=bt.MT.SIMPLE_FLOAT<<5|bt.NUMBYTES.FOUR,ay=bt.MT.SIMPLE_FLOAT<<5|bt.NUMBYTES.EIGHT,iy=bt.MT.SIMPLE_FLOAT<<5|bt.SIMPLE.TRUE,sy=bt.MT.SIMPLE_FLOAT<<5|bt.SIMPLE.FALSE,oy=bt.MT.SIMPLE_FLOAT<<5|bt.SIMPLE.UNDEFINED,Xc=bt.MT.SIMPLE_FLOAT<<5|bt.SIMPLE.NULL,uy=new cl("0x20000000000000"),ly=Dr.from("f97e00","hex"),cy=Dr.from("f9fc00","hex"),fy=Dr.from("f97c00","hex");function dy(t){return{}.toString.call(t).slice(8,-1)}class wo{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[ty,this._pushUrl],[cl,this._pushBigNumber]];const r=e.genTypes||[],n=r.length;for(let a=0;a<n;a++)this.addSemanticType(r[a][0],r[a][1]);this._reset()}addSemanticType(e,r){const n=this.semanticTypes.length;for(let a=0;a<n;a++)if(this.semanticTypes[a][0]===e){const s=this.semanticTypes[a][1];return this.semanticTypes[a][1]=r,s}return this.semanticTypes.push([e,r]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,r,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(ly)}_pushInfinity(e){const r=e<0?cy:fy;return this.push(r)}_pushFloat(e){const r=Dr.allocUnsafe(2);if(ku.writeHalf(r,e)&&ku.parseHalf(r)===e)return this._pushUInt8(ry)&&this.push(r);const n=Dr.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(ny)&&this.push(n):this._pushUInt8(ay)&&this._pushDoubleBE(e)}_pushInt(e,r,n){const a=r<<5;return e<24?this._pushUInt8(a|e):e<=255?this._pushUInt8(a|ps.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(a|ps.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(a|ps.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(a|ps.EIGHT)&&this._pushUInt32BE(Math.floor(e/Yc))&&this._pushUInt32BE(e%Yc):r===yr.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,yr.NEG_INT,e):this._pushInt(e,yr.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!==0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=Dr.byteLength(e,"utf8");return this._pushInt(r,yr.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?iy:sy)}_pushUndefined(e){return this._pushUInt8(oy)}_pushArray(e,r){const n=r.length;if(!e._pushInt(n,yr.ARRAY))return!1;for(let a=0;a<n;a++)if(!e.pushAny(r[a]))return!1;return!0}_pushTag(e){return this._pushInt(e,yr.TAG)}_pushDate(e,r){return e._pushTag(ba.DATE_EPOCH)&&e.pushAny(Math.round(r/1e3))}_pushBuffer(e,r){return e._pushInt(r.length,yr.BYTE_STRING)&&e.push(r)}_pushNoFilter(e,r){return e._pushBuffer(e,r.slice())}_pushRegexp(e,r){return e._pushTag(ba.REGEXP)&&e.pushAny(r.source)}_pushSet(e,r){if(!e._pushInt(r.size,yr.ARRAY))return!1;for(const n of r)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,r){return e._pushTag(ba.URI)&&e.pushAny(r.format())}_pushBigint(e){let r=ba.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=ba.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const a=Dr.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,a)}_pushBigNumber(e,r){if(r.isNaN())return e._pushNaN();if(!r.isFinite())return e._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return e._pushBigint(r);if(!(e._pushTag(ba.DECIMAL_FRAC)&&e._pushInt(2,yr.ARRAY)))return!1;const n=r.decimalPlaces(),a=r.multipliedBy(new cl(10).pow(n));return e._pushIntNum(-n)?a.abs().isLessThan(uy)?e._pushIntNum(a.toNumber()):e._pushBigint(a):!1}_pushMap(e,r){return e._pushInt(r.size,yr.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(e){if(!e)return this._pushUInt8(Xc);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var a=e.encodeCBOR;if(typeof a=="function")return a.call(e,this);var i=Object.keys(e),s=i.length;return this._pushInt(s,yr.MAP)?this._pushRawMap(s,i.map(o=>[o,e[o]])):!1}_pushRawMap(e,r){r=r.map(function(a){return a[0]=wo.encode(a[0]),a}).sort(ku.keySorter);for(var n=0;n<e;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var r=dy(e);switch(r){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Dr.isBuffer(e)?e:Dr.from(e));case"Null":return this._pushUInt8(Xc);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case Zc.NULL:return this._pushObject(null);case Zc.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,a=this.offset,i=0,s=0;s<a;s++)i+=r[s];var o=Dr.allocUnsafe(i),u=0,l=0;for(s=0;s<a;s++){switch(l=r[s],n[s]){case 0:e[s].copy(o,u);break;case 1:o.writeUInt8(e[s],u,!0);break;case 2:o.writeUInt16BE(e[s],u,!0);break;case 3:o.writeUInt32BE(e[s],u,!0);break;case 4:o.writeDoubleBE(e[s],u,!0);break;case 5:o.write(e[s],u,l,"utf8");break;default:throw new Error("unkown method")}u+=l}var c=o;return this._reset(),c}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const r=new wo;if(!r.pushAny(e))throw new Error("Failed to encode input");return r.finalize()}}var hy=wo;(function(t){t.Diagnose=ey,t.Decoder=Yh,t.Encoder=hy,t.Simple=qh,t.Tagged=Gh,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(zh);const Zh=Xp(zh);function Gr(...t){const e=new Uint8Array(t.reduce((n,a)=>n+a.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e.buffer}function Br(t){return[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join("")}const vy=new RegExp(/^[0-9a-fA-F]+$/);function xo(t){if(!vy.test(t))throw new Error("Invalid hexadecimal string.");const e=[...t].reduce((r,n,a)=>(r[a/2|0]=(r[a/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(e).buffer}function Xh(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;const r=new Uint8Array(t),n=new Uint8Array(e);for(let a=0;a<r.length;a++)if(r[a]!==n[a])return r[a]-n[a];return 0}function ec(t,e){return Xh(t,e)===0}function zs(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function Qh(t){return t instanceof Uint8Array?zs(t):t instanceof ArrayBuffer?t:Array.isArray(t)?zs(new Uint8Array(t)):"buffer"in t?Qh(t.buffer):zs(new Uint8Array(t))}function _r(t){return zs(Kl.create().update(new Uint8Array(t)).digest())}function Vs(t){if(t instanceof Zh.Tagged)return Vs(t.value);if(typeof t=="string")return jh(t);if(typeof t=="number")return _r(it(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return _r(t);if(Array.isArray(t)){const e=t.map(Vs);return _r(Gr(...e))}else{if(t&&typeof t=="object"&&t._isPrincipal)return _r(t.toUint8Array());if(typeof t=="object"&&t!==null&&typeof t.toHash=="function")return Vs(t.toHash());if(typeof t=="object")return Eo(t);if(typeof t=="bigint")return _r(it(t))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}const jh=t=>{const e=new TextEncoder().encode(t);return _r(e)};function Qc(t){return Eo(t)}function Eo(t){const n=Object.entries(t).filter(([,s])=>s!==void 0).map(([s,o])=>{const u=jh(s),l=Vs(o);return[u,l]}).sort(([s],[o])=>Xh(s,o)),a=Gr(...n.map(s=>Gr(...s)));return _r(a)}globalThis&&globalThis.__rest;new TextEncoder().encode(`
ic-request`);class py{getPrincipal(){return Me.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}var en={},Xa={},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});const gy=9007199254740992;function rn(t,...e){const r=new Uint8Array(t.byteLength+e.reduce((a,i)=>a+i.byteLength,0));r.set(new Uint8Array(t),0);let n=t.byteLength;for(const a of e)r.set(new Uint8Array(a),n),n+=a.byteLength;return r.buffer}function Cr(t,e,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(e-24);r=r.slice(-n*2).padStart(n*2,"0");const a=[(t<<5)+e].concat(r.match(/../g).map(i=>parseInt(i,16)));return new Uint8Array(a).buffer}function Ko(t,e){if(e<24)return new Uint8Array([(t<<5)+e]).buffer;{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27;return Cr(t,r,e.toString(16))}}function Jh(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|n&63):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|t.charCodeAt(r)&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return rn(new Uint8Array(Ko(3,t.length)),new Uint8Array(e))}function yy(t,e){if(t==14277111)return rn(new Uint8Array([217,217,247]),e);if(t<24)return rn(new Uint8Array([192+t]),e);{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27,n=2**(r-24),a=t.toString(16).slice(-n*2).padStart(n*2,"0"),i=[192+r].concat(a.match(/../g).map(s=>parseInt(s,16)));return new Uint8Array(i).buffer}}Ze.tagged=yy;function Ji(t){return new Uint8Array(t).buffer}Ze.raw=Ji;function tc(t){if(isNaN(t))throw new RangeError("Invalid number.");t=Math.min(Math.max(0,t),23);const e=[0+t];return new Uint8Array(e).buffer}Ze.uSmall=tc;function ev(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),255),t=t.toString(16),Cr(0,24,t)}Ze.u8=ev;function tv(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),65535),t=t.toString(16),Cr(0,25,t)}Ze.u16=tv;function rv(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),4294967295),t=t.toString(16),Cr(0,26,t)}Ze.u32=rv;function rc(t,e){if(typeof t=="string"&&e==16){if(t.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return Cr(0,27,t)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),gy),t=t.toString(16),Cr(0,27,t)}Ze.u64=rc;function nv(t){if(isNaN(t))throw new RangeError("Invalid number.");if(t===0)return tc(0);t=Math.min(Math.max(0,-t),24)-1;const e=[32+t];return new Uint8Array(e).buffer}Ze.iSmall=nv;function av(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),255),t=t.toString(16),Cr(1,24,t)}Ze.i8=av;function iv(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),65535),t=t.toString(16),Cr(1,25,t)}Ze.i16=iv;function sv(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),4294967295),t=t.toString(16),Cr(1,26,t)}Ze.i32=sv;function ov(t,e){if(typeof t=="string"&&e==16){if(t.startsWith("-")?t=t.slice(1):t="0",t.match(/[^0-9a-fA-F]/)||t.length>16)throw new RangeError("Invalid number.");let r=!1,n=t.split("").reduceRight((a,i)=>{if(r)return i+a;let s=parseInt(i,16)-1;return s>=0?(r=!0,s.toString(16)+a):"f"+a},"");return r?Cr(1,27,n):rc(0)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),9007199254740992),t=t.toString(16),Cr(1,27,t)}Ze.i64=ov;function my(t){return t>=0?t<24?tc(t):t<=255?ev(t):t<=65535?tv(t):t<=4294967295?rv(t):rc(t):t>=-24?nv(t):t>=-255?av(t):t>=-65535?iv(t):t>=-4294967295?sv(t):ov(t)}Ze.number=my;function by(t){return rn(Ko(2,t.byteLength),t)}Ze.bytes=by;function wy(t){return Jh(t)}Ze.string=wy;function xy(t){return rn(Ko(4,t.length),...t)}Ze.array=xy;function Ey(t,e=!1){t instanceof Map||(t=new Map(Object.entries(t)));let r=Array.from(t.entries());return e&&(r=r.sort(([n],[a])=>n.localeCompare(a))),rn(Ko(5,t.size),...r.map(([n,a])=>rn(Jh(n),a)))}Ze.map=Ey;function Sy(t){const e=new Float32Array([t]);return rn(new Uint8Array([224+26]),new Uint8Array(e.buffer))}Ze.singleFloat=Sy;function Ty(t){const e=new Float64Array([t]);return rn(new Uint8Array([224+27]),new Uint8Array(e.buffer))}Ze.doubleFloat=Ty;function _y(t){return t?uv():lv()}Ze.bool=_y;function uv(){return Ji(new Uint8Array([224+21]))}Ze.true_=uv;function lv(){return Ji(new Uint8Array([224+20]))}Ze.false_=lv;function By(){return Ji(new Uint8Array([224+22]))}Ze.null_=By;function Ay(){return Ji(new Uint8Array([224+23]))}Ze.undefined_=Ay;var Cy=za&&za.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(Xa,"__esModule",{value:!0});const br=Cy(Ze),Iy=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class cv{constructor(e,r=!1){this._serializer=e,this._stable=r,this.name="jsonDefault",this.priority=-100}match(e){return["undefined","boolean","number","string","object"].indexOf(typeof e)!=-1}encode(e){switch(typeof e){case"undefined":return br.undefined_();case"boolean":return br.bool(e);case"number":return Math.floor(e)===e?br.number(e):br.doubleFloat(e);case"string":return br.string(e);case"object":if(e===null)return br.null_();if(Array.isArray(e))return br.array(e.map(r=>this._serializer.serializeValue(r)));if(Iy.find(r=>e instanceof r))return br.bytes(e.buffer);if(Object.getOwnPropertyNames(e).indexOf("toJSON")!==-1)return this.encode(e.toJSON());if(e instanceof Map){const r=new Map;for(const[n,a]of e.entries())r.set(n,this._serializer.serializeValue(a));return br.map(r,this._stable)}else{const r=new Map;for(const[n,a]of Object.entries(e))r.set(n,this._serializer.serializeValue(a));return br.map(r,this._stable)}default:throw new Error("Invalid value.")}}}Xa.JsonDefaultCborEncoder=cv;class fv{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return typeof e=="object"&&typeof e.toCBOR=="function"}encode(e){return e.toCBOR()}}Xa.ToCborEncoder=fv;class dv{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){const r=new this;return r.addEncoder(new cv(r,e)),r.addEncoder(new fv),r}removeEncoder(e){for(const r of this._encoders.values())r.name==e&&this._encoders.delete(r)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(e)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}Xa.CborSerializer=dv;class Ny extends dv{serialize(e){return br.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}Xa.SelfDescribeCborSerializer=Ny;(function(t){function e(a){for(var i in a)t.hasOwnProperty(i)||(t[i]=a[i])}var r=za&&za.__importStar||function(a){if(a&&a.__esModule)return a;var i={};if(a!=null)for(var s in a)Object.hasOwnProperty.call(a,s)&&(i[s]=a[s]);return i.default=a,i};Object.defineProperty(t,"__esModule",{value:!0}),e(Xa);const n=r(Ze);t.value=n})(en);class Ry{get name(){return"Principal"}get priority(){return 0}match(e){return e&&e._isPrincipal===!0}encode(e){return en.value.bytes(e.toUint8Array())}}class ky{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return en.value.bytes(new Uint8Array(e))}}class Py{get name(){return"BigInt"}get priority(){return 1}match(e){return typeof e=="bigint"}encode(e){return e>BigInt(0)?en.value.tagged(2,en.value.bytes(xo(e.toString(16)))):en.value.tagged(3,en.value.bytes(xo((BigInt("-1")*e).toString(16))))}}const Yo=en.SelfDescribeCborSerializer.withDefaultEncoders(!0);Yo.addEncoder(new Ry);Yo.addEncoder(new ky);Yo.addEncoder(new Py);var fl;(function(t){t[t.Uint64LittleEndian=71]="Uint64LittleEndian",t[t.Semantic=55799]="Semantic"})(fl||(fl={}));function Pu(t){return Yo.serialize(t)}function jc(t){const e=t.byteLength;let r=BigInt(0);for(let n=0;n<e;n++)r=r*BigInt(256)+BigInt(t[n]);return r}class Oy extends Zh.Decoder{createByteString(e){return Gr(...e)}createByteStringFromHeap(e,r){return e===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,r))}}function tn(t){const e=new Uint8Array(t),r=new Oy({size:e.byteLength,tags:{2:n=>jc(n),3:n=>-jc(n),[fl.Semantic]:n=>n}});try{return r.decodeFirst(e)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${Br(e)}`)}}const gs=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var dl;(function(t){t.Call="call"})(dl||(dl={}));function hl(){const t=new ArrayBuffer(16),e=new DataView(t),r=gs(),n=gs(),a=gs(),i=gs();return e.setUint32(0,r),e.setUint32(4,n),e.setUint32(8,a),e.setUint32(12,i),t}const My=BigInt(1e6),Fy=60*1e3;class ys{constructor(e){const i=BigInt(Math.floor(Date.now()+e-Fy))*My/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=i}toCBOR(){return en.value.u64(this._value.toString(16),16)}toHash(){return it(this._value)}}function Jc(t=hl){return async e=>{const r=e.request.headers;e.request.headers=r,e.endpoint==="call"&&(e.body.nonce=t())}}function qs(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}class ef extends Jt{constructor(e,r){super(e),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hv=BigInt(0),nc=BigInt(1),Dy=BigInt(2);function Zo(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Cn(t){if(!Zo(t))throw new Error("Uint8Array expected")}function Ei(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)}const Uy=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function aa(t){Cn(t);let e="";for(let r=0;r<t.length;r++)e+=Uy[t[r]];return e}function vv(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Zr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function tf(t){if(t>=Zr._0&&t<=Zr._9)return t-Zr._0;if(t>=Zr._A&&t<=Zr._F)return t-(Zr._A-10);if(t>=Zr._a&&t<=Zr._f)return t-(Zr._a-10)}function pv(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let a=0,i=0;a<r;a++,i+=2){const s=tf(t.charCodeAt(i)),o=tf(t.charCodeAt(i+1));if(s===void 0||o===void 0){const u=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[a]=s*16+o}return n}function Er(t){return vv(aa(t))}function Si(t){return Cn(t),vv(aa(Uint8Array.from(t).reverse()))}function Nt(t,e){return pv(t.toString(16).padStart(e*2,"0"))}function So(t,e){return Nt(t,e).reverse()}function Qt(t,e,r){let n;if(typeof e=="string")try{n=pv(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Zo(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const a=n.length;if(typeof r=="number"&&a!==r)throw new Error(`${t} expected ${r} bytes, got ${a}`);return n}function ht(...t){let e=0;for(let n=0;n<t.length;n++){const a=t[n];Cn(a),e+=a.length}const r=new Uint8Array(e);for(let n=0,a=0;n<t.length;n++){const i=t[n];r.set(i,a),a+=i.length}return r}function ac(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}const Ou=t=>typeof t=="bigint"&&hv<=t;function gv(t,e,r){return Ou(t)&&Ou(e)&&Ou(r)&&e<=t&&t<r}function xn(t,e,r,n){if(!gv(e,r,n))throw new Error(`expected valid ${t}: ${r} <= n < ${n}, got ${typeof e} ${e}`)}function Ti(t){let e;for(e=0;t>hv;t>>=nc,e+=1);return e}function Ly(t,e){return t>>BigInt(e)&nc}const Gs=t=>(Dy<<BigInt(t-1))-nc,$y={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Zo(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function es(t,e,r={}){const n=(a,i,s)=>{const o=$y[i];if(typeof o!="function")throw new Error(`Invalid validator "${i}", expected function`);const u=t[a];if(!(s&&u===void 0)&&!o(u,t))throw new Error(`Invalid param ${String(a)}=${u} (${typeof u}), expected ${i}`)};for(const[a,i]of Object.entries(e))n(a,i,!1);for(const[a,i]of Object.entries(r))n(a,i,!0);return t}const rf=()=>{throw new Error("not implemented")};function Pi(t){const e=new WeakMap;return(r,...n)=>{const a=e.get(r);if(a!==void 0)return a;const i=t(r,...n);return e.set(r,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const At=BigInt(0),tt=BigInt(1),En=BigInt(2),zy=BigInt(3),vl=BigInt(4),nf=BigInt(5),af=BigInt(8);BigInt(9);BigInt(16);function at(t,e){const r=t%e;return r>=At?r:e+r}function Vy(t,e,r){if(r<=At||e<At)throw new Error("Expected power/modulo > 0");if(r===tt)return At;let n=tt;for(;e>At;)e&tt&&(n=n*t%r),t=t*t%r,e>>=tt;return n}function Rr(t,e,r){let n=t;for(;e-- >At;)n*=n,n%=r;return n}function sf(t,e){if(t===At||e<=At)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=at(t,e),n=e,a=At,i=tt;for(;r!==At;){const o=n/r,u=n%r,l=a-i*o;n=r,r=u,a=i,i=l}if(n!==tt)throw new Error("invert: does not exist");return at(a,e)}function qy(t){const e=(t-tt)/En;let r,n,a;for(r=t-tt,n=0;r%En===At;r/=En,n++);for(a=En;a<t&&Vy(a,e,t)!==t-tt;a++);if(n===1){const s=(t+tt)/vl;return function(u,l){const c=u.pow(l,s);if(!u.eql(u.sqr(c),l))throw new Error("Cannot find square root");return c}}const i=(r+tt)/En;return function(o,u){if(o.pow(u,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let l=n,c=o.pow(o.mul(o.ONE,a),r),f=o.pow(u,i),h=o.pow(u,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let v=1;for(let b=o.sqr(h);v<l&&!o.eql(b,o.ONE);v++)b=o.sqr(b);const d=o.pow(c,tt<<BigInt(l-v-1));c=o.sqr(d),f=o.mul(f,d),h=o.mul(h,c),l=v}return f}}function Gy(t){if(t%vl===zy){const e=(t+tt)/vl;return function(n,a){const i=n.pow(a,e);if(!n.eql(n.sqr(i),a))throw new Error("Cannot find square root");return i}}if(t%af===nf){const e=(t-nf)/af;return function(n,a){const i=n.mul(a,En),s=n.pow(i,e),o=n.mul(a,s),u=n.mul(n.mul(o,En),s),l=n.mul(o,n.sub(u,n.ONE));if(!n.eql(n.sqr(l),a))throw new Error("Cannot find square root");return l}}return qy(t)}const Hy=(t,e)=>(at(t,e)&tt)===tt,Wy=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yv(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Wy.reduce((n,a)=>(n[a]="function",n),e);return es(t,r)}function Hs(t,e,r){if(r<At)throw new Error("Expected power > 0");if(r===At)return t.ONE;if(r===tt)return e;let n=t.ONE,a=e;for(;r>At;)r&tt&&(n=t.mul(n,a)),a=t.sqr(a),r>>=tt;return n}function Ws(t,e){const r=new Array(e.length),n=e.reduce((i,s,o)=>t.is0(s)?i:(r[o]=i,t.mul(i,s)),t.ONE),a=t.inv(n);return e.reduceRight((i,s,o)=>t.is0(s)?i:(r[o]=t.mul(i,r[o]),t.mul(i,s)),a),r}function Ky(t){const e=(t-tt)/En;return(r,n)=>r.pow(n,e)}function mv(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function ts(t,e,r=!1,n={}){if(t<=At)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:a,nByteLength:i}=mv(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Gy(t),o=Object.freeze({ORDER:t,BITS:a,BYTES:i,MASK:Gs(a),ZERO:At,ONE:tt,create:u=>at(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return At<=u&&u<t},is0:u=>u===At,isOdd:u=>(u&tt)===tt,neg:u=>at(-u,t),eql:(u,l)=>u===l,sqr:u=>at(u*u,t),add:(u,l)=>at(u+l,t),sub:(u,l)=>at(u-l,t),mul:(u,l)=>at(u*l,t),pow:(u,l)=>Hs(o,u,l),div:(u,l)=>at(u*sf(l,t),t),sqrN:u=>u*u,addN:(u,l)=>u+l,subN:(u,l)=>u-l,mulN:(u,l)=>u*l,inv:u=>sf(u,t),sqrt:n.sqrt||(u=>s(o,u)),invertBatch:u=>Ws(o,u),cmov:(u,l,c)=>c?l:u,toBytes:u=>r?So(u,i):Nt(u,i),fromBytes:u=>{if(u.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${u.length}`);return r?Si(u):Er(u)}});return Object.freeze(o)}function bv(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function wv(t){const e=bv(t);return e+Math.ceil(e/2)}function Yy(t,e,r=!1){const n=t.length,a=bv(e),i=wv(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const s=r?Er(t):Si(t),o=at(s,e-tt)+tt;return r?So(o,a):Nt(o,a)}const Zy=Er;function mn(t,e){if(Oi(t),Oi(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function Xy(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function Oi(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Qy(t,e,r,n){Cn(t),Cn(e),Oi(r),e.length>255&&(e=n(ht(ac("H2C-OVERSIZE-DST-"),e)));const{outputLen:a,blockLen:i}=n,s=Math.ceil(r/a);if(r>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const o=ht(e,mn(e.length,1)),u=mn(0,i),l=mn(r,2),c=new Array(s),f=n(ht(u,t,l,mn(0,1),o));c[0]=n(ht(f,mn(1,1),o));for(let v=1;v<=s;v++){const d=[Xy(f,c[v-1]),mn(v+1,1),o];c[v]=n(ht(...d))}return ht(...c).slice(0,r)}function jy(t,e,r,n,a){if(Cn(t),Cn(e),Oi(r),e.length>255){const i=Math.ceil(2*n/8);e=a.create({dkLen:i}).update(ac("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return a.create({dkLen:r}).update(t).update(mn(r,2)).update(e).update(mn(e.length,1)).digest()}function of(t,e,r){es(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:a,m:i,hash:s,expand:o,DST:u}=r;Cn(t),Oi(e);const l=typeof u=="string"?ac(u):u,c=n.toString(2).length,f=Math.ceil((c+a)/8),h=e*i*f;let v;if(o==="xmd")v=Qy(t,l,h,s);else if(o==="xof")v=jy(t,l,h,a,s);else if(o==="_internal_pass")v=t;else throw new Error('expand must be "xmd" or "xof"');const d=new Array(e);for(let b=0;b<e;b++){const y=new Array(i);for(let m=0;m<i;m++){const E=f*(m+b*i),S=v.subarray(E,E+f);y[m]=at(Zy(S),n)}d[b]=y}return d}function xv(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,a)=>{const[i,s,o,u]=r.map(l=>l.reduce((c,f)=>t.add(t.mul(c,n),f)));return n=t.div(i,s),a=t.mul(a,t.div(o,u)),{x:n,y:a}}}function uf(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,a){const i=of(n,2,{...r,DST:r.DST,...a}),s=t.fromAffine(e(i[0])),o=t.fromAffine(e(i[1])),u=s.add(o).clearCofactor();return u.assertValidity(),u},encodeToCurve(n,a){const i=of(n,1,{...r,DST:r.encodeDST,...a}),s=t.fromAffine(e(i[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const i of n)if(typeof i!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${i} in array`);const a=t.fromAffine(e(n)).clearCofactor();return a.assertValidity(),a}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jy=BigInt(0),Mu=BigInt(1),Fu=new WeakMap,lf=new WeakMap;function Ev(t,e){const r=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{if(!Number.isSafeInteger(i)||i<=0||i>e)throw new Error(`Wrong window size=${i}, should be [1..${e}]`)},a=i=>{n(i);const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:r,unsafeLadder(i,s){let o=t.ZERO,u=i;for(;s>Jy;)s&Mu&&(o=o.add(u)),u=u.double(),s>>=Mu;return o},precomputeWindow(i,s){const{windows:o,windowSize:u}=a(s),l=[];let c=i,f=c;for(let h=0;h<o;h++){f=c,l.push(f);for(let v=1;v<u;v++)f=f.add(c),l.push(f);c=f.double()}return l},wNAF(i,s,o){const{windows:u,windowSize:l}=a(i);let c=t.ZERO,f=t.BASE;const h=BigInt(2**i-1),v=2**i,d=BigInt(i);for(let b=0;b<u;b++){const y=b*l;let m=Number(o&h);o>>=d,m>l&&(m-=v,o+=Mu);const E=y,S=y+Math.abs(m)-1,B=b%2!==0,C=m<0;m===0?f=f.add(r(B,s[E])):c=c.add(r(C,s[S]))}return{p:c,f}},wNAFCached(i,s,o){const u=lf.get(i)||1;let l=Fu.get(i);return l||(l=this.precomputeWindow(i,u),u!==1&&Fu.set(i,o(l))),this.wNAF(u,l,s)},setWindowSize(i,s){n(s),lf.set(i,s),Fu.delete(i)}}}function Sv(t,e,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach((c,f)=>{if(!e.isValid(c))throw new Error(`wrong scalar at index ${f}`)}),r.forEach((c,f)=>{if(!(c instanceof t))throw new Error(`wrong point at index ${f}`)});const a=Ti(BigInt(r.length)),i=a>12?a-3:a>4?a-2:a?2:1,s=(1<<i)-1,o=new Array(s+1).fill(t.ZERO),u=Math.floor((e.BITS-1)/i)*i;let l=t.ZERO;for(let c=u;c>=0;c-=i){o.fill(t.ZERO);for(let h=0;h<n.length;h++){const v=n[h],d=Number(v>>BigInt(c)&BigInt(s));o[d]=o[d].add(r[h])}let f=t.ZERO;for(let h=o.length-1,v=t.ZERO;h>0;h--)v=v.add(o[h]),f=f.add(v);if(l=l.add(f),c!==0)for(let h=0;h<i;h++)l=l.double()}return l}function Tv(t){return yv(t.Fp),es(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...mv(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function em(t){const e=Tv(t);es(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a}=e;if(r){if(!n.eql(a,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const Kn=BigInt(0),lt=BigInt(1),dn=BigInt(2),To=BigInt(3),cf=BigInt(4);function ff(t){const e=em(t),{Fp:r}=e,n=ts(e.n,e.nBitLength),a=e.toBytes||((b,y,m)=>{const E=y.toAffine();return ht(Uint8Array.from([4]),r.toBytes(E.x),r.toBytes(E.y))}),i=e.fromBytes||(b=>{const y=b.subarray(1),m=r.fromBytes(y.subarray(0,r.BYTES)),E=r.fromBytes(y.subarray(r.BYTES,2*r.BYTES));return{x:m,y:E}});function s(b){const{a:y,b:m}=e,E=r.sqr(b),S=r.mul(E,b);return r.add(r.add(S,r.mul(b,y)),m)}if(!r.eql(r.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(b){return gv(b,lt,e.n)}function u(b){const{allowedPrivateKeyLengths:y,nByteLength:m,wrapPrivateKey:E,n:S}=e;if(y&&typeof b!="bigint"){if(Zo(b)&&(b=aa(b)),typeof b!="string"||!y.includes(b.length))throw new Error("Invalid key");b=b.padStart(m*2,"0")}let B;try{B=typeof b=="bigint"?b:Er(Qt("private key",b,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof b}`)}return E&&(B=at(B,S)),xn("private key",B,lt,S),B}function l(b){if(!(b instanceof h))throw new Error("ProjectivePoint expected")}const c=Pi((b,y)=>{const{px:m,py:E,pz:S}=b;if(r.eql(S,r.ONE))return{x:m,y:E};const B=b.is0();y==null&&(y=B?r.ONE:r.inv(S));const C=r.mul(m,y),O=r.mul(E,y),A=r.mul(S,y);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(A,r.ONE))throw new Error("invZ was invalid");return{x:C,y:O}}),f=Pi(b=>{if(b.is0()){if(e.allowInfinityPoint&&!r.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:y,y:m}=b.toAffine();if(!r.isValid(y)||!r.isValid(m))throw new Error("bad point: x or y not FE");const E=r.sqr(m),S=s(y);if(!r.eql(E,S))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(y,m,E){if(this.px=y,this.py=m,this.pz=E,y==null||!r.isValid(y))throw new Error("x required");if(m==null||!r.isValid(m))throw new Error("y required");if(E==null||!r.isValid(E))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:m,y:E}=y||{};if(!y||!r.isValid(m)||!r.isValid(E))throw new Error("invalid affine point");if(y instanceof h)throw new Error("projective point not allowed");const S=B=>r.eql(B,r.ZERO);return S(m)&&S(E)?h.ZERO:new h(m,E,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const m=r.invertBatch(y.map(E=>E.pz));return y.map((E,S)=>E.toAffine(m[S])).map(h.fromAffine)}static fromHex(y){const m=h.fromAffine(i(Qt("pointHex",y)));return m.assertValidity(),m}static fromPrivateKey(y){return h.BASE.multiply(u(y))}static msm(y,m){return Sv(h,n,y,m)}_setWindowSize(y){d.setWindowSize(this,y)}assertValidity(){f(this)}hasEvenY(){const{y}=this.toAffine();if(r.isOdd)return!r.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);const{px:m,py:E,pz:S}=this,{px:B,py:C,pz:O}=y,A=r.eql(r.mul(m,O),r.mul(B,S)),D=r.eql(r.mul(E,O),r.mul(C,S));return A&&D}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:y,b:m}=e,E=r.mul(m,To),{px:S,py:B,pz:C}=this;let O=r.ZERO,A=r.ZERO,D=r.ZERO,F=r.mul(S,S),U=r.mul(B,B),W=r.mul(C,C),H=r.mul(S,B);return H=r.add(H,H),D=r.mul(S,C),D=r.add(D,D),O=r.mul(y,D),A=r.mul(E,W),A=r.add(O,A),O=r.sub(U,A),A=r.add(U,A),A=r.mul(O,A),O=r.mul(H,O),D=r.mul(E,D),W=r.mul(y,W),H=r.sub(F,W),H=r.mul(y,H),H=r.add(H,D),D=r.add(F,F),F=r.add(D,F),F=r.add(F,W),F=r.mul(F,H),A=r.add(A,F),W=r.mul(B,C),W=r.add(W,W),F=r.mul(W,H),O=r.sub(O,F),D=r.mul(W,U),D=r.add(D,D),D=r.add(D,D),new h(O,A,D)}add(y){l(y);const{px:m,py:E,pz:S}=this,{px:B,py:C,pz:O}=y;let A=r.ZERO,D=r.ZERO,F=r.ZERO;const U=e.a,W=r.mul(e.b,To);let H=r.mul(m,B),R=r.mul(E,C),I=r.mul(S,O),G=r.add(m,E),V=r.add(B,C);G=r.mul(G,V),V=r.add(H,R),G=r.sub(G,V),V=r.add(m,S);let $=r.add(B,O);return V=r.mul(V,$),$=r.add(H,I),V=r.sub(V,$),$=r.add(E,S),A=r.add(C,O),$=r.mul($,A),A=r.add(R,I),$=r.sub($,A),F=r.mul(U,V),A=r.mul(W,I),F=r.add(A,F),A=r.sub(R,F),F=r.add(R,F),D=r.mul(A,F),R=r.add(H,H),R=r.add(R,H),I=r.mul(U,I),V=r.mul(W,V),R=r.add(R,I),I=r.sub(H,I),I=r.mul(U,I),V=r.add(V,I),H=r.mul(R,V),D=r.add(D,H),H=r.mul($,V),A=r.mul(G,A),A=r.sub(A,H),H=r.mul(G,R),F=r.mul($,F),F=r.add(F,H),new h(A,D,F)}subtract(y){return this.add(y.negate())}is0(){return this.equals(h.ZERO)}wNAF(y){return d.wNAFCached(this,y,h.normalizeZ)}multiplyUnsafe(y){xn("scalar",y,Kn,e.n);const m=h.ZERO;if(y===Kn)return m;if(y===lt)return this;const{endo:E}=e;if(!E)return d.unsafeLadder(this,y);let{k1neg:S,k1:B,k2neg:C,k2:O}=E.splitScalar(y),A=m,D=m,F=this;for(;B>Kn||O>Kn;)B&lt&&(A=A.add(F)),O&lt&&(D=D.add(F)),F=F.double(),B>>=lt,O>>=lt;return S&&(A=A.negate()),C&&(D=D.negate()),D=new h(r.mul(D.px,E.beta),D.py,D.pz),A.add(D)}multiply(y){const{endo:m,n:E}=e;xn("scalar",y,lt,E);let S,B;if(m){const{k1neg:C,k1:O,k2neg:A,k2:D}=m.splitScalar(y);let{p:F,f:U}=this.wNAF(O),{p:W,f:H}=this.wNAF(D);F=d.constTimeNegate(C,F),W=d.constTimeNegate(A,W),W=new h(r.mul(W.px,m.beta),W.py,W.pz),S=F.add(W),B=U.add(H)}else{const{p:C,f:O}=this.wNAF(y);S=C,B=O}return h.normalizeZ([S,B])[0]}multiplyAndAddUnsafe(y,m,E){const S=h.BASE,B=(O,A)=>A===Kn||A===lt||!O.equals(S)?O.multiplyUnsafe(A):O.multiply(A),C=B(this,m).add(B(y,E));return C.is0()?void 0:C}toAffine(y){return c(this,y)}isTorsionFree(){const{h:y,isTorsionFree:m}=e;if(y===lt)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:m}=e;return y===lt?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return Ei("isCompressed",y),this.assertValidity(),a(h,this,y)}toHex(y=!0){return Ei("isCompressed",y),aa(this.toRawBytes(y))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const v=e.nBitLength,d=Ev(h,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:o}}function tm(t,e){const r=t.ORDER;let n=Kn;for(let d=r-lt;d%dn===Kn;d/=dn)n+=lt;const a=n,i=dn<<a-lt-lt,s=i*dn,o=(r-lt)/s,u=(o-lt)/dn,l=s-lt,c=i,f=t.pow(e,o),h=t.pow(e,(o+lt)/dn);let v=(d,b)=>{let y=f,m=t.pow(b,l),E=t.sqr(m);E=t.mul(E,b);let S=t.mul(d,E);S=t.pow(S,u),S=t.mul(S,m),m=t.mul(S,b),E=t.mul(S,d);let B=t.mul(E,m);S=t.pow(B,c);let C=t.eql(S,t.ONE);m=t.mul(E,h),S=t.mul(B,y),E=t.cmov(m,E,C),B=t.cmov(S,B,C);for(let O=a;O>lt;O--){let A=O-dn;A=dn<<A-lt;let D=t.pow(B,A);const F=t.eql(D,t.ONE);m=t.mul(E,y),y=t.mul(y,y),D=t.mul(B,y),E=t.cmov(m,E,F),B=t.cmov(D,B,F)}return{isValid:C,value:E}};if(t.ORDER%cf===To){const d=(t.ORDER-To)/cf,b=t.sqrt(t.neg(e));v=(y,m)=>{let E=t.sqr(m);const S=t.mul(y,m);E=t.mul(E,S);let B=t.pow(E,d);B=t.mul(B,S);const C=t.mul(B,b),O=t.mul(t.sqr(B),m),A=t.eql(O,y);let D=t.cmov(C,B,A);return{isValid:A,value:D}}}return v}function _v(t,e){if(yv(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=tm(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let a,i,s,o,u,l,c,f;a=t.sqr(n),a=t.mul(a,e.Z),i=t.sqr(a),i=t.add(i,a),s=t.add(i,t.ONE),s=t.mul(s,e.B),o=t.cmov(e.Z,t.neg(i),!t.eql(i,t.ZERO)),o=t.mul(o,e.A),i=t.sqr(s),l=t.sqr(o),u=t.mul(l,e.A),i=t.add(i,u),i=t.mul(i,s),l=t.mul(l,o),u=t.mul(l,e.B),i=t.add(i,u),c=t.mul(a,s);const{isValid:h,value:v}=r(i,l);f=t.mul(a,n),f=t.mul(f,v),c=t.cmov(c,s,h),f=t.cmov(f,v,h);const d=t.isOdd(n)===t.isOdd(f);return f=t.cmov(t.neg(f),f,d),c=t.div(c,o),{x:c,y:f}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rm=BigInt(0),ms=BigInt(1),df=BigInt(2),Ia=BigInt(3);function nm(t){const e=[];for(;t>ms;t>>=ms)(t&ms)===rm?e.unshift(0):(t&Ia)===Ia?(e.unshift(-1),t+=ms):e.unshift(1);return e}function am(t){const{Fp:e,Fr:r,Fp2:n,Fp6:a,Fp12:i}=t.fields,s=t.params.xNegative,o=t.params.twistType,u=ff({n:r.ORDER,...t.G1}),l=Object.assign(u,uf(u.ProjectivePoint,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),c=ff({n:r.ORDER,...t.G2}),f=Object.assign(c,uf(c.ProjectivePoint,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults}));let h;if(o==="multiplicative")h=(Z,le,N,fe,he,pe)=>i.mul014(fe,Z,n.mul(le,he),n.mul(N,pe));else if(o==="divisive")h=(Z,le,N,fe,he,pe)=>i.mul034(fe,n.mul(N,pe),n.mul(le,he),Z);else throw new Error("bls: unknown twist type");const v=n.div(n.ONE,n.mul(n.ONE,df));function d(Z,le,N,fe){const he=n.sqr(N),pe=n.sqr(fe),ie=n.mulByB(n.mul(pe,Ia)),J=n.mul(ie,Ia),k=n.sub(n.sub(n.sqr(n.add(N,fe)),pe),he),M=n.sub(ie,he),K=n.mul(n.sqr(le),Ia),te=n.neg(k);return Z.push([M,K,te]),le=n.mul(n.mul(n.mul(n.sub(he,J),le),N),v),N=n.sub(n.sqr(n.mul(n.add(he,J),v)),n.mul(n.sqr(ie),Ia)),fe=n.mul(he,k),{Rx:le,Ry:N,Rz:fe}}function b(Z,le,N,fe,he,pe){const ie=n.sub(N,n.mul(pe,fe)),J=n.sub(le,n.mul(he,fe)),k=n.sub(n.mul(ie,he),n.mul(J,pe)),M=n.neg(ie),K=J;Z.push([k,M,K]);const te=n.sqr(J),Q=n.mul(te,J),ee=n.mul(te,le),_=n.add(n.sub(Q,n.mul(ee,df)),n.mul(n.sqr(ie),fe));return le=n.mul(J,_),N=n.sub(n.mul(n.sub(ee,_),ie),n.mul(Q,N)),fe=n.mul(fe,Q),{Rx:le,Ry:N,Rz:fe}}const y=nm(t.params.ateLoopSize),m=Pi(Z=>{const le=Z,{x:N,y:fe}=le.toAffine(),he=N,pe=fe,ie=n.neg(fe);let J=he,k=pe,M=n.ONE;const K=[];for(const te of y){const Q=[];({Rx:J,Ry:k,Rz:M}=d(Q,J,k,M)),te&&({Rx:J,Ry:k,Rz:M}=b(Q,J,k,M,he,te===-1?ie:pe)),K.push(Q)}if(t.postPrecompute){const te=K[K.length-1];t.postPrecompute(J,k,M,he,pe,b.bind(null,te))}return K});function E(Z,le=!1){let N=i.ONE;if(Z.length){const fe=Z[0][0].length;for(let he=0;he<fe;he++){N=i.sqr(N);for(const[pe,ie,J]of Z)for(const[k,M,K]of pe[he])N=h(k,M,K,N,ie,J)}}return s&&(N=i.conjugate(N)),le?i.finalExponentiate(N):N}function S(Z,le=!0){const N=[];l.ProjectivePoint.normalizeZ(Z.map(({g1:fe})=>fe)),f.ProjectivePoint.normalizeZ(Z.map(({g2:fe})=>fe));for(const{g1:fe,g2:he}of Z){if(fe.equals(l.ProjectivePoint.ZERO)||he.equals(f.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");fe.assertValidity(),he.assertValidity();const pe=fe.toAffine();N.push([m(he),pe.x,pe.y])}return E(N,le)}function B(Z,le,N=!0){return S([{g1:Z,g2:le}],N)}const C={randomPrivateKey:()=>{const Z=wv(r.ORDER);return Yy(t.randomBytes(Z),r.ORDER)},calcPairingPrecomputes:m},{ShortSignature:O}=t.G1,{Signature:A}=t.G2;function D(Z){return Z instanceof l.ProjectivePoint?Z:l.ProjectivePoint.fromHex(Z)}function F(Z,le){return Z instanceof l.ProjectivePoint?Z:l.hashToCurve(Qt("point",Z),le)}function U(Z){return Z instanceof f.ProjectivePoint?Z:A.fromHex(Z)}function W(Z,le){return Z instanceof f.ProjectivePoint?Z:f.hashToCurve(Qt("point",Z),le)}function H(Z){return l.ProjectivePoint.fromPrivateKey(Z).toRawBytes(!0)}function R(Z){return f.ProjectivePoint.fromPrivateKey(Z).toRawBytes(!0)}function I(Z,le,N){const fe=W(Z,N);fe.assertValidity();const he=fe.multiply(l.normPrivateKeyToScalar(le));return Z instanceof f.ProjectivePoint?he:A.toRawBytes(he)}function G(Z,le,N){const fe=F(Z,N);fe.assertValidity();const he=fe.multiply(l.normPrivateKeyToScalar(le));return Z instanceof l.ProjectivePoint?he:O.toRawBytes(he)}function V(Z,le,N,fe){const he=D(N),pe=W(le,fe),ie=l.ProjectivePoint.BASE,J=U(Z),k=S([{g1:he.negate(),g2:pe},{g1:ie,g2:J}]);return i.eql(k,i.ONE)}function $(Z,le,N,fe){const he=U(N),pe=F(le,fe),ie=f.ProjectivePoint.BASE,J=D(Z),k=S([{g1:pe,g2:he},{g1:J,g2:ie.negate()}]);return i.eql(k,i.ONE)}function X(Z){if(!Z.length)throw new Error("Expected non-empty array");const N=Z.map(D).reduce((fe,he)=>fe.add(he),l.ProjectivePoint.ZERO);return Z[0]instanceof l.ProjectivePoint?(N.assertValidity(),N):N.toRawBytes(!0)}function ae(Z){if(!Z.length)throw new Error("Expected non-empty array");const N=Z.map(U).reduce((fe,he)=>fe.add(he),f.ProjectivePoint.ZERO);return Z[0]instanceof f.ProjectivePoint?(N.assertValidity(),N):A.toRawBytes(N)}function ce(Z){if(!Z.length)throw new Error("Expected non-empty array");const N=Z.map(D).reduce((fe,he)=>fe.add(he),l.ProjectivePoint.ZERO);return Z[0]instanceof l.ProjectivePoint?(N.assertValidity(),N):O.toRawBytes(N)}function re(Z,le,N,fe){if(!le.length)throw new Error("Expected non-empty messages array");if(N.length!==le.length)throw new Error("Pubkey count should equal msg count");const he=U(Z),pe=le.map(M=>W(M,fe)),ie=N.map(D),J=new Map;for(let M=0;M<ie.length;M++){const K=ie[M],te=pe[M];let Q=J.get(te);Q===void 0&&(Q=[],J.set(te,Q)),Q.push(K)}const k=[];try{for(const[M,K]of J){const te=K.reduce((Q,ee)=>Q.add(ee));k.push({g1:te,g2:M})}return k.push({g1:l.ProjectivePoint.BASE.negate(),g2:he}),i.eql(S(k),i.ONE)}catch{return!1}}return l.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:H,getPublicKeyForShortSignatures:R,sign:I,signShortSignature:G,verify:V,verifyBatch:re,verifyShortSignature:$,aggregatePublicKeys:X,aggregateSignatures:ae,aggregateShortSignatures:ce,millerLoopBatch:E,pairing:B,pairingBatch:S,G1:l,G2:f,Signature:A,ShortSignature:O,fields:{Fr:r,Fp:e,Fp2:n,Fp6:a,Fp12:i},params:{ateLoopSize:t.params.ateLoopSize,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const im=BigInt(0),Na=BigInt(1),jr=BigInt(2),hf=BigInt(3);function Du(t,e,r,n,a=1,i){const s=BigInt(i===void 0?n:i),o=r**BigInt(n),u=[];for(let l=0;l<a;l++){const c=BigInt(l+1),f=[];for(let h=0,v=Na;h<n;h++){const d=(c*v-c)/s%o;f.push(t.pow(e,d)),v*=r}u.push(f)}return u}function sm(t,e,r){const n=e.pow(r,(t.ORDER-Na)/hf),a=e.pow(r,(t.ORDER-Na)/jr);function i(h,v){const d=e.mul(e.frobeniusMap(h,1),n),b=e.mul(e.frobeniusMap(v,1),a);return[d,b]}const s=e.pow(r,(t.ORDER**jr-Na)/hf),o=e.pow(r,(t.ORDER**jr-Na)/jr);if(!e.eql(o,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function u(h,v){return[e.mul(h,s),e.neg(v)]}const l=h=>(v,d)=>{const b=d.toAffine(),y=h(b.x,b.y);return v.fromAffine({x:y[0],y:y[1]})},c=l(i),f=l(u);return{psi:i,psi2:u,G2psi:c,G2psi2:f,PSI_X:n,PSI_Y:a,PSI2_X:s,PSI2_Y:o}}function om(t){const{ORDER:e}=t,r=ts(e),n=r.create(t.NONRESIDUE||BigInt(-1)),a=Ky(e),i=r.div(r.ONE,jr),s=Du(r,n,r.ORDER,2)[0],o=({c0:R,c1:I},{c0:G,c1:V})=>({c0:r.add(R,G),c1:r.add(I,V)}),u=({c0:R,c1:I},{c0:G,c1:V})=>({c0:r.sub(R,G),c1:r.sub(I,V)}),l=({c0:R,c1:I},G)=>{if(typeof G=="bigint")return{c0:r.mul(R,G),c1:r.mul(I,G)};const{c0:V,c1:$}=G;let X=r.mul(R,V),ae=r.mul(I,$);const ce=r.sub(X,ae),re=r.sub(r.mul(r.add(R,I),r.add(V,$)),r.add(X,ae));return{c0:ce,c1:re}},c=({c0:R,c1:I})=>{const G=r.add(R,I),V=r.sub(R,I),$=r.add(R,R);return{c0:r.mul(G,V),c1:r.mul($,I)}},f=R=>{if(R.length!==2)throw new Error("Invalid tuple");const I=R.map(G=>r.create(G));return{c0:I[0],c1:I[1]}},h=e*e,v=f(t.FP2_NONRESIDUE),d={ORDER:h,NONRESIDUE:v,BITS:Ti(h),BYTES:Math.ceil(Ti(h)/8),MASK:Gs(Ti(h)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:R=>R,isValid:({c0:R,c1:I})=>typeof R=="bigint"&&typeof I=="bigint",is0:({c0:R,c1:I})=>r.is0(R)&&r.is0(I),eql:({c0:R,c1:I},{c0:G,c1:V})=>r.eql(R,G)&&r.eql(I,V),neg:({c0:R,c1:I})=>({c0:r.neg(R),c1:r.neg(I)}),pow:(R,I)=>Hs(d,R,I),invertBatch:R=>Ws(d,R),add:o,sub:u,mul:l,sqr:c,addN:o,subN:u,mulN:l,sqrN:c,div:(R,I)=>d.mul(R,typeof I=="bigint"?r.inv(r.create(I)):d.inv(I)),inv:({c0:R,c1:I})=>{const G=r.inv(r.create(R*R+I*I));return{c0:r.mul(G,r.create(R)),c1:r.mul(G,r.create(-I))}},sqrt:R=>{if(t.Fp2sqrt)return t.Fp2sqrt(R);const{c0:I,c1:G}=R;if(r.is0(G))return r.eql(a(r,I),r.ONE)?d.create({c0:r.sqrt(I),c1:r.ZERO}):d.create({c0:r.ZERO,c1:r.sqrt(r.div(I,n))});const V=r.sqrt(r.sub(r.sqr(I),r.mul(r.sqr(G),n)));let $=r.mul(r.add(V,I),i);const X=a(r,$);!r.is0(X)&&!r.eql(X,r.ONE)&&($=r.sub($,V));const ae=r.sqrt($),ce=d.create({c0:ae,c1:r.div(r.mul(G,i),ae)});if(!d.eql(d.sqr(ce),R))throw new Error("Cannot find square root");const re=ce,Z=d.neg(re),{re:le,im:N}=d.reim(re),{re:fe,im:he}=d.reim(Z);return N>he||N===he&&le>fe?re:Z},isOdd:R=>{const{re:I,im:G}=d.reim(R),V=I%jr,$=I===im,X=G%jr;return BigInt(V||$&&X)==Na},fromBytes(R){if(R.length!==d.BYTES)throw new Error(`fromBytes wrong length=${R.length}`);return{c0:r.fromBytes(R.subarray(0,r.BYTES)),c1:r.fromBytes(R.subarray(r.BYTES))}},toBytes:({c0:R,c1:I})=>ht(r.toBytes(R),r.toBytes(I)),cmov:({c0:R,c1:I},{c0:G,c1:V},$)=>({c0:r.cmov(R,G,$),c1:r.cmov(I,V,$)}),reim:({c0:R,c1:I})=>({re:R,im:I}),mulByNonresidue:({c0:R,c1:I})=>d.mul({c0:R,c1:I},v),mulByB:t.Fp2mulByB,fromBigTuple:f,frobeniusMap:({c0:R,c1:I},G)=>({c0:R,c1:r.mul(I,s[G%2])})},b=({c0:R,c1:I,c2:G},{c0:V,c1:$,c2:X})=>({c0:d.add(R,V),c1:d.add(I,$),c2:d.add(G,X)}),y=({c0:R,c1:I,c2:G},{c0:V,c1:$,c2:X})=>({c0:d.sub(R,V),c1:d.sub(I,$),c2:d.sub(G,X)}),m=({c0:R,c1:I,c2:G},V)=>{if(typeof V=="bigint")return{c0:d.mul(R,V),c1:d.mul(I,V),c2:d.mul(G,V)};const{c0:$,c1:X,c2:ae}=V,ce=d.mul(R,$),re=d.mul(I,X),Z=d.mul(G,ae);return{c0:d.add(ce,d.mulByNonresidue(d.sub(d.mul(d.add(I,G),d.add(X,ae)),d.add(re,Z)))),c1:d.add(d.sub(d.mul(d.add(R,I),d.add($,X)),d.add(ce,re)),d.mulByNonresidue(Z)),c2:d.sub(d.add(re,d.mul(d.add(R,G),d.add($,ae))),d.add(ce,Z))}},E=({c0:R,c1:I,c2:G})=>{let V=d.sqr(R),$=d.mul(d.mul(R,I),jr),X=d.mul(d.mul(I,G),jr),ae=d.sqr(G);return{c0:d.add(d.mulByNonresidue(X),V),c1:d.add(d.mulByNonresidue(ae),$),c2:d.sub(d.sub(d.add(d.add($,d.sqr(d.add(d.sub(R,I),G))),X),V),ae)}},[S,B]=Du(d,v,r.ORDER,6,2,3),C={ORDER:d.ORDER,BITS:3*d.BITS,BYTES:3*d.BYTES,MASK:Gs(3*d.BITS),ZERO:{c0:d.ZERO,c1:d.ZERO,c2:d.ZERO},ONE:{c0:d.ONE,c1:d.ZERO,c2:d.ZERO},create:R=>R,isValid:({c0:R,c1:I,c2:G})=>d.isValid(R)&&d.isValid(I)&&d.isValid(G),is0:({c0:R,c1:I,c2:G})=>d.is0(R)&&d.is0(I)&&d.is0(G),neg:({c0:R,c1:I,c2:G})=>({c0:d.neg(R),c1:d.neg(I),c2:d.neg(G)}),eql:({c0:R,c1:I,c2:G},{c0:V,c1:$,c2:X})=>d.eql(R,V)&&d.eql(I,$)&&d.eql(G,X),sqrt:rf,div:(R,I)=>C.mul(R,typeof I=="bigint"?r.inv(r.create(I)):C.inv(I)),pow:(R,I)=>Hs(C,R,I),invertBatch:R=>Ws(C,R),add:b,sub:y,mul:m,sqr:E,addN:b,subN:y,mulN:m,sqrN:E,inv:({c0:R,c1:I,c2:G})=>{let V=d.sub(d.sqr(R),d.mulByNonresidue(d.mul(G,I))),$=d.sub(d.mulByNonresidue(d.sqr(G)),d.mul(R,I)),X=d.sub(d.sqr(I),d.mul(R,G)),ae=d.inv(d.add(d.mulByNonresidue(d.add(d.mul(G,$),d.mul(I,X))),d.mul(R,V)));return{c0:d.mul(ae,V),c1:d.mul(ae,$),c2:d.mul(ae,X)}},fromBytes:R=>{if(R.length!==C.BYTES)throw new Error(`fromBytes wrong length=${R.length}`);return{c0:d.fromBytes(R.subarray(0,d.BYTES)),c1:d.fromBytes(R.subarray(d.BYTES,2*d.BYTES)),c2:d.fromBytes(R.subarray(2*d.BYTES))}},toBytes:({c0:R,c1:I,c2:G})=>ht(d.toBytes(R),d.toBytes(I),d.toBytes(G)),cmov:({c0:R,c1:I,c2:G},{c0:V,c1:$,c2:X},ae)=>({c0:d.cmov(R,V,ae),c1:d.cmov(I,$,ae),c2:d.cmov(G,X,ae)}),fromBigSix:R=>{if(!Array.isArray(R)||R.length!==6)throw new Error("Invalid Fp6 usage");return{c0:d.fromBigTuple(R.slice(0,2)),c1:d.fromBigTuple(R.slice(2,4)),c2:d.fromBigTuple(R.slice(4,6))}},frobeniusMap:({c0:R,c1:I,c2:G},V)=>({c0:d.frobeniusMap(R,V),c1:d.mul(d.frobeniusMap(I,V),S[V%6]),c2:d.mul(d.frobeniusMap(G,V),B[V%6])}),mulByFp2:({c0:R,c1:I,c2:G},V)=>({c0:d.mul(R,V),c1:d.mul(I,V),c2:d.mul(G,V)}),mulByNonresidue:({c0:R,c1:I,c2:G})=>({c0:d.mulByNonresidue(G),c1:R,c2:I}),mul1:({c0:R,c1:I,c2:G},V)=>({c0:d.mulByNonresidue(d.mul(G,V)),c1:d.mul(R,V),c2:d.mul(I,V)}),mul01({c0:R,c1:I,c2:G},V,$){let X=d.mul(R,V),ae=d.mul(I,$);return{c0:d.add(d.mulByNonresidue(d.sub(d.mul(d.add(I,G),$),ae)),X),c1:d.sub(d.sub(d.mul(d.add(V,$),d.add(R,I)),X),ae),c2:d.add(d.sub(d.mul(d.add(R,G),V),X),ae)}}},O=Du(d,v,r.ORDER,12,1,6)[0],A=({c0:R,c1:I},{c0:G,c1:V})=>({c0:C.add(R,G),c1:C.add(I,V)}),D=({c0:R,c1:I},{c0:G,c1:V})=>({c0:C.sub(R,G),c1:C.sub(I,V)}),F=({c0:R,c1:I},G)=>{if(typeof G=="bigint")return{c0:C.mul(R,G),c1:C.mul(I,G)};let{c0:V,c1:$}=G,X=C.mul(R,V),ae=C.mul(I,$);return{c0:C.add(X,C.mulByNonresidue(ae)),c1:C.sub(C.mul(C.add(R,I),C.add(V,$)),C.add(X,ae))}},U=({c0:R,c1:I})=>{let G=C.mul(R,I);return{c0:C.sub(C.sub(C.mul(C.add(C.mulByNonresidue(I),R),C.add(R,I)),G),C.mulByNonresidue(G)),c1:C.add(G,G)}};function W(R,I){const G=d.sqr(R),V=d.sqr(I);return{first:d.add(d.mulByNonresidue(V),G),second:d.sub(d.sub(d.sqr(d.add(R,I)),G),V)}}const H={ORDER:d.ORDER,BITS:2*d.BITS,BYTES:2*d.BYTES,MASK:Gs(2*d.BITS),ZERO:{c0:C.ZERO,c1:C.ZERO},ONE:{c0:C.ONE,c1:C.ZERO},create:R=>R,isValid:({c0:R,c1:I})=>C.isValid(R)&&C.isValid(I),is0:({c0:R,c1:I})=>C.is0(R)&&C.is0(I),neg:({c0:R,c1:I})=>({c0:C.neg(R),c1:C.neg(I)}),eql:({c0:R,c1:I},{c0:G,c1:V})=>C.eql(R,G)&&C.eql(I,V),sqrt:rf,inv:({c0:R,c1:I})=>{let G=C.inv(C.sub(C.sqr(R),C.mulByNonresidue(C.sqr(I))));return{c0:C.mul(R,G),c1:C.neg(C.mul(I,G))}},div:(R,I)=>H.mul(R,typeof I=="bigint"?r.inv(r.create(I)):H.inv(I)),pow:(R,I)=>Hs(H,R,I),invertBatch:R=>Ws(H,R),add:A,sub:D,mul:F,sqr:U,addN:A,subN:D,mulN:F,sqrN:U,fromBytes:R=>{if(R.length!==H.BYTES)throw new Error(`fromBytes wrong length=${R.length}`);return{c0:C.fromBytes(R.subarray(0,C.BYTES)),c1:C.fromBytes(R.subarray(C.BYTES))}},toBytes:({c0:R,c1:I})=>ht(C.toBytes(R),C.toBytes(I)),cmov:({c0:R,c1:I},{c0:G,c1:V},$)=>({c0:C.cmov(R,G,$),c1:C.cmov(I,V,$)}),fromBigTwelve:R=>({c0:C.fromBigSix(R.slice(0,6)),c1:C.fromBigSix(R.slice(6,12))}),frobeniusMap(R,I){const{c0:G,c1:V,c2:$}=C.frobeniusMap(R.c1,I),X=O[I%12];return{c0:C.frobeniusMap(R.c0,I),c1:C.create({c0:d.mul(G,X),c1:d.mul(V,X),c2:d.mul($,X)})}},mulByFp2:({c0:R,c1:I},G)=>({c0:C.mulByFp2(R,G),c1:C.mulByFp2(I,G)}),conjugate:({c0:R,c1:I})=>({c0:R,c1:C.neg(I)}),mul014:({c0:R,c1:I},G,V,$)=>{let X=C.mul01(R,G,V),ae=C.mul1(I,$);return{c0:C.add(C.mulByNonresidue(ae),X),c1:C.sub(C.sub(C.mul01(C.add(I,R),G,d.add(V,$)),X),ae)}},mul034:({c0:R,c1:I},G,V,$)=>{const X=C.create({c0:d.mul(R.c0,G),c1:d.mul(R.c1,G),c2:d.mul(R.c2,G)}),ae=C.mul01(I,V,$),ce=C.mul01(C.add(R,I),d.add(G,V),$);return{c0:C.add(C.mulByNonresidue(ae),X),c1:C.sub(ce,C.add(X,ae))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:r,Fp2:d,Fp6:C,Fp4Square:W,Fp12:H}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yt=BigInt(0),_o=BigInt(1),_t=BigInt(2),bs=BigInt(3),_i=BigInt(4),bn=BigInt("0xd201000000010000"),um=Ti(bn),{Fp:Te,Fp2:_e,Fp6:pl,Fp4Square:Uu,Fp12:Oe}=om({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[_o,_o],Fp2mulByB:({c0:t,c1:e})=>{const r=Te.mul(t,_i),n=Te.mul(e,_i);return{c0:Te.sub(r,n),c1:Te.add(r,n)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:r,c1:n,c2:a}=t,{c0:i,c1:s,c2:o}=e,{first:u,second:l}=Uu(r,s),{first:c,second:f}=Uu(i,a),{first:h,second:v}=Uu(n,o),d=_e.mulByNonresidue(v);return{c0:pl.create({c0:_e.add(_e.mul(_e.sub(u,r),_t),u),c1:_e.add(_e.mul(_e.sub(c,n),_t),c),c2:_e.add(_e.mul(_e.sub(h,a),_t),h)}),c1:pl.create({c0:_e.add(_e.mul(_e.add(d,i),_t),d),c1:_e.add(_e.mul(_e.add(l,s),_t),l),c2:_e.add(_e.mul(_e.add(f,o),_t),f)})}},Fp12cyclotomicExp(t,e){let r=Oe.ONE;for(let n=um-1;n>=0;n--)r=Oe._cyclotomicSquare(r),Ly(e,n)&&(r=Oe.mul(r,t));return r},Fp12finalExponentiate:t=>{const e=bn,r=Oe.div(Oe.frobeniusMap(t,6),t),n=Oe.mul(Oe.frobeniusMap(r,2),r),a=Oe.conjugate(Oe._cyclotomicExp(n,e)),i=Oe.mul(Oe.conjugate(Oe._cyclotomicSquare(n)),a),s=Oe.conjugate(Oe._cyclotomicExp(i,e)),o=Oe.conjugate(Oe._cyclotomicExp(s,e)),u=Oe.mul(Oe.conjugate(Oe._cyclotomicExp(o,e)),Oe._cyclotomicSquare(a)),l=Oe.conjugate(Oe._cyclotomicExp(u,e)),c=Oe.frobeniusMap(Oe.mul(a,o),2),f=Oe.frobeniusMap(Oe.mul(s,n),3),h=Oe.frobeniusMap(Oe.mul(u,Oe.conjugate(n)),1),v=Oe.mul(Oe.mul(l,Oe.conjugate(i)),n);return Oe.mul(Oe.mul(Oe.mul(c,f),h),v)}}),vf=ts(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),lm=xv(_e,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>_e.fromBigTuple(e.map(BigInt))))),cm=xv(Te,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),fm=_v(_e,{A:_e.create({c0:Te.create(Yt),c1:Te.create(BigInt(240))}),B:_e.create({c0:Te.create(BigInt(1012)),c1:Te.create(BigInt(1012))}),Z:_e.create({c0:Te.create(BigInt(-2)),c1:Te.create(BigInt(-1))})}),dm=_v(Te,{A:Te.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:Te.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:Te.create(BigInt(11))}),{G2psi:pf,G2psi2:hm}=sm(Te,_e,_e.div(_e.ONE,_e.NONRESIDUE)),Lu=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:Te.ORDER,m:2,k:128,expand:"xmd",hash:Kl}),Bo=Mi(Te.toBytes(Yt),{infinity:!0,compressed:!0});function ws(t){t=t.slice();const e=t[0]&224,r=!!(e>>7&1),n=!!(e>>6&1),a=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:a,value:t}}function Mi(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function gf(t){t.assertValidity();const e=t.equals(fr.G1.ProjectivePoint.ZERO),{x:r,y:n}=t.toAffine();if(e)return Bo.slice();const a=Te.ORDER,i=!!(n*_t/a);return Mi(Nt(r,Te.BYTES),{compressed:!0,sort:i})}function yf(t){t.assertValidity();const e=Te.BYTES;if(t.equals(fr.G2.ProjectivePoint.ZERO))return ht(Bo,Nt(Yt,e));const{x:r,y:n}=t.toAffine(),{re:a,im:i}=_e.reim(r),{re:s,im:o}=_e.reim(n),l=!!((o>Yt?o*_t:s*_t)/Te.ORDER&_o),c=a;return ht(Mi(Nt(i,e),{sort:l,compressed:!0}),Nt(c,e))}const fr=am({fields:{Fp:Te,Fp2:_e,Fp6:pl,Fp12:Oe,Fr:vf},G1:{Fp:Te,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:Te.ZERO,b:_i,htfDefaults:{...Lu,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(Te.mul(e.px,r),e.py,e.pz);return e.multiplyUnsafe(bn).negate().multiplyUnsafe(bn).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(bn).add(e),mapToCurve:t=>{const{x:e,y:r}=dm(Te.create(t[0]));return cm(e,r)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:a}=ws(t);if(a.length===48&&e){const i=Te.ORDER,s=Er(a),o=Te.create(s&Te.MASK);if(r){if(o!==Yt)throw new Error("G1: non-empty compressed point at infinity");return{x:Yt,y:Yt}}const u=Te.add(Te.pow(o,bs),Te.create(fr.params.G1b));let l=Te.sqrt(u);if(!l)throw new Error("Invalid compressed G1 point");return l*_t/i!==BigInt(n)&&(l=Te.neg(l)),{x:Te.create(o),y:Te.create(l)}}else if(a.length===96&&!e){const i=Er(a.subarray(0,Te.BYTES)),s=Er(a.subarray(Te.BYTES));if(r){if(i!==Yt||s!==Yt)throw new Error("G1: non-empty point at infinity");return fr.G1.ProjectivePoint.ZERO.toAffine()}return{x:Te.create(i),y:Te.create(s)}}else throw new Error("Invalid point G1, expected 48/96 bytes")},toBytes:(t,e,r)=>{const n=e.equals(t.ZERO),{x:a,y:i}=e.toAffine();if(r){if(n)return Bo.slice();const s=Te.ORDER,o=!!(i*_t/s);return Mi(Nt(a,Te.BYTES),{compressed:!0,sort:o})}else return n?ht(new Uint8Array([64]),new Uint8Array(2*Te.BYTES-1)):ht(Nt(a,Te.BYTES),Nt(i,Te.BYTES))},ShortSignature:{fromHex(t){const{infinity:e,sort:r,value:n}=ws(Qt("signatureHex",t,48)),a=Te.ORDER,i=Er(n);if(e)return fr.G1.ProjectivePoint.ZERO;const s=Te.create(i&Te.MASK),o=Te.add(Te.pow(s,bs),Te.create(fr.params.G1b));let u=Te.sqrt(o);if(!u)throw new Error("Invalid compressed G1 point");const l=BigInt(r);u*_t/a!==l&&(u=Te.neg(u));const c=fr.G1.ProjectivePoint.fromAffine({x:s,y:u});return c.assertValidity(),c},toRawBytes(t){return gf(t)},toHex(t){return aa(gf(t))}}},G2:{Fp:_e,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:_e.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:_e.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:_e.ZERO,b:_e.fromBigTuple([_i,_i]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Lu},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:t=>{const{x:e,y:r}=fm(_e.fromBigTuple(t));return lm(e,r)},isTorsionFree:(t,e)=>e.multiplyUnsafe(bn).negate().equals(pf(t,e)),clearCofactor:(t,e)=>{const r=bn;let n=e.multiplyUnsafe(r).negate(),a=pf(t,e),i=e.double();return i=hm(t,i),i=i.subtract(a),a=n.add(a),a=a.multiplyUnsafe(r).negate(),i=i.add(a),i=i.subtract(n),i.subtract(e)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:a}=ws(t);if(!e&&!r&&n||!e&&r&&n||n&&r&&e)throw new Error("Invalid encoding flag: "+(t[0]&224));const i=Te.BYTES,s=(o,u,l)=>Er(o.slice(u,l));if(a.length===96&&e){const o=fr.params.G2b,u=Te.ORDER;if(r){if(a.reduce((b,y)=>b!==0?y+1:y,0)>0)throw new Error("Invalid compressed G2 point");return{x:_e.ZERO,y:_e.ZERO}}const l=s(a,0,i),c=s(a,i,2*i),f=_e.create({c0:Te.create(c),c1:Te.create(l)}),h=_e.add(_e.pow(f,bs),o);let v=_e.sqrt(h);const d=v.c1===Yt?v.c0*_t/u:v.c1*_t/u?_o:Yt;return v=n&&d>0?v:_e.neg(v),{x:f,y:v}}else if(a.length===192&&!e){if(r){if(a.reduce((f,h)=>f!==0?h+1:h,0)>0)throw new Error("Invalid uncompressed G2 point");return{x:_e.ZERO,y:_e.ZERO}}const o=s(a,0,i),u=s(a,i,2*i),l=s(a,2*i,3*i),c=s(a,3*i,4*i);return{x:_e.fromBigTuple([u,o]),y:_e.fromBigTuple([c,l])}}else throw new Error("Invalid point G2, expected 96/192 bytes")},toBytes:(t,e,r)=>{const{BYTES:n,ORDER:a}=Te,i=e.equals(t.ZERO),{x:s,y:o}=e.toAffine();if(r){if(i)return ht(Bo,Nt(Yt,n));const u=!!(o.c1===Yt?o.c0*_t/a:o.c1*_t/a);return ht(Mi(Nt(s.c1,n),{compressed:!0,sort:u}),Nt(s.c0,n))}else{if(i)return ht(new Uint8Array([64]),new Uint8Array(4*n-1));const{re:u,im:l}=_e.reim(s),{re:c,im:f}=_e.reim(o);return ht(Nt(l,n),Nt(u,n),Nt(f,n),Nt(c,n))}},Signature:{fromHex(t){const{infinity:e,sort:r,value:n}=ws(Qt("signatureHex",t)),a=Te.ORDER,i=n.length/2;if(i!==48&&i!==96)throw new Error("Invalid compressed signature length, must be 96 or 192");const s=Er(n.slice(0,i)),o=Er(n.slice(i));if(e)return fr.G2.ProjectivePoint.ZERO;const u=Te.create(s&Te.MASK),l=Te.create(o),c=_e.create({c0:l,c1:u}),f=_e.add(_e.pow(c,bs),fr.params.G2b);let h=_e.sqrt(f);if(!h)throw new Error("Failed to find a square root");const{re:v,im:d}=_e.reim(h),b=BigInt(r),y=d>Yt&&d*_t/a!==b,m=d===Yt&&v*_t/a!==b;(y||m)&&(h=_e.neg(h));const E=fr.G2.ProjectivePoint.fromAffine({x:c,y:h});return E.assertValidity(),E},toRawBytes(t){return yf(t)},toHex(t){return aa(yf(t))}}},params:{ateLoopSize:bn,r:vf.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:Lu,hash:Kl,randomBytes:Jd});function vm(t,e,r){const n=typeof t=="string"?t:Br(t),a=typeof e=="string"?e:Br(e),i=typeof r=="string"?r:Br(r);return fr.verifyShortSignature(a,i,n)}const Bv=t=>Tt(new Za(t)),ic=t=>{const e=Bv(t);return new Date(Number(e)/1e6)};class Ur extends Jt{constructor(e){super(`Invalid certificate: ${e}`)}}var rr;(function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"})(rr||(rr={}));function pm(t,e){const r=new Uint8Array(t),n=new Uint8Array(e);for(let a=0;a<r.length;a++)if(r[a]>n[a])return!0;return!1}class Oa{constructor(e,r,n,a,i=5){this._rootKey=r,this._canisterId=n,this._blsVerify=a,this._maxAgeInMinutes=i,this.cert=tn(new Uint8Array(e))}static async create(e){const r=Oa.createUnverified(e);return await r.verify(),r}static createUnverified(e){let r=e.blsVerify;return r||(r=vm),new Oa(e.certificate,e.rootKey,e.canisterId,r,e.maxAgeInMinutes)}lookup(e){return Ga(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){const e=await Ks(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,a=ym(r),i=Gr(vi("ic-state-root"),e);let s=!1;const o=Qn(this.lookup(["time"]));if(!o)throw new Ur("Certificate does not contain a time");const u=5*60*1e3,l=this._maxAgeInMinutes*60*1e3,c=Date.now(),f=c-l,h=c+u,v=ic(o);if(v.getTime()<f)throw new Ur(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+v.toISOString()+" Current time: "+new Date(c).toISOString());if(v.getTime()>h)throw new Ur("Certificate is signed more than 5 minutes in the future. Certificate time: "+v.toISOString()+" Current time: "+new Date(c).toISOString());try{s=await this._blsVerify(new Uint8Array(a),new Uint8Array(n),new Uint8Array(i))}catch{s=!1}if(!s)throw new Ur("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const r=await Oa.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new Ur("Delegation certificates cannot be nested");if(await r.verify(),!Av({canisterId:this._canisterId,subnetId:Me.fromUint8Array(new Uint8Array(e.subnet_id)),tree:r.cert.tree}))throw new Ur(`Canister ${this._canisterId} not in range of delegations for subnet 0x${Br(e.subnet_id)}`);const a=Qn(r.lookup(["subnet",e.subnet_id,"public_key"]));if(!a)throw new Error(`Could not find subnet key for subnet 0x${Br(e.subnet_id)}`);return a}}const ui=xo("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),gm=96;function ym(t){const e=ui.byteLength+gm;if(t.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const r=t.slice(0,ui.byteLength);if(!ec(r,ui))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${ui}, but get ${r}`);return t.slice(ui.byteLength)}function Qn(t){if(t.status===gt.Found){if(t.value instanceof ArrayBuffer)return t.value;if(t.value instanceof Uint8Array)return t.value.buffer}}async function Ks(t){switch(t[0]){case rr.Empty:return _r(vi("ic-hashtree-empty"));case rr.Pruned:return t[1];case rr.Leaf:return _r(Gr(vi("ic-hashtree-leaf"),t[1]));case rr.Labeled:return _r(Gr(vi("ic-hashtree-labeled"),t[1],await Ks(t[2])));case rr.Fork:return _r(Gr(vi("ic-hashtree-fork"),await Ks(t[1]),await Ks(t[2])));default:throw new Error("unreachable")}}function vi(t){const e=new Uint8Array([t.length]),r=new TextEncoder().encode(t);return Gr(e,r)}var gt;(function(t){t.Unknown="unknown",t.Absent="absent",t.Found="found"})(gt||(gt={}));var Jr;(function(t){t.Less="less",t.Greater="greater"})(Jr||(Jr={}));function Ga(t,e){if(t.length===0)switch(e[0]){case rr.Leaf:{if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:gt.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:gt.Found,value:e[1].buffer}:{status:gt.Found,value:e[1]}}default:return{status:gt.Found,value:e}}const r=typeof t[0]=="string"?new TextEncoder().encode(t[0]):t[0],n=Ys(r,e);switch(n.status){case gt.Found:return Ga(t.slice(1),n.value);case Jr.Greater:case Jr.Less:return{status:gt.Absent};default:return n}}function gl(t){switch(t[0]){case rr.Empty:return[];case rr.Fork:return gl(t[1]).concat(gl(t[2]));default:return[t]}}function Ys(t,e){switch(e[0]){case rr.Labeled:return pm(t,e[1])?{status:Jr.Greater}:ec(t,e[1])?{status:gt.Found,value:e[2]}:{status:Jr.Less};case rr.Fork:const r=Ys(t,e[1]);switch(r.status){case Jr.Greater:{const n=Ys(t,e[2]);return n.status===Jr.Less?{status:gt.Absent}:n}case gt.Unknown:{let n=Ys(t,e[2]);return n.status===Jr.Less?{status:gt.Unknown}:n}default:return r}case rr.Pruned:return{status:gt.Unknown};default:return{status:gt.Absent}}}function Av(t){const{canisterId:e,subnetId:r,tree:n}=t,a=Ga(["subnet",r.toUint8Array(),"canister_ranges"],n);if(a.status!==gt.Found||!(a.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return tn(a.value).map(u=>[Me.fromUint8Array(u[0]),Me.fromUint8Array(u[1])]).some(u=>u[0].ltEq(e)&&u[1].gtEq(e))}class mm{constructor(e,r,n){this.key=e,this.path=r,this.decodeStrategy=n}}const Cv=async t=>{const{agent:e,paths:r}=t,n=Me.from(t.canisterId),a=[...new Set(r)],i=a.map(u=>yl(u,n)),s=new Map,o=a.map((u,l)=>(async()=>{var c;try{const f=await e.readState(n,{paths:[i[l]]}),h=await Oa.create({certificate:f.certificate,rootKey:e.rootKey,canisterId:n}),v=(y,m)=>{if(m==="subnet"){const E=Iv(f.certificate,n,e.rootKey);return{path:m,data:E}}else return{path:m,data:Qn(y.lookup(yl(m,n)))}},{path:d,data:b}=v(h,a[l]);if(!b)console.warn(`Expected to find result for path ${d}, but instead found nothing.`),typeof d=="string"?s.set(d,null):s.set(d.key,null);else switch(d){case"time":{s.set(d,ic(b));break}case"controllers":{s.set(d,wm(b));break}case"module_hash":{s.set(d,mf(b));break}case"subnet":{s.set(d,b);break}case"candid":{s.set(d,new TextDecoder().decode(b));break}default:if(typeof d!="string"&&"key"in d&&"path"in d)switch(d.decodeStrategy){case"raw":s.set(d.key,b);break;case"leb128":{s.set(d.key,Bv(b));break}case"cbor":{s.set(d.key,Nv(b));break}case"hex":{s.set(d.key,mf(b));break}case"utf-8":s.set(d.key,bm(b))}}}catch(f){if(!((c=f==null?void 0:f.message)===null||c===void 0)&&c.includes("Invalid certificate"))throw new Jt(f.message);typeof u!="string"&&"key"in u&&"path"in u?s.set(u.key,null):s.set(u,null),console.group(),console.warn(`Expected to find result for path ${u}, but instead found nothing.`),console.warn(f),console.groupEnd()}})());return await Promise.all(o),s},Iv=(t,e,r)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const n=tn(new Uint8Array(t)),a=n.tree;let i=n.delegation,s;if(i&&i.subnet_id?s=Me.fromUint8Array(new Uint8Array(i.subnet_id)):!i&&typeof r<"u"?(s=Me.selfAuthenticating(new Uint8Array(r)),i={subnet_id:s.toUint8Array(),certificate:new ArrayBuffer(0)}):(s=Me.selfAuthenticating(Me.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),i={subnet_id:s.toUint8Array(),certificate:new ArrayBuffer(0)}),!Av({canisterId:e,subnetId:s,tree:a}))throw new Error("Canister not in range");const u=Ga(["subnet",i.subnet_id,"node"],a);if(u.status!==gt.Found)throw new Error("Node not found");if(u.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const l=gl(u.value),c=new Map;return l.forEach(f=>{const h=Me.from(new Uint8Array(f[1])).toText(),v=Ga(["public_key"],f[2]);if(v.status!==gt.Found)throw new Error("Public key not found");const d=v.value;if(d.byteLength!==44)throw new Error("Invalid public key length");c.set(h,d)}),{subnetId:Me.fromUint8Array(new Uint8Array(i.subnet_id)).toText(),nodeKeys:c}},yl=(t,e)=>{const r=new TextEncoder,n=i=>new DataView(r.encode(i).buffer).buffer,a=new DataView(e.toUint8Array().buffer).buffer;switch(t){case"time":return[n("time")];case"controllers":return[n("canister"),a,n("controllers")];case"module_hash":return[n("canister"),a,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),a,n("metadata"),n("candid:service")];default:if("key"in t&&"path"in t)if(typeof t.path=="string"||t.path instanceof ArrayBuffer){const i=t.path,s=typeof i=="string"?n(i):i;return[n("canister"),a,n("metadata"),s]}else return t.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${t} was formatted correctly.`)},mf=t=>Br(t),Nv=t=>tn(t),bm=t=>new TextDecoder().decode(t),wm=t=>Nv(t).map(r=>Me.fromUint8Array(new Uint8Array(r))),xm=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:mm,encodePath:yl,fetchNodeKeys:Iv,request:Cv},Symbol.toStringTag,{value:"Module"})),xs=BigInt(2**32-1),ml=BigInt(32);function Rv(t,e=!1){return e?{h:Number(t&xs),l:Number(t>>ml&xs)}:{h:Number(t>>ml&xs)|0,l:Number(t&xs)|0}}function Em(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let a=0;a<t.length;a++){const{h:i,l:s}=Rv(t[a],e);[r[a],n[a]]=[i,s]}return[r,n]}const Sm=(t,e)=>BigInt(t>>>0)<<ml|BigInt(e>>>0),Tm=(t,e,r)=>t>>>r,_m=(t,e,r)=>t<<32-r|e>>>r,Bm=(t,e,r)=>t>>>r|e<<32-r,Am=(t,e,r)=>t<<32-r|e>>>r,Cm=(t,e,r)=>t<<64-r|e>>>r-32,Im=(t,e,r)=>t>>>r-32|e<<64-r,Nm=(t,e)=>e,Rm=(t,e)=>t,km=(t,e,r)=>t<<r|e>>>32-r,Pm=(t,e,r)=>e<<r|t>>>32-r,Om=(t,e,r)=>e<<r-32|t>>>64-r,Mm=(t,e,r)=>t<<r-32|e>>>64-r;function Fm(t,e,r,n){const a=(e>>>0)+(n>>>0);return{h:t+r+(a/2**32|0)|0,l:a|0}}const Dm=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Um=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Lm=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),$m=(t,e,r,n,a)=>e+r+n+a+(t/2**32|0)|0,zm=(t,e,r,n,a)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(a>>>0),Vm=(t,e,r,n,a,i)=>e+r+n+a+i+(t/2**32|0)|0,qm={fromBig:Rv,split:Em,toBig:Sm,shrSH:Tm,shrSL:_m,rotrSH:Bm,rotrSL:Am,rotrBH:Cm,rotrBL:Im,rotr32H:Nm,rotr32L:Rm,rotlSH:km,rotlSL:Pm,rotlBH:Om,rotlBL:Mm,add:Fm,add3L:Dm,add3H:Um,add4L:Lm,add4H:$m,add5H:Vm,add5L:zm},Re=qm,[Gm,Hm]=(()=>Re.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),hn=new Uint32Array(80),vn=new Uint32Array(80);class Wm extends eh{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:a,Ch:i,Cl:s,Dh:o,Dl:u,Eh:l,El:c,Fh:f,Fl:h,Gh:v,Gl:d,Hh:b,Hl:y}=this;return[e,r,n,a,i,s,o,u,l,c,f,h,v,d,b,y]}set(e,r,n,a,i,s,o,u,l,c,f,h,v,d,b,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=a|0,this.Ch=i|0,this.Cl=s|0,this.Dh=o|0,this.Dl=u|0,this.Eh=l|0,this.El=c|0,this.Fh=f|0,this.Fl=h|0,this.Gh=v|0,this.Gl=d|0,this.Hh=b|0,this.Hl=y|0}process(e,r){for(let S=0;S<16;S++,r+=4)hn[S]=e.getUint32(r),vn[S]=e.getUint32(r+=4);for(let S=16;S<80;S++){const B=hn[S-15]|0,C=vn[S-15]|0,O=Re.rotrSH(B,C,1)^Re.rotrSH(B,C,8)^Re.shrSH(B,C,7),A=Re.rotrSL(B,C,1)^Re.rotrSL(B,C,8)^Re.shrSL(B,C,7),D=hn[S-2]|0,F=vn[S-2]|0,U=Re.rotrSH(D,F,19)^Re.rotrBH(D,F,61)^Re.shrSH(D,F,6),W=Re.rotrSL(D,F,19)^Re.rotrBL(D,F,61)^Re.shrSL(D,F,6),H=Re.add4L(A,W,vn[S-7],vn[S-16]),R=Re.add4H(H,O,U,hn[S-7],hn[S-16]);hn[S]=R|0,vn[S]=H|0}let{Ah:n,Al:a,Bh:i,Bl:s,Ch:o,Cl:u,Dh:l,Dl:c,Eh:f,El:h,Fh:v,Fl:d,Gh:b,Gl:y,Hh:m,Hl:E}=this;for(let S=0;S<80;S++){const B=Re.rotrSH(f,h,14)^Re.rotrSH(f,h,18)^Re.rotrBH(f,h,41),C=Re.rotrSL(f,h,14)^Re.rotrSL(f,h,18)^Re.rotrBL(f,h,41),O=f&v^~f&b,A=h&d^~h&y,D=Re.add5L(E,C,A,Hm[S],vn[S]),F=Re.add5H(D,m,B,O,Gm[S],hn[S]),U=D|0,W=Re.rotrSH(n,a,28)^Re.rotrBH(n,a,34)^Re.rotrBH(n,a,39),H=Re.rotrSL(n,a,28)^Re.rotrBL(n,a,34)^Re.rotrBL(n,a,39),R=n&i^n&o^i&o,I=a&s^a&u^s&u;m=b|0,E=y|0,b=v|0,y=d|0,v=f|0,d=h|0,{h:f,l:h}=Re.add(l|0,c|0,F|0,U|0),l=o|0,c=u|0,o=i|0,u=s|0,i=n|0,s=a|0;const G=Re.add3L(U,H,I);n=Re.add3H(G,F,W,R),a=G|0}({h:n,l:a}=Re.add(this.Ah|0,this.Al|0,n|0,a|0)),{h:i,l:s}=Re.add(this.Bh|0,this.Bl|0,i|0,s|0),{h:o,l:u}=Re.add(this.Ch|0,this.Cl|0,o|0,u|0),{h:l,l:c}=Re.add(this.Dh|0,this.Dl|0,l|0,c|0),{h:f,l:h}=Re.add(this.Eh|0,this.El|0,f|0,h|0),{h:v,l:d}=Re.add(this.Fh|0,this.Fl|0,v|0,d|0),{h:b,l:y}=Re.add(this.Gh|0,this.Gl|0,b|0,y|0),{h:m,l:E}=Re.add(this.Hh|0,this.Hl|0,m|0,E|0),this.set(n,a,i,s,o,u,l,c,f,h,v,d,b,y,m,E)}roundClean(){hn.fill(0),vn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Km=Wl(()=>new Wm);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mr=BigInt(0),Xt=BigInt(1),Es=BigInt(2),Ym=BigInt(8),Zm={zip215:!0};function Xm(t){const e=Tv(t);return es(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Qm(t){const e=Xm(t),{Fp:r,n,prehash:a,hash:i,randomBytes:s,nByteLength:o,h:u}=e,l=Es<<BigInt(o*8)-Xt,c=r.create,f=ts(e.n,e.nBitLength),h=e.uvRatio||((V,$)=>{try{return{isValid:!0,value:r.sqrt(V*r.inv($))}}catch{return{isValid:!1,value:mr}}}),v=e.adjustScalarBytes||(V=>V),d=e.domain||((V,$,X)=>{if(Ei("phflag",X),$.length||X)throw new Error("Contexts/pre-hash are not supported");return V});function b(V,$){xn("coordinate "+V,$,mr,l)}function y(V){if(!(V instanceof S))throw new Error("ExtendedPoint expected")}const m=Pi((V,$)=>{const{ex:X,ey:ae,ez:ce}=V,re=V.is0();$==null&&($=re?Ym:r.inv(ce));const Z=c(X*$),le=c(ae*$),N=c(ce*$);if(re)return{x:mr,y:Xt};if(N!==Xt)throw new Error("invZ was invalid");return{x:Z,y:le}}),E=Pi(V=>{const{a:$,d:X}=e;if(V.is0())throw new Error("bad point: ZERO");const{ex:ae,ey:ce,ez:re,et:Z}=V,le=c(ae*ae),N=c(ce*ce),fe=c(re*re),he=c(fe*fe),pe=c(le*$),ie=c(fe*c(pe+N)),J=c(he+c(X*c(le*N)));if(ie!==J)throw new Error("bad point: equation left != right (1)");const k=c(ae*ce),M=c(re*Z);if(k!==M)throw new Error("bad point: equation left != right (2)");return!0});class S{constructor($,X,ae,ce){this.ex=$,this.ey=X,this.ez=ae,this.et=ce,b("x",$),b("y",X),b("z",ae),b("t",ce),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine($){if($ instanceof S)throw new Error("extended point not allowed");const{x:X,y:ae}=$||{};return b("x",X),b("y",ae),new S(X,ae,Xt,c(X*ae))}static normalizeZ($){const X=r.invertBatch($.map(ae=>ae.ez));return $.map((ae,ce)=>ae.toAffine(X[ce])).map(S.fromAffine)}static msm($,X){return Sv(S,f,$,X)}_setWindowSize($){O.setWindowSize(this,$)}assertValidity(){E(this)}equals($){y($);const{ex:X,ey:ae,ez:ce}=this,{ex:re,ey:Z,ez:le}=$,N=c(X*le),fe=c(re*ce),he=c(ae*le),pe=c(Z*ce);return N===fe&&he===pe}is0(){return this.equals(S.ZERO)}negate(){return new S(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:$}=e,{ex:X,ey:ae,ez:ce}=this,re=c(X*X),Z=c(ae*ae),le=c(Es*c(ce*ce)),N=c($*re),fe=X+ae,he=c(c(fe*fe)-re-Z),pe=N+Z,ie=pe-le,J=N-Z,k=c(he*ie),M=c(pe*J),K=c(he*J),te=c(ie*pe);return new S(k,M,te,K)}add($){y($);const{a:X,d:ae}=e,{ex:ce,ey:re,ez:Z,et:le}=this,{ex:N,ey:fe,ez:he,et:pe}=$;if(X===BigInt(-1)){const q=c((re-ce)*(fe+N)),j=c((re+ce)*(fe-N)),oe=c(j-q);if(oe===mr)return this.double();const ge=c(Z*Es*pe),ve=c(le*Es*he),L=ve+ge,de=j+q,T=ve-ge,p=c(L*oe),x=c(de*T),z=c(L*T),Y=c(oe*de);return new S(p,x,Y,z)}const ie=c(ce*N),J=c(re*fe),k=c(le*ae*pe),M=c(Z*he),K=c((ce+re)*(N+fe)-ie-J),te=M-k,Q=M+k,ee=c(J-X*ie),_=c(K*te),g=c(Q*ee),w=c(K*ee),P=c(te*Q);return new S(_,g,P,w)}subtract($){return this.add($.negate())}wNAF($){return O.wNAFCached(this,$,S.normalizeZ)}multiply($){const X=$;xn("scalar",X,Xt,n);const{p:ae,f:ce}=this.wNAF(X);return S.normalizeZ([ae,ce])[0]}multiplyUnsafe($){const X=$;return xn("scalar",X,mr,n),X===mr?C:this.equals(C)||X===Xt?this:this.equals(B)?this.wNAF(X).p:O.unsafeLadder(this,X)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return O.unsafeLadder(this,n).is0()}toAffine($){return m(this,$)}clearCofactor(){const{h:$}=e;return $===Xt?this:this.multiplyUnsafe($)}static fromHex($,X=!1){const{d:ae,a:ce}=e,re=r.BYTES;$=Qt("pointHex",$,re),Ei("zip215",X);const Z=$.slice(),le=$[re-1];Z[re-1]=le&-129;const N=Si(Z),fe=X?l:r.ORDER;xn("pointHex.y",N,mr,fe);const he=c(N*N),pe=c(he-Xt),ie=c(ae*he-ce);let{isValid:J,value:k}=h(pe,ie);if(!J)throw new Error("Point.fromHex: invalid y coordinate");const M=(k&Xt)===Xt,K=(le&128)!==0;if(!X&&k===mr&&K)throw new Error("Point.fromHex: x=0 and x_0=1");return K!==M&&(k=c(-k)),S.fromAffine({x:k,y:N})}static fromPrivateKey($){return F($).point}toRawBytes(){const{x:$,y:X}=this.toAffine(),ae=So(X,r.BYTES);return ae[ae.length-1]|=$&Xt?128:0,ae}toHex(){return aa(this.toRawBytes())}}S.BASE=new S(e.Gx,e.Gy,Xt,c(e.Gx*e.Gy)),S.ZERO=new S(mr,Xt,Xt,mr);const{BASE:B,ZERO:C}=S,O=Ev(S,o*8);function A(V){return at(V,n)}function D(V){return A(Si(V))}function F(V){const $=o;V=Qt("private key",V,$);const X=Qt("hashed private key",i(V),2*$),ae=v(X.slice(0,$)),ce=X.slice($,2*$),re=D(ae),Z=B.multiply(re),le=Z.toRawBytes();return{head:ae,prefix:ce,scalar:re,point:Z,pointBytes:le}}function U(V){return F(V).pointBytes}function W(V=new Uint8Array,...$){const X=ht(...$);return D(i(d(X,Qt("context",V),!!a)))}function H(V,$,X={}){V=Qt("message",V),a&&(V=a(V));const{prefix:ae,scalar:ce,pointBytes:re}=F($),Z=W(X.context,ae,V),le=B.multiply(Z).toRawBytes(),N=W(X.context,le,re,V),fe=A(Z+N*ce);xn("signature.s",fe,mr,n);const he=ht(le,So(fe,r.BYTES));return Qt("result",he,o*2)}const R=Zm;function I(V,$,X,ae=R){const{context:ce,zip215:re}=ae,Z=r.BYTES;V=Qt("signature",V,2*Z),$=Qt("message",$),re!==void 0&&Ei("zip215",re),a&&($=a($));const le=Si(V.slice(Z,2*Z));let N,fe,he;try{N=S.fromHex(X,re),fe=S.fromHex(V.slice(0,Z),re),he=B.multiplyUnsafe(le)}catch{return!1}if(!re&&N.isSmallOrder())return!1;const pe=W(ce,fe.toRawBytes(),N.toRawBytes(),$);return fe.add(N.multiplyUnsafe(pe)).subtract(he).clearCofactor().equals(S.ZERO)}return B._setWindowSize(8),{CURVE:e,getPublicKey:U,sign:H,verify:I,ExtendedPoint:S,utils:{getExtendedPublicKey:F,randomPrivateKey:()=>s(r.BYTES),precompute(V=8,$=S.BASE){return $._setWindowSize(V),$.multiply(BigInt(3)),$}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sc=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),bf=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const jm=BigInt(1),wf=BigInt(2);BigInt(3);const Jm=BigInt(5),e1=BigInt(8);function t1(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),a=BigInt(80),i=sc,o=t*t%i*t%i,u=Rr(o,wf,i)*o%i,l=Rr(u,jm,i)*t%i,c=Rr(l,Jm,i)*l%i,f=Rr(c,e,i)*c%i,h=Rr(f,r,i)*f%i,v=Rr(h,n,i)*h%i,d=Rr(v,a,i)*v%i,b=Rr(d,a,i)*v%i,y=Rr(b,e,i)*c%i;return{pow_p_5_8:Rr(y,wf,i)*t%i,b2:o}}function r1(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function n1(t,e){const r=sc,n=at(e*e*e,r),a=at(n*n*e,r),i=t1(t*a).pow_p_5_8;let s=at(t*n*i,r);const o=at(e*s*s,r),u=s,l=at(s*bf,r),c=o===t,f=o===at(-t,r),h=o===at(-t*bf,r);return c&&(s=u),(f||h)&&(s=l),Hy(s,r)&&(s=at(-s,r)),{isValid:c||f,value:s}}const a1=(()=>ts(sc,void 0,!0))(),i1=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:a1,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:e1,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Km,randomBytes:Jd,adjustScalarBytes:r1,uvRatio:n1}))(),s1=(()=>Qm(i1))();var xf=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r},Kt=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Ut,pi,kv,Pv;class o1{constructor(e={}){Ut.set(this,void 0),pi.set(this,void 0),this[kv]=this.entries.bind(this),this[Pv]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=e,a=Date.now();xf(this,Ut,new Map([...r].map(([i,s])=>[i,{value:s,timestamp:a}])),"f"),xf(this,pi,n,"f")}prune(){const e=Date.now();for(const[r,n]of Kt(this,Ut,"f").entries())e-n.timestamp>Kt(this,pi,"f")&&Kt(this,Ut,"f").delete(r);return this}set(e,r){this.prune();const n={value:r,timestamp:Date.now()};return Kt(this,Ut,"f").set(e,n),this}get(e){const r=Kt(this,Ut,"f").get(e);if(r!==void 0){if(Date.now()-r.timestamp>Kt(this,pi,"f")){Kt(this,Ut,"f").delete(e);return}return r.value}}clear(){Kt(this,Ut,"f").clear()}entries(){const e=Kt(this,Ut,"f").entries();return function*(){for(const[n,a]of e)yield[n,a.value]}()}values(){const e=Kt(this,Ut,"f").values();return function*(){for(const n of e)yield n.value}()}keys(){return Kt(this,Ut,"f").keys()}forEach(e,r){for(const[n,a]of Kt(this,Ut,"f").entries())e.call(r,a.value,n,this)}has(e){return Kt(this,Ut,"f").has(e)}delete(e){return Kt(this,Ut,"f").delete(e)}get size(){return Kt(this,Ut,"f").size}}Ut=new WeakMap,pi=new WeakMap,kv=Symbol.iterator,Pv=Symbol.toStringTag;const Ef=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},Sf=(t,e,r)=>{if(r<=127)return t[e]=r,1;if(r<=255)return t[e]=129,t[e+1]=r,2;if(r<=65535)return t[e]=130,t[e+1]=r>>8,t[e+2]=r,3;if(r<=16777215)return t[e]=131,t[e+1]=r>>16,t[e+2]=r>>8,t[e+3]=r,4;throw new Error("Length too long (> 4 bytes)")},bl=(t,e)=>{if(t[e]<128)return 1;if(t[e]===128)throw new Error("Invalid length 0");if(t[e]===129)return 2;if(t[e]===130)return 3;if(t[e]===131)return 4;throw new Error("Length too long (> 4 bytes)")},u1=(t,e)=>{const r=bl(t,e);if(r===1)return t[e];if(r===2)return t[e+1];if(r===3)return(t[e+1]<<8)+t[e+2];if(r===4)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const Tf=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function l1(t,e){const r=2+Ef(t.byteLength+1),n=e.byteLength+r+t.byteLength;let a=0;const i=new Uint8Array(1+Ef(n)+n);return i[a++]=48,a+=Sf(i,a,n),i.set(e,a),a+=e.byteLength,i[a++]=3,a+=Sf(i,a,t.byteLength+1),i[a++]=0,i.set(new Uint8Array(t),a),i}const c1=(t,e)=>{let r=0;const n=(o,u)=>{if(a[r++]!==o)throw new Error("Expected: "+u)},a=new Uint8Array(t);if(n(48,"sequence"),r+=bl(a,r),!ec(a.slice(r,r+e.byteLength),e))throw new Error("Not the expected OID.");r+=e.byteLength,n(3,"bit string");const i=u1(a,r)-1;r+=bl(a,r),n(0,"0 padding");const s=a.slice(r);if(i!==s.length)throw new Error(`DER payload mismatch: Expected length ${i} actual length ${s.length}`);return s};var _f=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r},Bf=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Zs,Xs;class jn{constructor(e){if(Zs.set(this,void 0),Xs.set(this,void 0),e.byteLength!==jn.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");_f(this,Zs,e,"f"),_f(this,Xs,jn.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new jn(e)}static fromDer(e){return new jn(this.derDecode(e))}static derEncode(e){return l1(e,Tf).buffer}static derDecode(e){const r=c1(e,Tf);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return Bf(this,Zs,"f")}get derKey(){return Bf(this,Xs,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}Zs=new WeakMap,Xs=new WeakMap;jn.RAW_KEY_LENGTH=32;class f1{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(r=>r!==e)}notify(e,...r){this.observers.forEach(n=>n(e,...r))}}class d1 extends f1{constructor(){super()}print(e,...r){this.notify({message:e,level:"info"},...r)}warn(e,...r){this.notify({message:e,level:"warn"},...r)}error(e,r,...n){this.notify({message:e,level:"error",error:r},...n)}}var kr=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r},Dt=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Mr,Qs,js,Js,eo,to,ro,no,Ba;const Ov=.5,Mv=1.5,Fv=500,Dv=6e4,Uv=9e5,Lv=10;class Xo{constructor(e=Xo.default){Mr.set(this,void 0),Qs.set(this,void 0),js.set(this,void 0),Js.set(this,void 0),eo.set(this,void 0),to.set(this,void 0),ro.set(this,void 0),no.set(this,void 0),Ba.set(this,0);const{initialInterval:r=Fv,randomizationFactor:n=Ov,multiplier:a=Mv,maxInterval:i=Dv,maxElapsedTime:s=Uv,maxIterations:o=Lv,date:u=Date}=e;kr(this,Mr,r,"f"),kr(this,Qs,n,"f"),kr(this,js,a,"f"),kr(this,Js,i,"f"),kr(this,no,u,"f"),kr(this,eo,u.now(),"f"),kr(this,to,s,"f"),kr(this,ro,o,"f")}get ellapsedTimeInMsec(){return Dt(this,no,"f").now()-Dt(this,eo,"f")}get currentInterval(){return Dt(this,Mr,"f")}get count(){return Dt(this,Ba,"f")}get randomValueFromInterval(){const e=Dt(this,Qs,"f")*Dt(this,Mr,"f"),r=Dt(this,Mr,"f")-e,n=Dt(this,Mr,"f")+e;return Math.random()*(n-r)+r}incrementCurrentInterval(){var e;return kr(this,Mr,Math.min(Dt(this,Mr,"f")*Dt(this,js,"f"),Dt(this,Js,"f")),"f"),kr(this,Ba,(e=Dt(this,Ba,"f"),e++,e),"f"),Dt(this,Mr,"f")}next(){return this.ellapsedTimeInMsec>=Dt(this,to,"f")||Dt(this,Ba,"f")>=Dt(this,ro,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}Mr=new WeakMap,Qs=new WeakMap,js=new WeakMap,Js=new WeakMap,eo=new WeakMap,to=new WeakMap,ro=new WeakMap,no=new WeakMap,Ba=new WeakMap;Xo.default={initialInterval:Fv,randomizationFactor:Ov,multiplier:Mv,maxInterval:Dv,maxElapsedTime:Uv,maxIterations:Lv,date:Date};var Ss=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r},ke=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},zr,wr,Vn,ao,Aa,Ca,qn,Yn,$v,io,so,Qr;(function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"})(Qr||(Qr={}));const Ts=5*60*1e3,h1="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",v1="ic0.app",p1=".ic0.app",g1="icp0.io",y1=".icp0.io",m1="icp-api.io",b1=".icp-api.io";class $u extends Jt{constructor(e){super(e),this.message=e}}class _s extends Jt{constructor(e){super(e),this.message=e}}function w1(){let t;if(typeof window<"u")if(window.fetch)t=window.fetch.bind(window);else throw new $u("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)t=global.fetch.bind(global);else throw new $u("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw new $u("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}class Qo{constructor(e={}){var r;if(zr.add(this),this.rootKey=xo(h1),this._timeDiffMsecs=0,this._rootKeyFetched=!1,wr.set(this,void 0),Vn.set(this,void 0),this._isAgent=!0,ao.set(this,0),this.log=new d1,Aa.set(this,[]),Ca.set(this,[]),qn.set(this,new o1({expirationTime:5*60*1e3})),Yn.set(this,!0),so.set(this,(a,i)=>{if(ke(this,Yn,"f")===!1)return a;if(!i)throw new Ur("Invalid signature from replica signed query: no matching node key found.");const{status:s,signatures:o=[],requestId:u}=a,l=new TextEncoder().encode("\vic-response");for(const c of o){const{timestamp:f,identity:h}=c,v=Me.fromUint8Array(h).toText();let d;if(s==="replied"){const{reply:S}=a;d=Eo({status:s,reply:S,timestamp:BigInt(f),request_id:u})}else if(s==="rejected"){const{reject_code:S,reject_message:B,error_code:C}=a;d=Eo({status:s,reject_code:S,reject_message:B,error_code:C,timestamp:BigInt(f),request_id:u})}else throw new Error(`Unknown status: ${s}`);const b=Gr(l,new Uint8Array(d)),y=i==null?void 0:i.nodeKeys.get(v);if(!y)throw new Ur("Invalid signature from replica signed query: no matching node key found.");const m=jn.fromDer(y).rawKey;if(s1.verify(c.signature,new Uint8Array(b),new Uint8Array(m)))return a;throw new Ur(`Invalid signature from replica ${v} signed query.`)}return a}),e.source){if(!(e.source instanceof Qo))throw new Error("An Agent's source can only be another HttpAgent");this._identity=e.source._identity,this._fetch=e.source._fetch,this._host=e.source._host,this._credentials=e.source._credentials}else this._fetch=e.fetch||w1()||fetch.bind(global),this._fetchOptions=e.fetchOptions,this._callOptions=e.callOptions;if(e.host!==void 0)!e.host.match(/^[a-z]+:/)&&typeof window<"u"?this._host=new URL(window.location.protocol+"//"+e.host):this._host=new URL(e.host);else if(e.source!==void 0)this._host=e.source._host;else{const a=typeof window<"u"?window.location:void 0;a||(this._host=new URL("https://icp-api.io"),this.log.warn("Could not infer host from window.location, defaulting to mainnet gateway of https://icp-api.io. Please provide a host to the HttpAgent constructor to avoid this warning."));const i=["ic0.app","icp0.io","127.0.0.1","localhost"],s=[".github.dev",".gitpod.io"],o=a==null?void 0:a.hostname;let u;o&&typeof o=="string"&&(s.some(l=>o.endsWith(l))?u=o:u=i.find(l=>o.endsWith(l))),a&&u?this._host=new URL(`${a.protocol}//${u}${a.port?":"+a.port:""}`):(this._host=new URL("https://icp-api.io"),this.log.warn("Could not infer host from window.location, defaulting to mainnet gateway of https://icp-api.io. Please provide a host to the HttpAgent constructor to avoid this warning."))}e.verifyQuerySignatures!==void 0&&Ss(this,Yn,e.verifyQuerySignatures,"f"),Ss(this,wr,(r=e.retryTimes)!==null&&r!==void 0?r:3,"f");const n=()=>new Xo({maxIterations:ke(this,wr,"f")});if(Ss(this,Vn,e.backoffStrategy||n,"f"),this._host.hostname.endsWith(p1)?this._host.hostname=v1:this._host.hostname.endsWith(y1)?this._host.hostname=g1:this._host.hostname.endsWith(b1)&&(this._host.hostname=m1),e.credentials){const{name:a,password:i}=e.credentials;this._credentials=`${a}${i?":"+i:""}`}this._identity=Promise.resolve(e.identity||new py),this.addTransform("update",Jc(hl)),e.useQueryNonces&&this.addTransform("query",Jc(hl)),e.logToConsole&&this.log.subscribe(a=>{a.level==="error"?console.error(a.message):a.level==="warn"?console.warn(a.message):console.log(a.message)})}get waterMark(){return ke(this,ao,"f")}isLocal(){const e=this._host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,r,n=r.priority||0){if(e==="update"){const a=ke(this,Ca,"f").findIndex(i=>(i.priority||0)<n);ke(this,Ca,"f").splice(a>=0?a:ke(this,Ca,"f").length,0,Object.assign(r,{priority:n}))}else if(e==="query"){const a=ke(this,Aa,"f").findIndex(i=>(i.priority||0)<n);ke(this,Aa,"f").splice(a>=0?a:ke(this,Aa,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!this._identity)throw new _s("This identity has expired due this application's security policy. Please refresh your authentication.");return(await this._identity).getPrincipal()}async call(e,r,n){const a=await(n!==void 0?await n:await this._identity);if(!a)throw new _s("This identity has expired due this application's security policy. Please refresh your authentication.");const i=Me.from(e),s=r.effectiveCanisterId?Me.from(r.effectiveCanisterId):i,o=a.getPrincipal()||Me.anonymous();let u=new ys(Ts);Math.abs(this._timeDiffMsecs)>1e3*30&&(u=new ys(Ts+this._timeDiffMsecs));const l={request_type:dl.Call,canister_id:i,method_name:r.methodName,arg:r.arg,sender:o,ingress_expiry:u};let c=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{})},endpoint:"call",body:l});c=await a.transformRequest(c);const f=Pu(c.body);this.log.print(`fetching "/api/v2/canister/${s.toText()}/call" with request:`,c);const h=ke(this,Vn,"f").call(this),v=ke(this,zr,"m",io).call(this,{request:()=>this._fetch(""+new URL(`/api/v2/canister/${s.toText()}/call`,this._host),Object.assign(Object.assign(Object.assign({},this._callOptions),c.request),{body:f})),backoff:h,tries:0}),[d,b]=await Promise.all([v,Qc(l)]),y=await d.arrayBuffer(),m=d.status===200&&y.byteLength>0?tn(y):null;return{requestId:b,response:{ok:d.ok,status:d.status,statusText:d.statusText,body:m,headers:qs(d.headers)}}}async query(e,r,n){const a=ke(this,Vn,"f").call(this),i=r.effectiveCanisterId?Me.from(r.effectiveCanisterId):Me.from(e);this.log.print(`ecid ${i.toString()}`),this.log.print(`canisterId ${e.toString()}`);const s=async()=>{const c=await(n!==void 0?await n:await this._identity);if(!c)throw new _s("This identity has expired due this application's security policy. Please refresh your authentication.");const f=Me.from(e),h=(c==null?void 0:c.getPrincipal())||Me.anonymous(),v={request_type:"query",canister_id:f,method_name:r.methodName,arg:r.arg,sender:h,ingress_expiry:new ys(Ts)},d=await Qc(v);let b=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{})},endpoint:"read",body:v});b=await(c==null?void 0:c.transformRequest(b));const y=Pu(b.body),m={canister:f.toText(),ecid:i,transformedRequest:b,body:y,requestId:d,backoff:a,tries:0};return await ke(this,zr,"m",$v).call(this,m)},o=async()=>{if(!ke(this,Yn,"f"))return;const c=ke(this,qn,"f").get(i.toString());return c||(await this.fetchSubnetKeys(i.toString()),ke(this,qn,"f").get(i.toString()))},[u,l]=await Promise.all([s(),o()]);if(this.log.print("Query response:",u),!ke(this,Yn,"f"))return u;try{return ke(this,so,"f").call(this,u,l)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ke(this,qn,"f").delete(e.toString()),await this.fetchSubnetKeys(i.toString());const f=ke(this,qn,"f").get(e.toString());if(!f)throw new Ur("Invalid signature from replica signed query: no matching node key found.");return ke(this,so,"f").call(this,u,f)}}async createReadStateRequest(e,r){const n=await(r!==void 0?await r:await this._identity);if(!n)throw new _s("This identity has expired due this application's security policy. Please refresh your authentication.");const a=(n==null?void 0:n.getPrincipal())||Me.anonymous(),i=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:a,ingress_expiry:new ys(Ts)}});return n==null?void 0:n.transformRequest(i)}async readState(e,r,n,a){const i=typeof e=="string"?Me.fromText(e):e,s=a??await this.createReadStateRequest(r,n),o=Pu(s.body);this.log.print(`fetching "/api/v2/canister/${i}/read_state" with request:`,s);const u=ke(this,Vn,"f").call(this),l=await ke(this,zr,"m",io).call(this,{request:()=>this._fetch(""+new URL(`/api/v2/canister/${i.toString()}/read_state`,this._host),Object.assign(Object.assign(Object.assign({},this._fetchOptions),s.request),{body:o})),backoff:u,tries:0});if(!l.ok)throw new Error(`Server returned an error:
  Code: ${l.status} (${l.statusText})
  Body: ${await l.text()}
`);const c=tn(await l.arrayBuffer());this.log.print("Read state response:",c);const f=await this.parseTimeFromResponse(c);return f>0&&(this.log.print("Read state response time:",f),Ss(this,ao,f,"f")),c}async parseTimeFromResponse(e){let r;if(e.certificate){const n=tn(e.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const a=Ga(["time"],r);if(a.status!==gt.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(a.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(a))throw new Error("Time was not found in the response or was not in its expected format.");const i=ic(Qh(a.value));return this.log.print("Time from response:",i),this.log.print("Time from response in milliseconds:",Number(i)),Number(i)}else this.log.warn("No certificate found in response");return 0}async syncTime(e){const r=await og(()=>Promise.resolve().then(()=>xm),void 0),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=(await r.request({canisterId:e??Me.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:this,paths:["time"]})).get("time");i&&(this._timeDiffMsecs=Number(i)-Number(n))}catch(a){this.log.error("Caught exception while attempting to sync time",a)}}async status(){const e=this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{};this.log.print('fetching "/api/v2/status"');const r=ke(this,Vn,"f").call(this),n=await ke(this,zr,"m",io).call(this,{backoff:r,request:()=>this._fetch(""+new URL("/api/v2/status",this._host),Object.assign({headers:e},this._fetchOptions)),tries:0});return tn(await n.arrayBuffer())}async fetchRootKey(){return this._rootKeyFetched||(this.rootKey=(await this.status()).root_key,this._rootKeyFetched=!0),this.rootKey}invalidateIdentity(){this._identity=null}replaceIdentity(e){this._identity=Promise.resolve(e)}async fetchSubnetKeys(e){const r=Me.from(e),a=(await Cv({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(a&&typeof a=="object"&&"nodeKeys"in a)return ke(this,qn,"f").set(r.toText(),a),a}_transform(e){let r=Promise.resolve(e);if(e.endpoint==="call")for(const n of ke(this,Ca,"f"))r=r.then(a=>n(a).then(i=>i||a));else for(const n of ke(this,Aa,"f"))r=r.then(a=>n(a).then(i=>i||a));return r}}wr=new WeakMap,Vn=new WeakMap,ao=new WeakMap,Aa=new WeakMap,Ca=new WeakMap,qn=new WeakMap,Yn=new WeakMap,so=new WeakMap,zr=new WeakSet,$v=async function t(e){var r,n;const{ecid:a,transformedRequest:i,body:s,requestId:o,backoff:u,tries:l}=e,c=l===0?0:u.next();if(this.log.print(`fetching "/api/v2/canister/${a.toString()}/query" with tries:`,{tries:l,backoff:u,delay:c}),c===null)throw new Jt(`Timestamp failed to pass the watermark after retrying the configured ${ke(this,wr,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);c>0&&await new Promise(d=>setTimeout(d,c));let f;try{this.log.print(`fetching "/api/v2/canister/${a.toString()}/query" with request:`,i);const d=await this._fetch(""+new URL(`/api/v2/canister/${a.toString()}/query`,this._host),Object.assign(Object.assign(Object.assign({},this._fetchOptions),i.request),{body:s}));if(d.status===200){const b=tn(await d.arrayBuffer());f=Object.assign(Object.assign({},b),{httpDetails:{ok:d.ok,status:d.status,statusText:d.statusText,headers:qs(d.headers)},requestId:o})}else throw new ef(`Gateway returned an error:
  Code: ${d.status} (${d.statusText})
  Body: ${await d.text()}
`,{ok:d.ok,status:d.status,statusText:d.statusText,headers:qs(d.headers)})}catch(d){if(l<ke(this,wr,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${d}
  Retrying query.`),await ke(this,zr,"m",t).call(this,Object.assign(Object.assign({},e),{tries:l+1}));throw d}const h=(n=(r=f.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!ke(this,Yn,"f"))return f;if(!h)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const v=Number(BigInt(h)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:v}),Number(this.waterMark)>v){const d=new Jt("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",d,{timestamp:h,waterMark:this.waterMark}),l<ke(this,wr,"f"))return await ke(this,zr,"m",t).call(this,Object.assign(Object.assign({},e),{tries:l+1}));throw new Jt(`Timestamp failed to pass the watermark after retrying the configured ${ke(this,wr,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return f},io=async function t(e){const{request:r,backoff:n,tries:a}=e,i=a===0?0:n.next();if(i===null)throw new Jt(`Timestamp failed to pass the watermark after retrying the configured ${ke(this,wr,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);i>0&&await new Promise(l=>setTimeout(l,i));let s;try{s=await r()}catch(l){if(ke(this,wr,"f")>a)return this.log.warn(`Caught exception while attempting to make request:
  ${l}
  Retrying request.`),await ke(this,zr,"m",t).call(this,{request:r,backoff:n,tries:a+1});throw l}if(s.ok)return s;const o=await s.clone().text(),u=`Server returned an error:
  Code: ${s.status} (${s.statusText})
  Body: ${o}
`;if(a<ke(this,wr,"f"))return await ke(this,zr,"m",t).call(this,{request:r,backoff:n,tries:a+1});throw new ef(u,{ok:s.ok,status:s.status,statusText:s.statusText,headers:qs(s.headers)})};var Af;(function(t){t.Error="err",t.GetPrincipal="gp",t.GetPrincipalResponse="gpr",t.Query="q",t.QueryResponse="qr",t.Call="c",t.CallResponse="cr",t.ReadState="rs",t.ReadStateResponse="rsr",t.Status="s",t.StatusResponse="sr"})(Af||(Af={}));function Cf(){const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}const x1=5*60*1e3;function E1(){return A1(T1(S1(),1e3),B1(1e3,1.2),_1(x1))}function S1(){let t=!0;return async()=>t?(t=!1,!0):!1}function T1(t,e){return async(r,n,a)=>{if(await t(r,n,a))return new Promise(i=>setTimeout(i,e))}}function _1(t){const e=Date.now()+t;return async(r,n,a)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:
  Request ID: ${Br(n)}
  Request status: ${a}
`)}}function B1(t,e){let r=t;return()=>new Promise(n=>setTimeout(()=>{r*=e,n()},r))}function A1(...t){return async(e,r,n)=>{for(const a of t)await a(e,r,n)}}async function zv(t,e,r,n,a,i){var s;const o=[new TextEncoder().encode("request_status"),r],u=a??await((s=t.createReadStateRequest)===null||s===void 0?void 0:s.call(t,{paths:[o]})),l=await t.readState(e,{paths:[o]},void 0,u);if(t.rootKey==null)throw new Error("Agent root key not initialized before polling");const c=await Oa.create({certificate:l.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:i}),f=Qn(c.lookup([...o,new TextEncoder().encode("status")]));let h;switch(typeof f>"u"?h=Qr.Unknown:h=new TextDecoder().decode(f),h){case Qr.Replied:return Qn(c.lookup([...o,"reply"]));case Qr.Received:case Qr.Unknown:case Qr.Processing:return await n(e,r,h),zv(t,e,r,n,u);case Qr.Rejected:{const v=new Uint8Array(Qn(c.lookup([...o,"reject_code"])))[0],d=new TextDecoder().decode(Qn(c.lookup([...o,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${Br(r)}
  Reject code: ${v}
  Reject text: ${d}
`)}case Qr.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${Br(r)}
`)}throw new Error("unreachable")}const C1=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),r=t.Text,n=t.Record({network:e,address:r,min_confirmations:t.Opt(t.Nat32)}),a=t.Nat64,i=a,s=t.Record({network:e}),o=t.Nat64,u=t.Vec(o),l=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:r}),c=t.Vec(t.Nat8),f=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),h=t.Record({height:t.Nat32,value:a,outpoint:f}),v=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:t.Nat32,tip_block_hash:c,utxos:t.Vec(h)}),d=t.Record({transaction:t.Vec(t.Nat8),network:e}),b=t.Principal,y=t.Record({canister_id:b,num_requested_changes:t.Opt(t.Nat64)}),m=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),E=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),S=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:m,details:E}),B=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(S),total_num_changes:t.Nat64}),C=t.Record({canister_id:b}),O=t.Variant({controllers:t.Null,public:t.Null}),A=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:O,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),D=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:A,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),F=t.Record({canister_id:b}),U=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(O),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),W=t.Record({settings:t.Opt(U),sender_canister_version:t.Opt(t.Nat64)}),H=t.Record({canister_id:b}),R=t.Record({canister_id:b}),I=t.Record({canister_id:b}),G=t.Variant({secp256k1:t.Null}),V=t.Record({key_id:t.Record({name:t.Text,curve:G}),canister_id:t.Opt(b),derivation_path:t.Vec(t.Vec(t.Nat8))}),$=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),X=t.Record({canister_id:b}),ae=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),ce=t.Record({canister_log_records:t.Vec(ae)}),re=t.Record({value:t.Text,name:t.Text}),Z=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec(re)}),le=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:Z})],[Z],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec(re)}),N=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),fe=t.Record({hash:t.Vec(t.Nat8)}),he=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:N,chunk_hashes_list:t.Vec(fe),target_canister:b,store_canister:t.Opt(b),sender_canister_version:t.Opt(t.Nat64)}),pe=t.Vec(t.Nat8),ie=t.Record({arg:t.Vec(t.Nat8),wasm_module:pe,mode:N,canister_id:b,sender_canister_version:t.Opt(t.Nat64)}),J=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),k=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),M=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(k)})),K=t.Record({settings:t.Opt(U),specified_id:t.Opt(b),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),te=t.Record({canister_id:b}),Q=t.Record({canister_id:b,amount:t.Nat}),ee=t.Vec(t.Nat8),_=t.Record({key_id:t.Record({name:t.Text,curve:G}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),g=t.Record({signature:t.Vec(t.Nat8)}),w=t.Record({canister_id:b}),P=t.Record({canister_id:b}),q=t.Record({canister_id:b}),j=t.Vec(fe),oe=t.Record({canister_id:b,sender_canister_version:t.Opt(t.Nat64)}),ge=t.Record({canister_id:t.Principal,settings:U,sender_canister_version:t.Opt(t.Nat64)}),ve=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),L=fe;return t.Service({bitcoin_get_balance:t.Func([n],[i],[]),bitcoin_get_current_fee_percentiles:t.Func([s],[u],[]),bitcoin_get_utxos:t.Func([l],[v],[]),bitcoin_send_transaction:t.Func([d],[],[]),canister_info:t.Func([y],[B],[]),canister_status:t.Func([C],[D],[]),clear_chunk_store:t.Func([F],[],[]),create_canister:t.Func([W],[H],[]),delete_canister:t.Func([R],[],[]),deposit_cycles:t.Func([I],[],[]),ecdsa_public_key:t.Func([V],[$],[]),fetch_canister_logs:t.Func([X],[ce],["query"]),http_request:t.Func([le],[Z],[]),install_chunked_code:t.Func([he],[],[]),install_code:t.Func([ie],[],[]),node_metrics_history:t.Func([J],[M],[]),provisional_create_canister_with_cycles:t.Func([K],[te],[]),provisional_top_up_canister:t.Func([Q],[],[]),raw_rand:t.Func([],[ee],[]),sign_with_ecdsa:t.Func([_],[g],[]),start_canister:t.Func([w],[],[]),stop_canister:t.Func([P],[],[]),stored_chunks:t.Func([q],[j],[]),uninstall_code:t.Func([oe],[],[]),update_settings:t.Func([ge],[],[]),upload_chunk:t.Func([ve],[L],[])})};class Vv extends Jt{constructor(e,r,n,a){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(a).map(i=>`  "${i}": ${JSON.stringify(a[i])}`)].join(`
`)),this.canisterId=e,this.methodName=r,this.type=n,this.props=a}}class I1 extends Vv{constructor(e,r,n){var a;super(e,r,"query",{Status:n.status,Code:(a=tl[n.reject_code])!==null&&a!==void 0?a:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class N1 extends Vv{constructor(e,r,n,a){super(e,r,"update",Object.assign({"Request ID":Br(n)},a.body?Object.assign(Object.assign({},a.body.error_code?{"Error code":a.body.error_code}:{}),{"Reject code":String(a.body.reject_code),"Reject message":a.body.reject_message}):{"HTTP status code":a.status.toString(),"HTTP status text":a.statusText})),this.requestId=n,this.response=a}}const dr=Symbol.for("ic-agent-metadata");class rs{constructor(e){this[dr]=Object.freeze(e)}static agentOf(e){return e[dr].config.agent}static interfaceOf(e){return e[dr].service}static canisterIdOf(e){return Me.from(e[dr].config.canisterId)}static async install(e,r){const n=e.mode===void 0?{install:null}:e.mode,a=e.arg?[...new Uint8Array(e.arg)]:[],i=[...new Uint8Array(e.module)],s=typeof r.canisterId=="string"?Me.fromText(r.canisterId):r.canisterId;await If(r).install_code({mode:n,arg:a,wasm_module:i,canister_id:s,sender_canister_version:[]})}static async createCanister(e,r){function n(i){return[{controllers:i.controllers?[i.controllers]:[],compute_allocation:i.compute_allocation?[i.compute_allocation]:[],freezing_threshold:i.freezing_threshold?[i.freezing_threshold]:[],memory_allocation:i.memory_allocation?[i.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:a}=await If(e||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return a}static async createAndInstallCanister(e,r,n){const a=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:a})),this.createActor(e,Object.assign(Object.assign({},n),{canisterId:a}))}static createActorClass(e,r){const n=e({IDL:Pg});class a extends rs{constructor(s){if(!s.canisterId)throw new Jt(`Canister ID is required, but received ${typeof s.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const o=typeof s.canisterId=="string"?Me.fromText(s.canisterId):s.canisterId;super({config:Object.assign(Object.assign(Object.assign({},qv),s),{canisterId:o}),service:n});for(const[u,l]of n._fields)r!=null&&r.httpDetails&&l.annotations.push(wl),this[u]=R1(this,u,l,s.blsVerify)}}return a}static createActor(e,r){if(!r.canisterId)throw new Jt(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(r)}static createActorWithHttpDetails(e,r){return new(this.createActorClass(e,{httpDetails:!0}))(r)}}function Bs(t,e){const r=vh(t,Zd.Buffer.from(e));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const qv={pollingStrategyFactory:E1},wl="http-details";function R1(t,e,r,n){let a;r.annotations.includes("query")||r.annotations.includes("composite_query")?a=async(s,...o)=>{var u,l;s=Object.assign(Object.assign({},s),(l=(u=t[dr].config).queryTransform)===null||l===void 0?void 0:l.call(u,e,o,Object.assign(Object.assign({},t[dr].config),s)));const c=s.agent||t[dr].config.agent||Cf(),f=Me.from(s.canisterId||t[dr].config.canisterId),h=al(r.argTypes,o),v=await c.query(f,{methodName:e,arg:h,effectiveCanisterId:s.effectiveCanisterId});switch(v.status){case"rejected":throw new I1(f,e,v);case"replied":return r.annotations.includes(wl)?{httpDetails:v.httpDetails,result:Bs(r.retTypes,v.reply.arg)}:Bs(r.retTypes,v.reply.arg)}}:a=async(s,...o)=>{var u,l;s=Object.assign(Object.assign({},s),(l=(u=t[dr].config).callTransform)===null||l===void 0?void 0:l.call(u,e,o,Object.assign(Object.assign({},t[dr].config),s)));const c=s.agent||t[dr].config.agent||Cf(),{canisterId:f,effectiveCanisterId:h,pollingStrategyFactory:v}=Object.assign(Object.assign(Object.assign({},qv),t[dr].config),s),d=Me.from(f),b=h!==void 0?Me.from(h):d,y=al(r.argTypes,o),{requestId:m,response:E}=await c.call(d,{methodName:e,arg:y,effectiveCanisterId:b});if(!E.ok||E.body)throw new N1(d,e,m,E);const S=v(),B=await zv(c,b,m,S,n),C=r.annotations.includes(wl);if(B!==void 0)return C?{httpDetails:E,result:Bs(r.retTypes,B)}:Bs(r.retTypes,B);if(r.retTypes.length===0)return C?{httpDetails:E,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const i=(...s)=>a({},...s);return i.withOptions=s=>(...o)=>a(s,...o),i}function If(t){function e(r,n){if(t.effectiveCanisterId)return{effectiveCanisterId:Me.from(t.effectiveCanisterId)};const a=n[0];let i=Me.fromHex("");return a&&typeof a=="object"&&a.canister_id&&(i=Me.from(a.canister_id)),{effectiveCanisterId:i}}return rs.createActor(C1,Object.assign(Object.assign(Object.assign({},t),{canisterId:Me.fromHex("")}),{callTransform:e,queryTransform:e}))}const k1=({IDL:t})=>t.Service({change:t.Func([],[],[])}),Gv="bkyz2-fmaaa-aaaaa-qaaaq-cai",P1=(t,e={})=>{const r=e.agent||new Qo({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),rs.createActor(k1,{agent:r,canisterId:t,...e.actorOptions})},O1=P1(Gv),M1=async(t,e)=>{const r=new Qo({}),n=({IDL:i})=>i.Service({__motoko_inspect_data:i.Func([],[i.Vec(i.Nat8)],[])});return e!=="ic"&&r.fetchRootKey().catch(i=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(i)}),await rs.createActor(n,{agent:r,canisterId:t}).__motoko_inspect_data()};class Wr{constructor(e,r){Xe(this,"objectId");Xe(this,"objectType");this.objectId=e,this.objectType=r}}class xl extends Wr{constructor(r,n,a){super(r,"object");Xe(this,"hashBlob");Xe(this,"fields");this.hashBlob=n,this.fields=a}}class El extends Wr{constructor(r,n){super(r,"blob");Xe(this,"bytes");this.bytes=n}}class Hv extends Wr{constructor(r,n){super(r,"bigint");Xe(this,"value");this.value=n}}class Sl extends Wr{constructor(r,n,a){super(r,"array");Xe(this,"mutable");Xe(this,"elements");this.mutable=n,this.elements=a}}class Tl extends Wr{constructor(r,n){super(r,"text");Xe(this,"value");this.value=n}}class _l extends Wr{constructor(r,n){super(r,"mutbox");Xe(this,"field");this.field=n}}class Wv extends Wr{constructor(r,n,a){super(r,"closure");Xe(this,"functionId");Xe(this,"elements");this.functionId=n,this.elements=a}}class Bl extends Wr{constructor(r,n){super(r,"actor");Xe(this,"bytes");this.bytes=n}}class Kv extends Wr{constructor(r,n,a){super(r,"variant");Xe(this,"tag");Xe(this,"field");this.tag=n,this.field=a}}class Al extends Wr{constructor(r,n,a){super(r,"shared_function");Xe(this,"actor");Xe(this,"functionName");this.actor=n,this.functionName=a}}class oc{constructor(e){Xe(this,"valueType");this.valueType=e}}const F1=0xfffffffffffffffbn;class gi extends oc{constructor(r){super("pointer");Xe(this,"objectId");this.objectId=r}isNull(){return this.objectId==F1}}class Cl extends oc{constructor(r){super("bool");Xe(this,"value");this.value=r}}class Yv extends oc{constructor(r){super("bigint");Xe(this,"value");this.value=r}}const Pr=8,Nf=!0;class D1{constructor(e){Xe(this,"data");Xe(this,"position");if(e.length%Pr!==0)throw new Error("Data must be a multiple of word size");this.data=new DataView(e.buffer),this.position=0}static parse(e){return new this(e).parseHeap()}parseHeap(){const e=Number(this.nextWord()),r=this.parseRoot(),n=this.parseObjects();return{version:e,roots:r,objects:n}}parseRoot(){return[this.parseValue()]}parseObjects(){const e=[];for(;this.hasMore();)e.push(this.parseHeapObject());return e}parseHeapObject(){const e=this.nextWord(),r=Number(this.nextWord()),n=Ao.fromValue(r);if(n==null)throw new Error("Invalid object tag "+r);switch(n){case 1:return this.parseRegularObject(e);case 25:case 27:case 29:case 31:return this.parseBlob(e,n);case 35:return this.parseBigInteger(e);case 5:case 3:case 7:case 9:return this.parseArray(e,n);case 17:return this.parseMutBox(e);case 19:return this.parseClosure(e);case 23:return this.parseVariant(e);default:throw new Error(`Unsupported object tag ${n}`)}}parseVariant(e){const r=Number(this.nextWord()),n=this.parseValue();return new Kv(e,r,n)}parseClosure(e){const r=Number(this.nextWord()),n=Number(this.nextWord()),a=[];for(let i=0;i<n;i++)a.push(this.parseValue());return new Wv(e,r,a)}parseMutBox(e){const r=this.parseValue();return new _l(e,r)}parseBigInteger(e){const r=this.nextUInt32(),n=this.nextUInt32(),a=this.nextUInt32();if(a>1)throw new Error("Invalid BigInt sign");if(this.skip(4),this.skip(Pr),r>n)throw new Error(`Invalid BigInt length: alloc ${n}, used ${r}`);let i=0n;for(let s=0;s<r;s++){const o=this.nextWord(),u=1n<<60n;i=i*u+o}for(let s=r;s<n;s++)this.skip(Pr);return a!=0&&(i=-i),new Hv(e,i)}parseArray(e,r){const n=this.nextWord(),a=[];for(let i=0;i<n;i++)a.push(this.parseValue());switch(r){case 3:case 5:return new Sl(e,r==5,a);case 9:if(a.length!=2)throw new Error("Invalid shared function");return new Al(e,a[0],a[1]);default:throw new Error(`Unsupported array tag ${r}`)}}parseBlob(e,r){const n=Number(this.nextWord()),a=this.readBytes(n);switch(this.alignToWord(),r){case 25:return new El(e,a);case 27:const i=String.fromCharCode.apply(null,Array.from(a));return new Tl(e,i);case 31:return new Bl(e,a);default:throw new Error(`Unsupported blob tag ${r}`)}}parseRegularObject(e){const r=Number(this.nextWord()),n=this.parseValue(),a=[];for(let i=0;i<r;i++)a.push(this.parseValue());return new xl(e,n,a)}parseValue(){const e=this.nextWord();if(e==0n)return new Cl(!1);if(e==1n)return new Cl(!0);if((e&1n)==1n)return new gi(e);if((e&3n)==2n)return new Yv(e>>2n);throw new Error(`Unsupported value ${e}`)}hasMore(){return this.position<this.data.byteLength}nextWord(){this.ensure(Pr),this.checkAlignment(Pr);let e=this.data.getBigUint64(this.position,Nf);return this.position+=Pr,e}nextUInt32(){this.ensure(4);let r=this.data.getUint32(this.position,Nf);return this.position+=4,r}readBytes(e){this.ensure(e);const r=this.data.buffer.slice(this.position,this.position+e),n=new DataView(r);return this.position+=e,new Uint8Array(n.buffer)}alignToWord(){if(this.position%Pr!=0){let e=Pr-this.position%Pr;this.skip(e)}this.checkAlignment(Pr)}skip(e){this.ensure(e),this.position+=e}ensure(e){if(this.position+e>this.data.byteLength)throw new Error("Parsing beyond data end")}checkAlignment(e){if(this.position%e!=0)throw new Error(`Misaligned read ${e}`)}}var Ao=(t=>(t[t.TAG_OBJECT=1]="TAG_OBJECT",t[t.TAG_ARRAY_I=3]="TAG_ARRAY_I",t[t.TAG_ARRAY_M=5]="TAG_ARRAY_M",t[t.TAG_ARRAY_T=7]="TAG_ARRAY_T",t[t.TAG_ARRAY_S=9]="TAG_ARRAY_S",t[t.TAG_BITS64_U=11]="TAG_BITS64_U",t[t.TAG_BITS64_S=13]="TAG_BITS64_S",t[t.TAG_BITS64_F=15]="TAG_BITS64_F",t[t.TAG_MUTBOX=17]="TAG_MUTBOX",t[t.TAG_CLOSURE=19]="TAG_CLOSURE",t[t.TAG_SOME=21]="TAG_SOME",t[t.TAG_VARIANT=23]="TAG_VARIANT",t[t.TAG_BLOB_B=25]="TAG_BLOB_B",t[t.TAG_BLOB_T=27]="TAG_BLOB_T",t[t.TAG_BLOB_P=29]="TAG_BLOB_P",t[t.TAG_BLOB_A=31]="TAG_BLOB_A",t[t.TAG_BIGINT=35]="TAG_BIGINT",t[t.TAG_CONCAT=37]="TAG_CONCAT",t[t.TAG_REGION=39]="TAG_REGION",t))(Ao||{});(t=>{function e(n){return Object.values(t).includes(n)?n:void 0}t.fromValue=e;function r(n){return t[n]}t.toString=r})(Ao||(Ao={}));function wt(t){"@babel/helpers - typeof";return wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(t)}function uc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lc(t,e,r){return e&&Rf(t.prototype,e),r&&Rf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zv(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xr(t,e){return U1(t)||L1(t,e)||Xv(t,e)||$1()}function U1(t){if(Array.isArray(t))return t}function L1(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],a=!0,i=!1,s,o;try{for(r=r.call(t);!(a=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));a=!0);}catch(u){i=!0,o=u}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw o}}return n}}function Xv(t,e){if(t){if(typeof t=="string")return kf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kf(t,e)}}function kf(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qv(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Xv(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return i=u.done,u},e:function(u){s=!0,o=u},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(s)throw o}}}}var pt=typeof window>"u"?null:window,Pf=pt?pt.navigator:null;pt&&pt.document;var z1=wt(""),jv=wt({}),V1=wt(function(){}),q1=typeof HTMLElement>"u"?"undefined":wt(HTMLElement),ns=function(e){return e&&e.instanceString&&nt(e.instanceString)?e.instanceString():null},Be=function(e){return e!=null&&wt(e)==z1},nt=function(e){return e!=null&&wt(e)===V1},Ye=function(e){return!nr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},De=function(e){return e!=null&&wt(e)===jv&&!Ye(e)&&e.constructor===Object},G1=function(e){return e!=null&&wt(e)===jv},Ee=function(e){return e!=null&&wt(e)===wt(1)&&!isNaN(e)},H1=function(e){return Ee(e)&&Math.floor(e)===e},Co=function(e){if(q1!=="undefined")return e!=null&&e instanceof HTMLElement},nr=function(e){return as(e)||Jv(e)},as=function(e){return ns(e)==="collection"&&e._private.single},Jv=function(e){return ns(e)==="collection"&&!e._private.single},cc=function(e){return ns(e)==="core"},e0=function(e){return ns(e)==="stylesheet"},W1=function(e){return ns(e)==="event"},In=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},K1=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Y1=function(e){return De(e)&&Ee(e.x1)&&Ee(e.x2)&&Ee(e.y1)&&Ee(e.y2)},Z1=function(e){return G1(e)&&nt(e.then)},X1=function(){return Pf&&Pf.userAgent.match(/msie|trident|edge/i)},Fi=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);return i.join("$")});var n=function a(){var i=this,s=arguments,o,u=r.apply(i,s),l=a.cache;return(o=l[u])||(o=l[u]=e.apply(i,s)),o};return n.cache={},n},fc=Fi(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),jo=Fi(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),t0=Fi(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Of=function(e){return In(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},yt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Q1="rgb[a]?\\(("+yt+"[%]?)\\s*,\\s*("+yt+"[%]?)\\s*,\\s*("+yt+"[%]?)(?:\\s*,\\s*("+yt+"))?\\)",j1="rgb[a]?\\((?:"+yt+"[%]?)\\s*,\\s*(?:"+yt+"[%]?)\\s*,\\s*(?:"+yt+"[%]?)(?:\\s*,\\s*(?:"+yt+"))?\\)",J1="hsl[a]?\\(("+yt+")\\s*,\\s*("+yt+"[%])\\s*,\\s*("+yt+"[%])(?:\\s*,\\s*("+yt+"))?\\)",eb="hsl[a]?\\((?:"+yt+")\\s*,\\s*(?:"+yt+"[%])\\s*,\\s*(?:"+yt+"[%])(?:\\s*,\\s*(?:"+yt+"))?\\)",tb="\\#[0-9a-fA-F]{3}",rb="\\#[0-9a-fA-F]{6}",r0=function(e,r){return e<r?-1:e>r?1:0},nb=function(e,r){return-1*r0(e,r)},Ae=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var s=a[i];t[s]=n[s]}}return t},ab=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,s=16;return r?(n=parseInt(e[1]+e[1],s),a=parseInt(e[2]+e[2],s),i=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),a=parseInt(e[3]+e[4],s),i=parseInt(e[5]+e[6],s)),[n,a,i]}},ib=function(e){var r,n,a,i,s,o,u,l;function c(d,b,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?d+(b-d)*6*y:y<1/2?b:y<2/3?d+(b-d)*(2/3-y)*6:d}var f=new RegExp("^"+J1+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(f[2]),a<0||a>100||(a=a/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,s=f[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(a===0)o=u=l=Math.round(i*255);else{var h=i<.5?i*(1+a):i+a-i*a,v=2*i-h;o=Math.round(255*c(v,h,n+1/3)),u=Math.round(255*c(v,h,n)),l=Math.round(255*c(v,h,n-1/3))}r=[o,u,l,s]}return r},sb=function(e){var r,n=new RegExp("^"+Q1+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var s=n[i];if(s[s.length-1]==="%"&&(a[i]=!0),s=parseFloat(s),a[i]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var o=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(o&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;r.push(l)}}return r},ob=function(e){return lb[e.toLowerCase()]},ub=function(e){return(Ye(e)?e:null)||ob(e)||ab(e)||sb(e)||ib(e)},lb={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},n0=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(De(s))throw Error("Tried to set map with object key");i<n.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=e.value}},a0=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(De(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r};function cb(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ia=cb,yi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fb(t,e){return e={exports:{}},t(e,e.exports),e.exports}var db=typeof yi=="object"&&yi&&yi.Object===Object&&yi,hb=db,vb=typeof self=="object"&&self&&self.Object===Object&&self,pb=hb||vb||Function("return this")(),Jo=pb,gb=function(){return Jo.Date.now()},zu=gb,yb=/\s/;function mb(t){for(var e=t.length;e--&&yb.test(t.charAt(e)););return e}var bb=mb,wb=/^\s+/;function xb(t){return t&&t.slice(0,bb(t)+1).replace(wb,"")}var Eb=xb,Sb=Jo.Symbol,Ha=Sb,i0=Object.prototype,Tb=i0.hasOwnProperty,_b=i0.toString,li=Ha?Ha.toStringTag:void 0;function Bb(t){var e=Tb.call(t,li),r=t[li];try{t[li]=void 0;var n=!0}catch{}var a=_b.call(t);return n&&(e?t[li]=r:delete t[li]),a}var Ab=Bb,Cb=Object.prototype,Ib=Cb.toString;function Nb(t){return Ib.call(t)}var Rb=Nb,kb="[object Null]",Pb="[object Undefined]",Mf=Ha?Ha.toStringTag:void 0;function Ob(t){return t==null?t===void 0?Pb:kb:Mf&&Mf in Object(t)?Ab(t):Rb(t)}var s0=Ob;function Mb(t){return t!=null&&typeof t=="object"}var Fb=Mb,Db="[object Symbol]";function Ub(t){return typeof t=="symbol"||Fb(t)&&s0(t)==Db}var is=Ub,Ff=0/0,Lb=/^[-+]0x[0-9a-f]+$/i,$b=/^0b[01]+$/i,zb=/^0o[0-7]+$/i,Vb=parseInt;function qb(t){if(typeof t=="number")return t;if(is(t))return Ff;if(ia(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ia(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Eb(t);var r=$b.test(t);return r||zb.test(t)?Vb(t.slice(2),r?2:8):Lb.test(t)?Ff:+t}var Df=qb,Gb="Expected a function",Hb=Math.max,Wb=Math.min;function Kb(t,e,r){var n,a,i,s,o,u,l=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(Gb);e=Df(e)||0,ia(r)&&(c=!!r.leading,f="maxWait"in r,i=f?Hb(Df(r.maxWait)||0,e):i,h="trailing"in r?!!r.trailing:h);function v(O){var A=n,D=a;return n=a=void 0,l=O,s=t.apply(D,A),s}function d(O){return l=O,o=setTimeout(m,e),c?v(O):s}function b(O){var A=O-u,D=O-l,F=e-A;return f?Wb(F,i-D):F}function y(O){var A=O-u,D=O-l;return u===void 0||A>=e||A<0||f&&D>=i}function m(){var O=zu();if(y(O))return E(O);o=setTimeout(m,b(O))}function E(O){return o=void 0,h&&n?v(O):(n=a=void 0,s)}function S(){o!==void 0&&clearTimeout(o),l=0,n=u=a=o=void 0}function B(){return o===void 0?s:E(zu())}function C(){var O=zu(),A=y(O);if(n=arguments,a=this,u=O,A){if(o===void 0)return d(u);if(f)return clearTimeout(o),o=setTimeout(m,e),v(u)}return o===void 0&&(o=setTimeout(m,e)),s}return C.cancel=S,C.flush=B,C}var eu=Kb,Vu=pt?pt.performance:null,o0=Vu&&Vu.now?function(){return Vu.now()}:function(){return Date.now()},Yb=function(){if(pt){if(pt.requestAnimationFrame)return function(t){pt.requestAnimationFrame(t)};if(pt.mozRequestAnimationFrame)return function(t){pt.mozRequestAnimationFrame(t)};if(pt.webkitRequestAnimationFrame)return function(t){pt.webkitRequestAnimationFrame(t)};if(pt.msRequestAnimationFrame)return function(t){pt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(o0())},1e3/60)}}(),Io=function(e){return Yb(e)},nn=o0,Ra=9261,u0=65599,mi=5381,l0=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ra,n=r,a;a=e.next(),!a.done;)n=n*u0+a.value|0;return n},Di=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ra;return r*u0+e|0},Ui=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi;return(r<<5)+r+e|0},Zb=function(e,r){return e*2097152+r},pn=function(e){return e[0]*2097152+e[1]},As=function(e,r){return[Di(e[0],r[0]),Ui(e[1],r[1])]},Xb=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return l0(s,r)},sa=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return l0(s,r)},c0=function(){return Qb(arguments)},Qb=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=sa(a):r=sa(a,r)}return r},Uf=!0,jb=console.warn!=null,Jb=console.trace!=null,dc=Number.MAX_SAFE_INTEGER||9007199254740991,f0=function(){return!0},No=function(){return!1},Lf=function(){return 0},hc=function(){},st=function(e){throw new Error(e)},d0=function(e){if(e!==void 0)Uf=!!e;else return Uf},Ve=function(e){d0()&&(jb?console.warn(e):(console.log(e),Jb&&console.trace()))},ew=function(e){return Ae({},e)},Vr=function(e){return e==null?e:Ye(e)?e.slice():De(e)?ew(e):e},tw=function(e){return e.slice()},h0=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},rw={},v0=function(){return rw},Pt=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var s=r[i],o=n==null?void 0:n[s];a[s]=o===void 0?e[s]:o}return a}},Nn=function(e,r,n){for(var a=e.length-1;a>=0&&!(e[a]===r&&(e.splice(a,1),n));a--);},vc=function(e){e.splice(0,e.length)},nw=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Tr=function(e,r,n){return n&&(r=t0(n,r)),e[r]},Sn=function(e,r,n,a){n&&(r=t0(n,r)),e[r]=a},aw=function(){function t(){uc(this,t),this._obj={}}return lc(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}]),t}(),qr=typeof Map<"u"?Map:aw,iw="undefined",sw=function(){function t(e){if(uc(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return lc(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}]),t}(),Qa=(typeof Set>"u"?"undefined":wt(Set))!==iw?Set:sw,tu=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!cc(e)){st("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){st("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new Qa,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=e.pan(),u=e.zoom();i.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}var l=[];Ye(r.classes)?l=r.classes:Be(r.classes)&&(l=r.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var h=l[c];!h||h===""||i.classes.add(h)}this.createEmitter();var v=r.style||r.css;v&&(Ve("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(v)),(n===void 0||n)&&this.restore()},$f=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var s;De(n)&&!nr(n)&&(s=n,n=s.roots||s.root,a=s.visit,i=s.directed),i=arguments.length===2&&!nt(a)?a:i,a=nt(a)?a:function(){};for(var o=this._private.cy,u=n=Be(n)?this.filter(n):n,l=[],c=[],f={},h={},v={},d=0,b,y=this.byGroup(),m=y.nodes,E=y.edges,S=0;S<u.length;S++){var B=u[S],C=B.id();B.isNode()&&(l.unshift(B),e.bfs&&(v[C]=!0,c.push(B)),h[C]=0)}for(var O=function(){var R=e.bfs?l.shift():l.pop(),I=R.id();if(e.dfs){if(v[I])return"continue";v[I]=!0,c.push(R)}var G=h[I],V=f[I],$=V!=null?V.source():null,X=V!=null?V.target():null,ae=V==null?void 0:R.same($)?X[0]:$[0],ce=void 0;if(ce=a(R,V,ae,d++,G),ce===!0)return b=R,"break";if(ce===!1)return"break";for(var re=R.connectedEdges().filter(function(he){return(!i||he.source().same(R))&&E.has(he)}),Z=0;Z<re.length;Z++){var le=re[Z],N=le.connectedNodes().filter(function(he){return!he.same(R)&&m.has(he)}),fe=N.id();N.length!==0&&!v[fe]&&(N=N[0],l.push(N),e.bfs&&(v[fe]=!0,c.push(N)),f[fe]=le,h[fe]=h[I]+1)}};l.length!==0;){var A=O();if(A!=="continue"&&A==="break")break}for(var D=o.collection(),F=0;F<c.length;F++){var U=c[F],W=f[U.id()];W!=null&&D.push(W),D.push(U)}return{path:o.collection(D),found:o.collection(b)}}},Li={breadthFirstSearch:$f({bfs:!0}),depthFirstSearch:$f({dfs:!0})};Li.bfs=Li.breadthFirstSearch;Li.dfs=Li.depthFirstSearch;var ow=fb(function(t,e){(function(){var r,n,a,i,s,o,u,l,c,f,h,v,d,b,y;a=Math.floor,f=Math.min,n=function(m,E){return m<E?-1:m>E?1:0},c=function(m,E,S,B,C){var O;if(S==null&&(S=0),C==null&&(C=n),S<0)throw new Error("lo must be non-negative");for(B==null&&(B=m.length);S<B;)O=a((S+B)/2),C(E,m[O])<0?B=O:S=O+1;return[].splice.apply(m,[S,S-S].concat(E)),E},o=function(m,E,S){return S==null&&(S=n),m.push(E),b(m,0,m.length-1,S)},s=function(m,E){var S,B;return E==null&&(E=n),S=m.pop(),m.length?(B=m[0],m[0]=S,y(m,0,E)):B=S,B},l=function(m,E,S){var B;return S==null&&(S=n),B=m[0],m[0]=E,y(m,0,S),B},u=function(m,E,S){var B;return S==null&&(S=n),m.length&&S(m[0],E)<0&&(B=[m[0],E],E=B[0],m[0]=B[1],y(m,0,S)),E},i=function(m,E){var S,B,C,O,A,D;for(E==null&&(E=n),O=(function(){D=[];for(var F=0,U=a(m.length/2);0<=U?F<U:F>U;0<=U?F++:F--)D.push(F);return D}).apply(this).reverse(),A=[],B=0,C=O.length;B<C;B++)S=O[B],A.push(y(m,S,E));return A},d=function(m,E,S){var B;if(S==null&&(S=n),B=m.indexOf(E),B!==-1)return b(m,0,B,S),y(m,B,S)},h=function(m,E,S){var B,C,O,A,D;if(S==null&&(S=n),C=m.slice(0,E),!C.length)return C;for(i(C,S),D=m.slice(E),O=0,A=D.length;O<A;O++)B=D[O],u(C,B,S);return C.sort(S).reverse()},v=function(m,E,S){var B,C,O,A,D,F,U,W,H;if(S==null&&(S=n),E*10<=m.length){if(O=m.slice(0,E).sort(S),!O.length)return O;for(C=O[O.length-1],U=m.slice(E),A=0,F=U.length;A<F;A++)B=U[A],S(B,C)<0&&(c(O,B,0,null,S),O.pop(),C=O[O.length-1]);return O}for(i(m,S),H=[],D=0,W=f(E,m.length);0<=W?D<W:D>W;0<=W?++D:--D)H.push(s(m,S));return H},b=function(m,E,S,B){var C,O,A;for(B==null&&(B=n),C=m[S];S>E;){if(A=S-1>>1,O=m[A],B(C,O)<0){m[S]=O,S=A;continue}break}return m[S]=C},y=function(m,E,S){var B,C,O,A,D;for(S==null&&(S=n),C=m.length,D=E,O=m[E],B=2*E+1;B<C;)A=B+1,A<C&&!(S(m[B],m[A])<0)&&(B=A),m[E]=m[B],E=B,B=2*E+1;return m[E]=O,b(m,D,E,S)},r=function(){m.push=o,m.pop=s,m.replace=l,m.pushpop=u,m.heapify=i,m.updateItem=d,m.nlargest=h,m.nsmallest=v;function m(E){this.cmp=E??n,this.nodes=[]}return m.prototype.push=function(E){return o(this.nodes,E,this.cmp)},m.prototype.pop=function(){return s(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(E){return this.nodes.indexOf(E)!==-1},m.prototype.replace=function(E){return l(this.nodes,E,this.cmp)},m.prototype.pushpop=function(E){return u(this.nodes,E,this.cmp)},m.prototype.heapify=function(){return i(this.nodes,this.cmp)},m.prototype.updateItem=function(E){return d(this.nodes,E,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var E;return E=new m,E.nodes=this.nodes.slice(0),E},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,E){return t.exports=E()}(this,function(){return r})}).call(yi)}),ss=ow,uw=Pt({root:null,weight:function(e){return 1},directed:!1}),lw={dijkstra:function(e){if(!De(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=uw(e),a=n.root,i=n.weight,s=n.directed,o=this,u=i,l=Be(a)?this.filter(a)[0]:a[0],c={},f={},h={},v=this.byGroup(),d=v.nodes,b=v.edges;b.unmergeBy(function(G){return G.isLoop()});for(var y=function(V){return c[V.id()]},m=function(V,$){c[V.id()]=$,E.updateItem(V)},E=new ss(function(G,V){return y(G)-y(V)}),S=0;S<d.length;S++){var B=d[S];c[B.id()]=B.same(l)?0:1/0,E.push(B)}for(var C=function(V,$){for(var X=(s?V.edgesTo($):V.edgesWith($)).intersect(b),ae=1/0,ce,re=0;re<X.length;re++){var Z=X[re],le=u(Z);(le<ae||!ce)&&(ae=le,ce=Z)}return{edge:ce,dist:ae}};E.size()>0;){var O=E.pop(),A=y(O),D=O.id();if(h[D]=A,A!==1/0)for(var F=O.neighborhood().intersect(d),U=0;U<F.length;U++){var W=F[U],H=W.id(),R=C(O,W),I=A+R.dist;I<y(W)&&(m(W,I),f[H]={node:O,edge:R.edge})}}return{distanceTo:function(V){var $=Be(V)?d.filter(V)[0]:V[0];return h[$.id()]},pathTo:function(V){var $=Be(V)?d.filter(V)[0]:V[0],X=[],ae=$,ce=ae.id();if($.length>0)for(X.unshift($);f[ce];){var re=f[ce];X.unshift(re.edge),X.unshift(re.node),ae=re.node,ce=ae.id()}return o.spawn(X)}}}},cw={kruskal:function(e){e=e||function(S){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,s=new Array(i),o=n,u=function(B){for(var C=0;C<s.length;C++){var O=s[C];if(O.has(B))return C}},l=0;l<i;l++)s[l]=this.spawn(n[l]);for(var c=a.sort(function(S,B){return e(S)-e(B)}),f=0;f<c.length;f++){var h=c[f],v=h.source()[0],d=h.target()[0],b=u(v),y=u(d),m=s[b],E=s[y];b!==y&&(o.merge(h),m.merge(E),s.splice(y,1))}return o}},fw=Pt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),dw={aStar:function(e){var r=this.cy(),n=fw(e),a=n.root,i=n.goal,s=n.heuristic,o=n.directed,u=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var l=a.id(),c=i.id(),f={},h={},v={},d=new ss(function(ce,re){return h[ce.id()]-h[re.id()]}),b=new Qa,y={},m={},E=function(re,Z){d.push(re),b.add(Z)},S,B,C=function(){S=d.pop(),B=S.id(),b.delete(B)},O=function(re){return b.has(re)};E(a,l),f[l]=0,h[l]=s(a);for(var A=0;d.size()>0;){if(C(),A++,B===c){for(var D=[],F=i,U=c,W=m[U];D.unshift(F),W!=null&&D.unshift(W),F=y[U],F!=null;)U=F.id(),W=m[U];return{found:!0,distance:f[B],path:this.spawn(D),steps:A}}v[B]=!0;for(var H=S._private.edges,R=0;R<H.length;R++){var I=H[R];if(this.hasElementWithId(I.id())&&!(o&&I.data("source")!==B)){var G=I.source(),V=I.target(),$=G.id()!==B?G:V,X=$.id();if(this.hasElementWithId(X)&&!v[X]){var ae=f[B]+u(I);if(!O(X)){f[X]=ae,h[X]=ae+s($),E($,X),y[X]=S,m[X]=I;continue}ae<f[X]&&(f[X]=ae,h[X]=ae+s($),y[X]=S,m[X]=I)}}}}return{found:!1,distance:void 0,path:void 0,steps:A}}},hw=Pt({weight:function(e){return 1},directed:!1}),vw={floydWarshall:function(e){for(var r=this.cy(),n=hw(e),a=n.weight,i=n.directed,s=a,o=this.byGroup(),u=o.nodes,l=o.edges,c=u.length,f=c*c,h=function(le){return u.indexOf(le)},v=function(le){return u[le]},d=new Array(f),b=0;b<f;b++){var y=b%c,m=(b-y)/c;m===y?d[b]=0:d[b]=1/0}for(var E=new Array(f),S=new Array(f),B=0;B<l.length;B++){var C=l[B],O=C.source()[0],A=C.target()[0];if(O!==A){var D=h(O),F=h(A),U=D*c+F,W=s(C);if(d[U]>W&&(d[U]=W,E[U]=F,S[U]=C),!i){var H=F*c+D;!i&&d[H]>W&&(d[H]=W,E[H]=D,S[H]=C)}}}for(var R=0;R<c;R++)for(var I=0;I<c;I++)for(var G=I*c+R,V=0;V<c;V++){var $=I*c+V,X=R*c+V;d[G]+d[X]<d[$]&&(d[$]=d[G]+d[X],E[$]=E[G])}var ae=function(le){return(Be(le)?r.filter(le):le)[0]},ce=function(le){return h(ae(le))},re={distance:function(le,N){var fe=ce(le),he=ce(N);return d[fe*c+he]},path:function(le,N){var fe=ce(le),he=ce(N),pe=v(fe);if(fe===he)return pe.collection();if(E[fe*c+he]==null)return r.collection();var ie=r.collection(),J=fe,k;for(ie.merge(pe);fe!==he;)J=fe,fe=E[fe*c+he],k=S[J*c+fe],ie.merge(k),ie.merge(v(fe));return ie}};return re}},pw=Pt({weight:function(e){return 1},directed:!1,root:null}),gw={bellmanFord:function(e){var r=this,n=pw(e),a=n.weight,i=n.directed,s=n.root,o=a,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,h=c.nodes,v=h.length,d=new qr,b=!1,y=[];s=l.collection(s)[0],f.unmergeBy(function(g){return g.isLoop()});for(var m=f.length,E=function(w){var P=d.get(w.id());return P||(P={},d.set(w.id(),P)),P},S=function(w){return(Be(w)?l.$(w):w)[0]},B=function(w){return E(S(w)).dist},C=function(w){for(var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,q=S(w),j=[],oe=q;;){if(oe==null)return r.spawn();var ge=E(oe),ve=ge.edge,L=ge.pred;if(j.unshift(oe[0]),oe.same(P)&&j.length>0)break;ve!=null&&j.unshift(ve),oe=L}return u.spawn(j)},O=0;O<v;O++){var A=h[O],D=E(A);A.same(s)?D.dist=0:D.dist=1/0,D.pred=null,D.edge=null}for(var F=!1,U=function(w,P,q,j,oe,ge){var ve=j.dist+ge;ve<oe.dist&&!q.same(j.edge)&&(oe.dist=ve,oe.pred=w,oe.edge=q,F=!0)},W=1;W<v;W++){F=!1;for(var H=0;H<m;H++){var R=f[H],I=R.source(),G=R.target(),V=o(R),$=E(I),X=E(G);U(I,G,R,$,X,V),i||U(G,I,R,X,$,V)}if(!F)break}if(F)for(var ae=[],ce=0;ce<m;ce++){var re=f[ce],Z=re.source(),le=re.target(),N=o(re),fe=E(Z).dist,he=E(le).dist;if(fe+N<he||!i&&he+N<fe)if(b||(Ve("Graph contains a negative weight cycle for Bellman-Ford"),b=!0),e.findNegativeWeightCycles!==!1){var pe=[];fe+N<he&&pe.push(Z),!i&&he+N<fe&&pe.push(le);for(var ie=pe.length,J=0;J<ie;J++){var k=pe[J],M=[k];M.push(E(k).edge);for(var K=E(k).pred;M.indexOf(K)===-1;)M.push(K),M.push(E(K).edge),K=E(K).pred;M=M.slice(M.indexOf(K));for(var te=M[0].id(),Q=0,ee=2;ee<M.length;ee+=2)M[ee].id()<te&&(te=M[ee].id(),Q=ee);M=M.slice(Q).concat(M.slice(0,Q)),M.push(M[0]);var _=M.map(function(g){return g.id()}).join(",");ae.indexOf(_)===-1&&(y.push(u.spawn(M)),ae.push(_))}}else break}return{distanceTo:B,pathTo:C,hasNegativeWeightCycle:b,negativeWeightCycles:y}}},yw=Math.sqrt(2),mw=function(e,r,n){n.length===0&&st("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],s=a[2],o=r[i],u=r[s],l=n,c=l.length-1;c>=0;c--){var f=l[c],h=f[1],v=f[2];(r[h]===o&&r[v]===u||r[h]===u&&r[v]===o)&&l.splice(c,1)}for(var d=0;d<l.length;d++){var b=l[d];b[1]===u?(l[d]=b.slice(),l[d][1]=o):b[2]===u&&(l[d]=b.slice(),l[d][2]=o)}for(var y=0;y<r.length;y++)r[y]===u&&(r[y]=o);return l},qu=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=mw(i,e,r),n--}return r},bw={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(X){return X.isLoop()});var i=n.length,s=a.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/yw);if(i<2){st("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<s;c++){var f=a[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var h=1/0,v=[],d=new Array(i),b=new Array(i),y=new Array(i),m=function(ae,ce){for(var re=0;re<i;re++)ce[re]=ae[re]},E=0;E<=o;E++){for(var S=0;S<i;S++)b[S]=S;var B=qu(b,l.slice(),i,u),C=B.slice();m(b,y);var O=qu(b,B,u,2),A=qu(y,C,u,2);O.length<=A.length&&O.length<h?(h=O.length,v=O,m(b,d)):A.length<=O.length&&A.length<h&&(h=A.length,v=A,m(y,d))}for(var D=this.spawn(v.map(function(X){return a[X[0]]})),F=this.spawn(),U=this.spawn(),W=d[0],H=0;H<d.length;H++){var R=d[H],I=n[H];R===W?F.merge(I):U.merge(I)}var G=function(ae){var ce=e.spawn();return ae.forEach(function(re){ce.merge(re),re.connectedEdges().forEach(function(Z){e.contains(Z)&&!D.contains(Z)&&ce.merge(Z)})}),ce},V=[G(F),G(U)],$={cut:D,components:V,partition1:F,partition2:U};return $}},ww=function(e){return{x:e.x,y:e.y}},ru=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},p0=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},ka=function(e){return{x:e[0],y:e[1]}},xw=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.min(s,a))}return a},Ew=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.max(s,a))}return a},Sw=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,s=r;s<n;s++){var o=e[s];isFinite(o)&&(a+=o,i++)}return a/i},Tw=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var o=0,u=e.length-1;u>=0;u--){var l=e[u];s?isFinite(l)||(e[u]=-1/0,o++):e.splice(u,1)}i&&e.sort(function(h,v){return h-v});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+o]:(e[f-1+o]+e[f+o])/2},_w=function(e){return Math.PI*e/180},Cs=function(e,r){return Math.atan2(r,e)-Math.PI/2},pc=Math.log2||function(t){return Math.log(t)/Math.log(2)},g0=function(e){return e>0?1:e<0?-1:0},oa=function(e,r){return Math.sqrt(Gn(e,r))},Gn=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},Bw=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},St=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},Ma=function(e,r,n,a){return{x:St(e.x,r.x,n.x,a),y:St(e.y,r.y,n.y,a)}},Aw=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},s=oa(e,r),o={x:i.x/s,y:i.y/s};return n=n??0,a=a??n*s,{x:e.x+o.x*a,y:e.y+o.y*a}},$i=function(e,r,n){return Math.max(e,Math.min(n,r))},er=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Cw=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},Iw=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},Nw=function(e,r,n){return{x1:e.x1+r,x2:e.x2+r,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},y0=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},Rw=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},oo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},uo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,s;if(r.length===1)n=a=i=s=r[0];else if(r.length===2)n=i=r[0],s=a=r[1];else if(r.length===4){var o=xr(r,4);n=o[0],a=o[1],i=o[2],s=o[3]}return e.x1-=s,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},zf=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},gc=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Wa=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},kw=function(e,r){return Wa(e,r.x,r.y)},m0=function(e,r){return Wa(e,r.x1,r.y1)&&Wa(e,r.x2,r.y2)},b0=function(e,r,n,a,i,s,o){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?ua(i,s):u,c=i/2,f=s/2;l=Math.min(l,c,f);var h=l!==c,v=l!==f,d;if(h){var b=n-c+l-o,y=a-f-o,m=n+c-l+o,E=y;if(d=Tn(e,r,n,a,b,y,m,E,!1),d.length>0)return d}if(v){var S=n+c+o,B=a-f+l-o,C=S,O=a+f-l+o;if(d=Tn(e,r,n,a,S,B,C,O,!1),d.length>0)return d}if(h){var A=n-c+l-o,D=a+f+o,F=n+c-l+o,U=D;if(d=Tn(e,r,n,a,A,D,F,U,!1),d.length>0)return d}if(v){var W=n-c-o,H=a-f+l-o,R=W,I=a+f-l+o;if(d=Tn(e,r,n,a,W,H,R,I,!1),d.length>0)return d}var G;{var V=n-c+l,$=a-f+l;if(G=bi(e,r,n,a,V,$,l+o),G.length>0&&G[0]<=V&&G[1]<=$)return[G[0],G[1]]}{var X=n+c-l,ae=a-f+l;if(G=bi(e,r,n,a,X,ae,l+o),G.length>0&&G[0]>=X&&G[1]<=ae)return[G[0],G[1]]}{var ce=n+c-l,re=a+f-l;if(G=bi(e,r,n,a,ce,re,l+o),G.length>0&&G[0]>=ce&&G[1]>=re)return[G[0],G[1]]}{var Z=n-c+l,le=a+f-l;if(G=bi(e,r,n,a,Z,le,l+o),G.length>0&&G[0]<=Z&&G[1]>=le)return[G[0],G[1]]}return[]},Pw=function(e,r,n,a,i,s,o){var u=o,l=Math.min(n,i),c=Math.max(n,i),f=Math.min(a,s),h=Math.max(a,s);return l-u<=e&&e<=c+u&&f-u<=r&&r<=h+u},Ow=function(e,r,n,a,i,s,o,u,l){var c={x1:Math.min(n,o,i)-l,x2:Math.max(n,o,i)+l,y1:Math.min(a,u,s)-l,y2:Math.max(a,u,s)+l};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},Mw=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var s=Math.sqrt(i),o=2*e,u=(-r+s)/o,l=(-r-s)/o;return[u,l]},Fw=function(e,r,n,a,i){var s=1e-5;e===0&&(e=s),r/=e,n/=e,a/=e;var o,u,l,c,f,h,v,d;if(u=(3*n-r*r)/9,l=-(27*a)+r*(9*n-2*(r*r)),l/=54,o=u*u*u+l*l,i[1]=0,v=r/3,o>0){f=l+Math.sqrt(o),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),h=l-Math.sqrt(o),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),i[0]=-v+f+h,v+=(f+h)/2,i[4]=i[2]=-v,v=Math.sqrt(3)*(-h+f)/2,i[3]=v,i[5]=-v;return}if(i[5]=i[3]=0,o===0){d=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),i[0]=-v+2*d,i[4]=i[2]=-(d+v);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),d=2*Math.sqrt(u),i[0]=-v+d*Math.cos(c/3),i[2]=-v+d*Math.cos((c+2*Math.PI)/3),i[4]=-v+d*Math.cos((c+4*Math.PI)/3)},Dw=function(e,r,n,a,i,s,o,u){var l=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+a*a-4*a*s+2*a*u+4*s*s-4*s*u+u*u,c=1*9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*a*s-3*a*a-3*a*u-6*s*s+3*s*u,f=1*3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*a*a-6*a*s+a*u-a*r+2*s*s+2*s*r-u*r,h=1*n*i-n*n+n*e-i*e+a*s-a*a+a*r-s*r,v=[];Fw(l,c,f,h,v);for(var d=1e-7,b=[],y=0;y<6;y+=2)Math.abs(v[y+1])<d&&v[y]>=0&&v[y]<=1&&b.push(v[y]);b.push(1),b.push(0);for(var m=-1,E,S,B,C=0;C<b.length;C++)E=Math.pow(1-b[C],2)*n+2*(1-b[C])*b[C]*i+b[C]*b[C]*o,S=Math.pow(1-b[C],2)*a+2*(1-b[C])*b[C]*s+b[C]*b[C]*u,B=Math.pow(E-e,2)+Math.pow(S-r,2),m>=0?B<m&&(m=B):m=B;return m},Uw=function(e,r,n,a,i,s){var o=[e-n,r-a],u=[i-n,s-a],l=u[0]*u[0]+u[1]*u[1],c=o[0]*o[0]+o[1]*o[1],f=o[0]*u[0]+o[1]*u[1],h=f*f/l;return f<0?c:h>l?(e-i)*(e-i)+(r-s)*(r-s):c-h},jt=function(e,r,n){for(var a,i,s,o,u,l=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(s=n[(c+1)*2],o=n[(c+1)*2+1]):(s=n[(c+1-n.length/2)*2],o=n[(c+1-n.length/2)*2+1]),!(a==e&&s==e))if(a>=e&&e>=s||a<=e&&e<=s)u=(e-a)/(s-a)*(o-i)+i,u>r&&l++;else continue;return l%2!==0},an=function(e,r,n,a,i,s,o,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var h=Math.cos(-f),v=Math.sin(-f),d=0;d<c.length/2;d++)c[d*2]=s/2*(n[d*2]*h-n[d*2+1]*v),c[d*2+1]=o/2*(n[d*2+1]*h+n[d*2]*v),c[d*2]+=a,c[d*2+1]+=i;var b;if(l>0){var y=ko(c,-l);b=Ro(y)}else b=c;return jt(e,r,b)},Lw=function(e,r,n,a,i,s,o,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var h=Math.pow(f.cx-e,2)+Math.pow(f.cy-r,2);if(h<=Math.pow(f.radius,2))return!0}return jt(e,r,l)},Ro=function(e){for(var r=new Array(e.length/2),n,a,i,s,o,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],a=e[f*4+1],i=e[f*4+2],s=e[f*4+3],f<e.length/4-1?(o=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(o=e[0],u=e[1],l=e[2],c=e[3]);var h=Tn(n,a,i,s,o,u,l,c,!0);r[f*2]=h[0],r[f*2+1]=h[1]}return r},ko=function(e,r){for(var n=new Array(e.length*2),a,i,s,o,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(s=e[(u+1)*2],o=e[(u+1)*2+1]):(s=e[0],o=e[1]);var l=o-i,c=-(s-a),f=Math.sqrt(l*l+c*c),h=l/f,v=c/f;n[u*4]=a+h*r,n[u*4+1]=i+v*r,n[u*4+2]=s+h*r,n[u*4+3]=o+v*r}return n},$w=function(e,r,n,a,i,s){var o=n-e,u=a-r;o/=i,u/=s;var l=Math.sqrt(o*o+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(a-r)*f+r]},Jn=function(e,r,n,a,i,s,o){return e-=i,r-=s,e/=n/2+o,r/=a/2+o,e*e+r*r<=1},bi=function(e,r,n,a,i,s,o){var u=[n-e,a-r],l=[e-i,r-s],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),h=l[0]*l[0]+l[1]*l[1]-o*o,v=f*f-4*c*h;if(v<0)return[];var d=(-f+Math.sqrt(v))/(2*c),b=(-f-Math.sqrt(v))/(2*c),y=Math.min(d,b),m=Math.max(d,b),E=[];if(y>=0&&y<=1&&E.push(y),m>=0&&m<=1&&E.push(m),E.length===0)return[];var S=E[0]*u[0]+e,B=E[0]*u[1]+r;if(E.length>1){if(E[0]==E[1])return[S,B];var C=E[1]*u[0]+e,O=E[1]*u[1]+r;return[S,B,C,O]}else return[S,B]},Gu=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},Tn=function(e,r,n,a,i,s,o,u,l){var c=e-i,f=n-e,h=o-i,v=r-s,d=a-r,b=u-s,y=h*v-b*c,m=f*v-d*c,E=b*f-h*d;if(E!==0){var S=y/E,B=m/E,C=.001,O=0-C,A=1+C;return O<=S&&S<=A&&O<=B&&B<=A?[e+S*f,r+S*d]:l?[e+S*f,r+S*d]:[]}else return y===0||m===0?Gu(e,n,o)===o?[o,u]:Gu(e,n,i)===i?[i,s]:Gu(i,o,n)===n?[n,a]:[]:[]},zi=function(e,r,n,a,i,s,o,u){var l=[],c,f=new Array(n.length),h=!0;s==null&&(h=!1);var v;if(h){for(var d=0;d<f.length/2;d++)f[d*2]=n[d*2]*s+a,f[d*2+1]=n[d*2+1]*o+i;if(u>0){var b=ko(f,-u);v=Ro(b)}else v=f}else v=n;for(var y,m,E,S,B=0;B<v.length/2;B++)y=v[B*2],m=v[B*2+1],B<v.length/2-1?(E=v[(B+1)*2],S=v[(B+1)*2+1]):(E=v[0],S=v[1]),c=Tn(e,r,a,i,y,m,E,S),c.length!==0&&l.push(c[0],c[1]);return l},zw=function(e,r,n,a,i,s,o,u,l){var c=[],f,h=new Array(n.length*2);l.forEach(function(E,S){S===0?(h[h.length-2]=E.startX,h[h.length-1]=E.startY):(h[S*4-2]=E.startX,h[S*4-1]=E.startY),h[S*4]=E.stopX,h[S*4+1]=E.stopY,f=bi(e,r,a,i,E.cx,E.cy,E.radius),f.length!==0&&c.push(f[0],f[1])});for(var v=0;v<h.length/4;v++)f=Tn(e,r,a,i,h[v*4],h[v*4+1],h[v*4+2],h[v*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var d=[c[0],c[1]],b=Math.pow(d[0]-e,2)+Math.pow(d[1]-r,2),y=1;y<c.length/2;y++){var m=Math.pow(c[y*2]-e,2)+Math.pow(c[y*2+1]-r,2);m<=b&&(d[0]=c[y*2],d[1]=c[y*2+1],b=m)}return d}return c},Is=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=(i-n)/i;return s<0&&(s=1e-5),[r[0]+s*a[0],r[1]+s*a[1]]},Zt=function(e,r){var n=Il(e,r);return n=w0(n),n},w0=function(e){for(var r,n,a=e.length/2,i=1/0,s=1/0,o=-1/0,u=-1/0,l=0;l<a;l++)r=e[2*l],n=e[2*l+1],i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);for(var c=2/(o-i),f=2/(u-s),h=0;h<a;h++)r=e[2*h]=e[2*h]*c,n=e[2*h+1]=e[2*h+1]*f,i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);if(s<-1)for(var v=0;v<a;v++)n=e[2*v+1]=e[2*v+1]+(-1-s);return e},Il=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),s,o=0;o<e;o++)s=o*n+a,i[2*o]=Math.cos(s),i[2*o+1]=Math.sin(-s);return i},ua=function(e,r){return Math.min(e/4,r/4,8)},x0=function(e,r){return Math.min(e/10,r/10,8)},yc=function(){return 8},Vw=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Nl=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},qw=Pt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Gw={pageRank:function(e){for(var r=qw(e),n=r.dampingFactor,a=r.precision,i=r.iterations,s=r.weight,o=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,h=f*f,v=c.length,d=new Array(h),b=new Array(f),y=(1-n)/f,m=0;m<f;m++){for(var E=0;E<f;E++){var S=m*f+E;d[S]=0}b[m]=0}for(var B=0;B<v;B++){var C=c[B],O=C.data("source"),A=C.data("target");if(O!==A){var D=l.indexOfId(O),F=l.indexOfId(A),U=s(C),W=F*f+D;d[W]+=U,b[D]+=U}}for(var H=1/f+y,R=0;R<f;R++)if(b[R]===0)for(var I=0;I<f;I++){var G=I*f+R;d[G]=H}else for(var V=0;V<f;V++){var $=V*f+R;d[$]=d[$]/b[R]+y}for(var X=new Array(f),ae=new Array(f),ce,re=0;re<f;re++)X[re]=1;for(var Z=0;Z<i;Z++){for(var le=0;le<f;le++)ae[le]=0;for(var N=0;N<f;N++)for(var fe=0;fe<f;fe++){var he=N*f+fe;ae[N]+=d[he]*X[fe]}Bw(ae),ce=X,X=ae,ae=ce;for(var pe=0,ie=0;ie<f;ie++){var J=ce[ie]-X[ie];pe+=J*J}if(pe<a)break}var k={rank:function(K){return K=o.collection(K)[0],X[l.indexOf(K)]}};return k}},Vf=Pt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Fa={degreeCentralityNormalized:function(e){e=Vf(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},f={},h=0,v=0,d=0;d<a;d++){var b=n[d],y=b.id();e.root=b;var m=this.degreeCentrality(e);h<m.indegree&&(h=m.indegree),v<m.outdegree&&(v=m.outdegree),c[y]=m.indegree,f[y]=m.outdegree}return{indegree:function(S){return h==0?0:(Be(S)&&(S=r.filter(S)),c[S.id()]/h)},outdegree:function(S){return v===0?0:(Be(S)&&(S=r.filter(S)),f[S.id()]/v)}}}else{for(var i={},s=0,o=0;o<a;o++){var u=n[o];e.root=u;var l=this.degreeCentrality(e);s<l.degree&&(s=l.degree),i[u.id()]=l.degree}return{degree:function(S){return s===0?0:(Be(S)&&(S=r.filter(S)),i[S.id()]/s)}}}},degreeCentrality:function(e){e=Vf(e);var r=this.cy(),n=this,a=e,i=a.root,s=a.weight,o=a.directed,u=a.alpha;if(i=r.collection(i)[0],o){for(var v=i.connectedEdges(),d=v.filter(function(O){return O.target().same(i)&&n.has(O)}),b=v.filter(function(O){return O.source().same(i)&&n.has(O)}),y=d.length,m=b.length,E=0,S=0,B=0;B<d.length;B++)E+=s(d[B]);for(var C=0;C<b.length;C++)S+=s(b[C]);return{indegree:Math.pow(y,1-u)*Math.pow(E,u),outdegree:Math.pow(m,1-u)*Math.pow(S,u)}}else{for(var l=i.connectedEdges().intersection(n),c=l.length,f=0,h=0;h<l.length;h++)f+=s(l[h]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};Fa.dc=Fa.degreeCentrality;Fa.dcn=Fa.degreeCentralityNormalised=Fa.degreeCentralityNormalized;var qf=Pt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Da={closenessCentralityNormalized:function(e){for(var r=qf(e),n=r.harmonic,a=r.weight,i=r.directed,s=this.cy(),o={},u=0,l=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),f=0;f<l.length;f++){for(var h=0,v=l[f],d=0;d<l.length;d++)if(f!==d){var b=c.distance(v,l[d]);n?h+=1/b:h+=b}n||(h=1/h),u<h&&(u=h),o[v.id()]=h}return{closeness:function(m){return u==0?0:(Be(m)?m=s.filter(m)[0].id():m=m.id(),o[m]/u)}}},closenessCentrality:function(e){var r=qf(e),n=r.root,a=r.weight,i=r.directed,s=r.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:a,directed:i}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var h=o.distanceTo(f);s?u+=1/h:u+=h}}return s?u:1/u}};Da.cc=Da.closenessCentrality;Da.ccn=Da.closenessCentralityNormalised=Da.closenessCentralityNormalized;var Hw=Pt({weight:null,directed:!1}),Rl={betweennessCentrality:function(e){for(var r=Hw(e),n=r.directed,a=r.weight,i=a!=null,s=this.cy(),o=this.nodes(),u={},l={},c=0,f={set:function(S,B){l[S]=B,B>c&&(c=B)},get:function(S){return l[S]}},h=0;h<o.length;h++){var v=o[h],d=v.id();n?u[d]=v.outgoers().nodes():u[d]=v.openNeighborhood().nodes(),f.set(d,0)}for(var b=function(S){for(var B=o[S].id(),C=[],O={},A={},D={},F=new ss(function(fe,he){return D[fe]-D[he]}),U=0;U<o.length;U++){var W=o[U].id();O[W]=[],A[W]=0,D[W]=1/0}for(A[B]=1,D[B]=0,F.push(B);!F.empty();){var H=F.pop();if(C.push(H),i)for(var R=0;R<u[H].length;R++){var I=u[H][R],G=s.getElementById(H),V=void 0;G.edgesTo(I).length>0?V=G.edgesTo(I)[0]:V=I.edgesTo(G)[0];var $=a(V);I=I.id(),D[I]>D[H]+$&&(D[I]=D[H]+$,F.nodes.indexOf(I)<0?F.push(I):F.updateItem(I),A[I]=0,O[I]=[]),D[I]==D[H]+$&&(A[I]=A[I]+A[H],O[I].push(H))}else for(var X=0;X<u[H].length;X++){var ae=u[H][X].id();D[ae]==1/0&&(F.push(ae),D[ae]=D[H]+1),D[ae]==D[H]+1&&(A[ae]=A[ae]+A[H],O[ae].push(H))}}for(var ce={},re=0;re<o.length;re++)ce[o[re].id()]=0;for(;C.length>0;){for(var Z=C.pop(),le=0;le<O[Z].length;le++){var N=O[Z][le];ce[N]=ce[N]+A[N]/A[Z]*(1+ce[Z])}Z!=o[S].id()&&f.set(Z,f.get(Z)+ce[Z])}},y=0;y<o.length;y++)b(y);var m={betweenness:function(S){var B=s.collection(S).id();return f.get(B)},betweennessNormalized:function(S){if(c==0)return 0;var B=s.collection(S).id();return f.get(B)/c}};return m.betweennessNormalised=m.betweennessNormalized,m}};Rl.bc=Rl.betweennessCentrality;var Ww=Pt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Kw=function(e){return Ww(e)},Yw=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},Zw=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},E0=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var s=0;s<r;s++)e[s*r+a]=e[s*r+a]/n}},Xw=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var s=0;s<n;s++)a[i*n+s]=0;for(var o=0;o<n;o++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+o]*r[o*n+u]}return a},Qw=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=Xw(e,a,r);return e},jw=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return E0(a,r),a},Jw=function(e,r,n,a){for(var i=0;i<n;i++){var s=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),o=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(s!==o)return!1}return!0},ex=function(e,r,n,a){for(var i=[],s=0;s<r;s++){for(var o=[],u=0;u<r;u++)Math.round(e[s*r+u]*1e3)/1e3>0&&o.push(n[u]);o.length!==0&&i.push(a.collection(o))}return i},tx=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},rx=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&tx(e[r],e[n])&&e.splice(n,1);return e},Gf=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=Kw(e),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var u=r.length,l=u*u,c=new Array(l),f,h=0;h<l;h++)c[h]=0;for(var v=0;v<n.length;v++){var d=n[v],b=s[d.source().id()],y=s[d.target().id()],m=Yw(d,i.attributes);c[b*u+y]+=m,c[y*u+b]+=m}Zw(c,u,i.multFactor),E0(c,u);for(var E=!0,S=0;E&&S<i.maxIterations;)E=!1,f=Qw(c,u,i.expandFactor),c=jw(f,u,i.inflateFactor),Jw(c,f,l,4)||(E=!0),S++;var B=ex(c,u,r,a);return B=rx(B),B},nx={markovClustering:Gf,mcl:Gf},ax=function(e){return e},S0=function(e,r){return Math.abs(r-e)},Hf=function(e,r,n){return e+S0(r,n)},Wf=function(e,r,n){return e+Math.pow(n-r,2)},ix=function(e){return Math.sqrt(e)},sx=function(e,r,n){return Math.max(e,S0(r,n))},ci=function(e,r,n,a,i){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:ax,o=a,u,l,c=0;c<e;c++)u=r(c),l=n(c),o=i(o,u,l);return s(o)},Ka={euclidean:function(e,r,n){return e>=2?ci(e,r,n,0,Wf,ix):ci(e,r,n,0,Hf)},squaredEuclidean:function(e,r,n){return ci(e,r,n,0,Wf)},manhattan:function(e,r,n){return ci(e,r,n,0,Hf)},max:function(e,r,n){return ci(e,r,n,-1/0,sx)}};Ka["squared-euclidean"]=Ka.squaredEuclidean;Ka.squaredeuclidean=Ka.squaredEuclidean;function nu(t,e,r,n,a,i){var s;return nt(t)?s=t:s=Ka[t]||Ka.euclidean,e===0&&nt(t)?s(a,i):s(e,r,n,a,i)}var ox=Pt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),mc=function(e){return ox(e)},Po=function(e,r,n,a,i){var s=i!=="kMedoids",o=s?function(f){return n[f]}:function(f){return a[f](n)},u=function(h){return a[h](r)},l=n,c=r;return nu(e,a.length,o,u,l,c)},Hu=function(e,r,n){for(var a=n.length,i=new Array(a),s=new Array(a),o=new Array(r),u=null,l=0;l<a;l++)i[l]=e.min(n[l]).value,s[l]=e.max(n[l]).value;for(var c=0;c<r;c++){u=[];for(var f=0;f<a;f++)u[f]=Math.random()*(s[f]-i[f])+i[f];o[c]=u}return o},T0=function(e,r,n,a,i){for(var s=1/0,o=0,u=0;u<r.length;u++){var l=Po(n,e,r[u],a,i);l<s&&(s=l,o=u)}return o},_0=function(e,r,n){for(var a=[],i=null,s=0;s<r.length;s++)i=r[s],n[i.id()]===e&&a.push(i);return a},ux=function(e,r,n){return Math.abs(r-e)<=n},lx=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var s=Math.abs(e[a][i]-r[a][i]);if(s>n)return!1}return!0},cx=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},Kf=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];cx(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var s=0;s<r;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},Yf=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=Po("manhattan",r[i],e,n,"kMedoids");return a},fx=function(e){var r=this.cy(),n=this.nodes(),a=null,i=mc(e),s=new Array(i.k),o={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=Hu(n,i.k,i.attributes)):wt(i.testCentroids)==="object"?u=i.testCentroids:u=Hu(n,i.k,i.attributes):u=Hu(n,i.k,i.attributes);for(var l=!0,c=0;l&&c<i.maxIterations;){for(var f=0;f<n.length;f++)a=n[f],o[a.id()]=T0(a,u,i.distance,i.attributes,"kMeans");l=!1;for(var h=0;h<i.k;h++){var v=_0(h,n,o);if(v.length!==0){for(var d=i.attributes.length,b=u[h],y=new Array(d),m=new Array(d),E=0;E<d;E++){m[E]=0;for(var S=0;S<v.length;S++)a=v[S],m[E]+=i.attributes[E](a);y[E]=m[E]/v.length,ux(y[E],b[E],i.sensitivityThreshold)||(l=!0)}u[h]=y,s[h]=r.collection(v)}}c++}return s},dx=function(e){var r=this.cy(),n=this.nodes(),a=null,i=mc(e),s=new Array(i.k),o,u={},l,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(wt(i.testCentroids)==="object"?o=i.testCentroids:o=Kf(n,i.k)):o=Kf(n,i.k);for(var f=!0,h=0;f&&h<i.maxIterations;){for(var v=0;v<n.length;v++)a=n[v],u[a.id()]=T0(a,o,i.distance,i.attributes,"kMedoids");f=!1;for(var d=0;d<o.length;d++){var b=_0(d,n,u);if(b.length!==0){c[d]=Yf(o[d],b,i.attributes);for(var y=0;y<b.length;y++)l=Yf(b[y],b,i.attributes),l<c[d]&&(c[d]=l,o[d]=b[y],f=!0);s[d]=r.collection(b)}}h++}return s},hx=function(e,r,n,a,i){for(var s,o,u=0;u<r.length;u++)for(var l=0;l<e.length;l++)a[u][l]=Math.pow(n[u][l],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){s=0,o=0;for(var h=0;h<r.length;h++)s+=a[h][c]*i.attributes[f](r[h]),o+=a[h][c];e[c][f]=s/o}},vx=function(e,r,n,a,i){for(var s=0;s<e.length;s++)r[s]=e[s].slice();for(var o,u,l,c=2/(i.m-1),f=0;f<n.length;f++)for(var h=0;h<a.length;h++){o=0;for(var v=0;v<n.length;v++)u=Po(i.distance,a[h],n[f],i.attributes,"cmeans"),l=Po(i.distance,a[h],n[v],i.attributes,"cmeans"),o+=Math.pow(u/l,c);e[h][f]=1/o}},px=function(e,r,n,a){for(var i=new Array(n.k),s=0;s<i.length;s++)i[s]=[];for(var o,u,l=0;l<r.length;l++){o=-1/0,u=-1;for(var c=0;c<r[0].length;c++)r[l][c]>o&&(o=r[l][c],u=c);i[u].push(e[l])}for(var f=0;f<i.length;f++)i[f]=a.collection(i[f]);return i},Zf=function(e){var r=this.cy(),n=this.nodes(),a=mc(e),i,s,o,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(a.k);o=new Array(n.length);for(var f=0;f<n.length;f++)o[f]=new Array(a.k);for(var h=0;h<n.length;h++){for(var v=0,d=0;d<a.k;d++)o[h][d]=Math.random(),v+=o[h][d];for(var b=0;b<a.k;b++)o[h][b]=o[h][b]/v}s=new Array(a.k);for(var y=0;y<a.k;y++)s[y]=new Array(a.attributes.length);l=new Array(n.length);for(var m=0;m<n.length;m++)l[m]=new Array(a.k);for(var E=!0,S=0;E&&S<a.maxIterations;)E=!1,hx(s,n,o,l,a),vx(o,u,s,n,a),lx(o,u,a.sensitivityThreshold)||(E=!0),S++;return i=px(n,o,a,r),{clusters:i,degreeOfMembership:o}},gx={kMeans:fx,kMedoids:dx,fuzzyCMeans:Zf,fcm:Zf},yx=Pt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),mx={single:"min",complete:"max"},bx=function(e){var r=yx(e),n=mx[r.linkage];return n!=null&&(r.linkage=n),r},Xf=function(e,r,n,a,i){for(var s=0,o=1/0,u,l=i.attributes,c=function(F,U){return nu(i.distance,l.length,function(W){return l[W](F)},function(W){return l[W](U)},F,U)},f=0;f<e.length;f++){var h=e[f].key,v=n[h][a[h]];v<o&&(s=h,o=v)}if(i.mode==="threshold"&&o>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var d=r[s],b=r[a[s]],y;i.mode==="dendrogram"?y={left:d,right:b,key:d.key}:y={value:d.value.concat(b.value),key:d.key},e[d.index]=y,e.splice(b.index,1),r[d.key]=y;for(var m=0;m<e.length;m++){var E=e[m];d.key===E.key?u=1/0:i.linkage==="min"?(u=n[d.key][E.key],n[d.key][E.key]>n[b.key][E.key]&&(u=n[b.key][E.key])):i.linkage==="max"?(u=n[d.key][E.key],n[d.key][E.key]<n[b.key][E.key]&&(u=n[b.key][E.key])):i.linkage==="mean"?u=(n[d.key][E.key]*d.size+n[b.key][E.key]*b.size)/(d.size+b.size):i.mode==="dendrogram"?u=c(E.value,d.value):u=c(E.value[0],d.value[0]),n[d.key][E.key]=n[E.key][d.key]=u}for(var S=0;S<e.length;S++){var B=e[S].key;if(a[B]===d.key||a[B]===b.key){for(var C=B,O=0;O<e.length;O++){var A=e[O].key;n[B][A]<n[B][C]&&(C=A)}a[B]=C}e[S].index=S}return d.key=b.key=d.index=b.index=null,!0},Ns=function t(e,r,n){e&&(e.value?r.push(e.value):(e.left&&t(e.left,r),e.right&&t(e.right,r)))},wx=function t(e,r){if(!e)return"";if(e.left&&e.right){var n=t(e.left,r),a=t(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},xx=function t(e,r,n){if(!e)return[];var a=[],i=[],s=[];return r===0?(e.left&&Ns(e.left,a),e.right&&Ns(e.right,i),s=a.concat(i),[n.collection(s)]):r===1?e.value?[n.collection(e.value)]:(e.left&&Ns(e.left,a),e.right&&Ns(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=t(e.left,r-1,n)),e.right&&(i=t(e.right,r-1,n)),a.concat(i))},Qf=function(e){for(var r=this.cy(),n=this.nodes(),a=bx(e),i=a.attributes,s=function(S,B){return nu(a.distance,i.length,function(C){return i[C](S)},function(C){return i[C](B)},S,B)},o=[],u=[],l=[],c=[],f=0;f<n.length;f++){var h={value:a.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};o[f]=h,c[f]=h,u[f]=[],l[f]=0}for(var v=0;v<o.length;v++)for(var d=0;d<=v;d++){var b=void 0;a.mode==="dendrogram"?b=v===d?1/0:s(o[v].value,o[d].value):b=v===d?1/0:s(o[v].value[0],o[d].value[0]),u[v][d]=b,u[d][v]=b,b<u[v][l[v]]&&(l[v]=d)}for(var y=Xf(o,c,u,l,a);y;)y=Xf(o,c,u,l,a);var m;return a.mode==="dendrogram"?(m=xx(o[0],a.dendrogramDepth,r),a.addDendrogram&&wx(o[0],r)):(m=new Array(o.length),o.forEach(function(E,S){E.key=E.index=null,m[S]=r.collection(E.value)})),m},Ex={hierarchicalClustering:Qf,hca:Qf},Sx=Pt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Tx=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||st("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||Ee(n)||st("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Sx(e)},_x=function(e,r,n,a){var i=function(o,u){return a[u](o)};return-nu(e,a.length,function(s){return i(r,s)},function(s){return i(n,s)},r,n)},Bx=function(e,r){var n=null;return r==="median"?n=Tw(e):r==="mean"?n=Sw(e):r==="min"?n=xw(e):r==="max"?n=Ew(e):n=r,n},Ax=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},jf=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var s=-1,o=-1/0,u=0;u<n.length;u++){var l=n[u];r[i*e+l]>o&&(s=l,o=r[i*e+l])}s>0&&a.push(s)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},Cx=function(e,r,n){for(var a=jf(e,r,n),i=0;i<n.length;i++){for(var s=[],o=0;o<a.length;o++)a[o]===n[i]&&s.push(o);for(var u=-1,l=-1/0,c=0;c<s.length;c++){for(var f=0,h=0;h<s.length;h++)f+=r[s[h]*e+s[c]];f>l&&(u=c,l=f)}n[i]=s[u]}return a=jf(e,r,n),a},Jf=function(e){for(var r=this.cy(),n=this.nodes(),a=Tx(e),i={},s=0;s<n.length;s++)i[n[s].id()]=s;var o,u,l,c,f,h;o=n.length,u=o*o,l=new Array(u);for(var v=0;v<u;v++)l[v]=-1/0;for(var d=0;d<o;d++)for(var b=0;b<o;b++)d!==b&&(l[d*o+b]=_x(a.distance,n[d],n[b],a.attributes));c=Bx(l,a.preference);for(var y=0;y<o;y++)l[y*o+y]=c;f=new Array(u);for(var m=0;m<u;m++)f[m]=0;h=new Array(u);for(var E=0;E<u;E++)h[E]=0;for(var S=new Array(o),B=new Array(o),C=new Array(o),O=0;O<o;O++)S[O]=0,B[O]=0,C[O]=0;for(var A=new Array(o*a.minIterations),D=0;D<A.length;D++)A[D]=0;var F;for(F=0;F<a.maxIterations;F++){for(var U=0;U<o;U++){for(var W=-1/0,H=-1/0,R=-1,I=0,G=0;G<o;G++)S[G]=f[U*o+G],I=h[U*o+G]+l[U*o+G],I>=W?(H=W,W=I,R=G):I>H&&(H=I);for(var V=0;V<o;V++)f[U*o+V]=(1-a.damping)*(l[U*o+V]-W)+a.damping*S[V];f[U*o+R]=(1-a.damping)*(l[U*o+R]-H)+a.damping*S[R]}for(var $=0;$<o;$++){for(var X=0,ae=0;ae<o;ae++)S[ae]=h[ae*o+$],B[ae]=Math.max(0,f[ae*o+$]),X+=B[ae];X-=B[$],B[$]=f[$*o+$],X+=B[$];for(var ce=0;ce<o;ce++)h[ce*o+$]=(1-a.damping)*Math.min(0,X-B[ce])+a.damping*S[ce];h[$*o+$]=(1-a.damping)*(X-B[$])+a.damping*S[$]}for(var re=0,Z=0;Z<o;Z++){var le=h[Z*o+Z]+f[Z*o+Z]>0?1:0;A[F%a.minIterations*o+Z]=le,re+=le}if(re>0&&(F>=a.minIterations-1||F==a.maxIterations-1)){for(var N=0,fe=0;fe<o;fe++){C[fe]=0;for(var he=0;he<a.minIterations;he++)C[fe]+=A[he*o+fe];(C[fe]===0||C[fe]===a.minIterations)&&N++}if(N===o)break}}for(var pe=Ax(o,f,h),ie=Cx(o,l,pe),J={},k=0;k<pe.length;k++)J[pe[k]]=[];for(var M=0;M<n.length;M++){var K=i[n[M].id()],te=ie[K];te!=null&&J[te].push(n[M])}for(var Q=new Array(pe.length),ee=0;ee<pe.length;ee++)Q[ee]=r.collection(J[pe[ee]]);return Q},Ix={affinityPropagation:Jf,ap:Jf},Nx=Pt({root:void 0,directed:!1}),Rx={hierholzer:function(e){if(!De(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=Nx(e),a=n.root,i=n.directed,s=this,o=!1,u,l,c;a&&(c=Be(a)?this.filter(a)[0].id():a[0].id());var f={},h={};i?s.forEach(function(E){var S=E.id();if(E.isNode()){var B=E.indegree(!0),C=E.outdegree(!0),O=B-C,A=C-B;O==1?u?o=!0:u=S:A==1?l?o=!0:l=S:(A>1||O>1)&&(o=!0),f[S]=[],E.outgoers().forEach(function(D){D.isEdge()&&f[S].push(D.id())})}else h[S]=[void 0,E.target().id()]}):s.forEach(function(E){var S=E.id();if(E.isNode()){var B=E.degree(!0);B%2&&(u?l?o=!0:l=S:u=S),f[S]=[],E.connectedEdges().forEach(function(C){return f[S].push(C.id())})}else h[S]=[E.source().id(),E.target().id()]});var v={found:!1,trail:void 0};if(o)return v;if(l&&u)if(i){if(c&&l!=c)return v;c=l}else{if(c&&l!=c&&u!=c)return v;c||(c=l)}else c||(c=s[0].id());var d=function(S){for(var B=S,C=[S],O,A,D;f[B].length;)O=f[B].shift(),A=h[O][0],D=h[O][1],B!=D?(f[D]=f[D].filter(function(F){return F!=O}),B=D):!i&&B!=A&&(f[A]=f[A].filter(function(F){return F!=O}),B=A),C.unshift(O),C.unshift(B);return C},b=[],y=[];for(y=d(c);y.length!=1;)f[y[0]].length==0?(b.unshift(s.getElementById(y.shift())),b.unshift(s.getElementById(y.shift()))):y=d(y.shift()).concat(y);b.unshift(s.getElementById(y.shift()));for(var m in f)if(f[m].length)return v;return v.found=!0,v.trail=this.spawn(b,!0),v}},Rs=function(){var e=this,r={},n=0,a=0,i=[],s=[],o={},u=function(h,v){for(var d=s.length-1,b=[],y=e.spawn();s[d].x!=h||s[d].y!=v;)b.push(s.pop().edge),d--;b.push(s.pop().edge),b.forEach(function(m){var E=m.connectedNodes().intersection(e);y.merge(m),E.forEach(function(S){var B=S.id(),C=S.connectedEdges().intersection(e);y.merge(S),r[B].cutVertex?y.merge(C.filter(function(O){return O.isLoop()})):y.merge(C)})}),i.push(y)},l=function f(h,v,d){h===d&&(a+=1),r[v]={id:n,low:n++,cutVertex:!1};var b=e.getElementById(v).connectedEdges().intersection(e);if(b.size()===0)i.push(e.spawn(e.getElementById(v)));else{var y,m,E,S;b.forEach(function(B){y=B.source().id(),m=B.target().id(),E=y===v?m:y,E!==d&&(S=B.id(),o[S]||(o[S]=!0,s.push({x:v,y:E,edge:B})),E in r?r[v].low=Math.min(r[v].low,r[E].id):(f(h,E,v),r[v].low=Math.min(r[v].low,r[E].low),r[v].id<=r[E].low&&(r[v].cutVertex=!0,u(v,E))))})}};e.forEach(function(f){if(f.isNode()){var h=f.id();h in r||(a=0,l(h,h),r[h].cutVertex=a>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},kx={hopcroftTarjanBiconnected:Rs,htbc:Rs,htb:Rs,hopcroftTarjanBiconnectedComponents:Rs},ks=function(){var e=this,r={},n=0,a=[],i=[],s=e.spawn(e),o=function u(l){i.push(l),r[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(b){var y=b.target().id();y!==l&&(y in r||u(y),r[y].explored||(r[l].low=Math.min(r[l].low,r[y].low)))}),r[l].index===r[l].low){for(var f=e.spawn();;){var h=i.pop();if(f.merge(e.getElementById(h)),r[h].low=r[l].index,r[h].explored=!0,h===l)break}var v=f.edgesWith(f),d=f.merge(v);a.push(d),s=s.difference(d)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in r||o(l)}}),{cut:s,components:a}},Px={tarjanStronglyConnected:ks,tsc:ks,tscc:ks,tarjanStronglyConnectedComponents:ks},B0={};[Li,lw,cw,dw,vw,gw,bw,Gw,Fa,Da,Rl,nx,gx,Ex,Ix,Rx,kx,Px].forEach(function(t){Ae(B0,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var A0=0,C0=1,I0=2,sn=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=A0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};sn.prototype={fulfill:function(e){return ed(this,C0,"fulfillValue",e)},reject:function(e){return ed(this,I0,"rejectReason",e)},then:function(e,r){var n=this,a=new sn;return n.onFulfilled.push(rd(e,a,"fulfill")),n.onRejected.push(rd(r,a,"reject")),N0(n),a.proxy}};var ed=function(e,r,n,a){return e.state===A0&&(e.state=r,e[n]=a,N0(e)),e},N0=function(e){e.state===C0?td(e,"onFulfilled",e.fulfillValue):e.state===I0&&td(e,"onRejected",e.rejectReason)},td=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var o=0;o<a.length;o++)a[o](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},rd=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(s){r.reject(s);return}Ox(r,i)}}},Ox=function t(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(wt(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):t(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};sn.all=function(t){return new sn(function(e,r){for(var n=new Array(t.length),a=0,i=function(u,l){n[u]=l,a++,a===t.length&&e(n)},s=0;s<t.length;s++)(function(o){var u=t[o],l=u!=null&&u.then!=null;if(l)u.then(function(f){i(o,f)},function(f){r(f)});else{var c=u;i(o,c)}})(s)})};sn.resolve=function(t){return new sn(function(e,r){e(t)})};sn.reject=function(t){return new sn(function(e,r){r(t)})};var ja=typeof Promise<"u"?Promise:sn,kl=function(e,r,n){var a=cc(e),i=!a,s=this._private=Ae({duration:1e3},r,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&nt(s.complete)&&s.completes.push(s.complete),i){var o=e.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(a){var u=e.pan();s.startPan={x:u.x,y:u.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},la=kl.prototype;Ae(la,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),nr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],s=i.name,o=e.startStyle[s];e.startStyle[s]=i,e.style[a]=o}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new ja(function(a,i){n.push(function(){a()})})}});la.complete=la.completed;la.run=la.play;la.running=la.playing;var Mx={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var s=a[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var s=0;s<a.length;s++){var o=a[s];o._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this,u=!i,l=!u;if(!o.styleEnabled())return this;var c=o.style();r=Ae({},r,n);var f=Object.keys(r).length===0;if(f)return new kl(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(l&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),l&&r.renderedPosition!=null){var h=r.renderedPosition,v=o.pan(),d=o.zoom();r.position=p0(h,d,v)}if(u&&r.panBy!=null){var b=r.panBy,y=o.pan();r.pan={x:y.x+b.x,y:y.y+b.y}}var m=r.center||r.centre;if(u&&m!=null){var E=o.getCenterPan(m.eles,r.zoom);E!=null&&(r.pan=E)}if(u&&r.fit!=null){var S=r.fit,B=o.getFitViewport(S.eles||S.boundingBox,S.padding);B!=null&&(r.pan=B.pan,r.zoom=B.zoom)}if(u&&De(r.zoom)){var C=o.getZoomedViewport(r.zoom);C!=null?(C.zoomed&&(r.zoom=C.zoom),C.panned&&(r.pan=C.pan)):r.zoom=null}return new kl(s[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(r=Ae({},r,n));for(var u=0;u<s.length;u++){var l=s[u],c=l.animated()&&(r.queue===void 0||r.queue),f=l.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var l=s[u],c=l._private,f=c.animation.current,h=0;h<f.length;h++){var v=f[h],d=v._private;n&&(d.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return o.notify("draw"),this}}},Fx=Array.isArray,au=Fx,Dx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ux=/^\w*$/;function Lx(t,e){if(au(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||is(t)?!0:Ux.test(t)||!Dx.test(t)||e!=null&&t in Object(e)}var $x=Lx,zx="[object AsyncFunction]",Vx="[object Function]",qx="[object GeneratorFunction]",Gx="[object Proxy]";function Hx(t){if(!ia(t))return!1;var e=s0(t);return e==Vx||e==qx||e==zx||e==Gx}var Wx=Hx,Kx=Jo["__core-js_shared__"],Wu=Kx,nd=function(){var t=/[^.]+$/.exec(Wu&&Wu.keys&&Wu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Yx(t){return!!nd&&nd in t}var Zx=Yx,Xx=Function.prototype,Qx=Xx.toString;function jx(t){if(t!=null){try{return Qx.call(t)}catch{}try{return t+""}catch{}}return""}var Jx=jx,e2=/[\\^$.*+?()[\]{}|]/g,t2=/^\[object .+?Constructor\]$/,r2=Function.prototype,n2=Object.prototype,a2=r2.toString,i2=n2.hasOwnProperty,s2=RegExp("^"+a2.call(i2).replace(e2,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function o2(t){if(!ia(t)||Zx(t))return!1;var e=Wx(t)?s2:t2;return e.test(Jx(t))}var u2=o2;function l2(t,e){return t==null?void 0:t[e]}var c2=l2;function f2(t,e){var r=c2(t,e);return u2(r)?r:void 0}var bc=f2,d2=bc(Object,"create"),Vi=d2;function h2(){this.__data__=Vi?Vi(null):{},this.size=0}var v2=h2;function p2(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var g2=p2,y2="__lodash_hash_undefined__",m2=Object.prototype,b2=m2.hasOwnProperty;function w2(t){var e=this.__data__;if(Vi){var r=e[t];return r===y2?void 0:r}return b2.call(e,t)?e[t]:void 0}var x2=w2,E2=Object.prototype,S2=E2.hasOwnProperty;function T2(t){var e=this.__data__;return Vi?e[t]!==void 0:S2.call(e,t)}var _2=T2,B2="__lodash_hash_undefined__";function A2(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Vi&&e===void 0?B2:e,this}var C2=A2;function Ja(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ja.prototype.clear=v2;Ja.prototype.delete=g2;Ja.prototype.get=x2;Ja.prototype.has=_2;Ja.prototype.set=C2;var ad=Ja;function I2(){this.__data__=[],this.size=0}var N2=I2;function R2(t,e){return t===e||t!==t&&e!==e}var R0=R2;function k2(t,e){for(var r=t.length;r--;)if(R0(t[r][0],e))return r;return-1}var iu=k2,P2=Array.prototype,O2=P2.splice;function M2(t){var e=this.__data__,r=iu(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():O2.call(e,r,1),--this.size,!0}var F2=M2;function D2(t){var e=this.__data__,r=iu(e,t);return r<0?void 0:e[r][1]}var U2=D2;function L2(t){return iu(this.__data__,t)>-1}var $2=L2;function z2(t,e){var r=this.__data__,n=iu(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var V2=z2;function ei(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ei.prototype.clear=N2;ei.prototype.delete=F2;ei.prototype.get=U2;ei.prototype.has=$2;ei.prototype.set=V2;var q2=ei,G2=bc(Jo,"Map"),H2=G2;function W2(){this.size=0,this.__data__={hash:new ad,map:new(H2||q2),string:new ad}}var K2=W2;function Y2(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Z2=Y2;function X2(t,e){var r=t.__data__;return Z2(e)?r[typeof e=="string"?"string":"hash"]:r.map}var su=X2;function Q2(t){var e=su(this,t).delete(t);return this.size-=e?1:0,e}var j2=Q2;function J2(t){return su(this,t).get(t)}var eE=J2;function tE(t){return su(this,t).has(t)}var rE=tE;function nE(t,e){var r=su(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var aE=nE;function ti(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ti.prototype.clear=K2;ti.prototype.delete=j2;ti.prototype.get=eE;ti.prototype.has=rE;ti.prototype.set=aE;var k0=ti,iE="Expected a function";function wc(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(iE);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=t.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(wc.Cache||k0),r}wc.Cache=k0;var sE=wc,oE=500;function uE(t){var e=sE(t,function(n){return r.size===oE&&r.clear(),n}),r=e.cache;return e}var lE=uE,cE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fE=/\\(\\)?/g,dE=lE(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(cE,function(r,n,a,i){e.push(a?i.replace(fE,"$1"):n||r)}),e}),P0=dE;function hE(t,e){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}var O0=hE,vE=1/0,id=Ha?Ha.prototype:void 0,sd=id?id.toString:void 0;function M0(t){if(typeof t=="string")return t;if(au(t))return O0(t,M0)+"";if(is(t))return sd?sd.call(t):"";var e=t+"";return e=="0"&&1/t==-vE?"-0":e}var pE=M0;function gE(t){return t==null?"":pE(t)}var F0=gE;function yE(t,e){return au(t)?t:$x(t,e)?[t]:P0(F0(t))}var D0=yE,mE=1/0;function bE(t){if(typeof t=="string"||is(t))return t;var e=t+"";return e=="0"&&1/t==-mE?"-0":e}var xc=bE;function wE(t,e){e=D0(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[xc(e[r++])];return r&&r==n?t:void 0}var xE=wE;function EE(t,e,r){var n=t==null?void 0:xE(t,e);return n===void 0?r:n}var SE=EE,TE=function(){try{var t=bc(Object,"defineProperty");return t({},"",{}),t}catch{}}(),od=TE;function _E(t,e,r){e=="__proto__"&&od?od(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var BE=_E,AE=Object.prototype,CE=AE.hasOwnProperty;function IE(t,e,r){var n=t[e];(!(CE.call(t,e)&&R0(n,r))||r===void 0&&!(e in t))&&BE(t,e,r)}var NE=IE,RE=9007199254740991,kE=/^(?:0|[1-9]\d*)$/;function PE(t,e){var r=typeof t;return e=e??RE,!!e&&(r=="number"||r!="symbol"&&kE.test(t))&&t>-1&&t%1==0&&t<e}var OE=PE;function ME(t,e,r,n){if(!ia(t))return t;e=D0(e,t);for(var a=-1,i=e.length,s=i-1,o=t;o!=null&&++a<i;){var u=xc(e[a]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(a!=s){var c=o[u];l=n?n(c,u,o):void 0,l===void 0&&(l=ia(c)?c:OE(e[a+1])?[]:{})}NE(o,u,l),o=o[u]}return t}var FE=ME;function DE(t,e,r){return t==null?t:FE(t,e,r)}var UE=DE;function LE(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var $E=LE;function zE(t){return au(t)?O0(t,xc):is(t)?[t]:$E(P0(F0(t)))}var VE=zE,qE={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=Ae({},r,e),function(a,i){var s=e,o=this,u=o.length!==void 0,l=u?o:[o],c=u?o[0]:o;if(Be(a)){var f=a.indexOf(".")!==-1,h=f&&VE(a);if(s.allowGetting&&i===void 0){var v;return c&&(s.beforeGet(c),h&&c._private[s.field][a]===void 0?v=SE(c._private[s.field],h):v=c._private[s.field][a]),v}else if(s.allowSetting&&i!==void 0){var d=!s.immutableKeys[a];if(d){var b=Zv({},a,i);s.beforeSet(o,b);for(var y=0,m=l.length;y<m;y++){var E=l[y];s.canSet(E)&&(h&&c._private[s.field][a]===void 0?UE(E._private[s.field],h,i):E._private[s.field][a]=i)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&De(a)){var S=a,B,C,O=Object.keys(S);s.beforeSet(o,S);for(var A=0;A<O.length;A++){B=O[A],C=S[B];var D=!s.immutableKeys[B];if(D)for(var F=0;F<l.length;F++){var U=l[F];s.canSet(U)&&(U._private[s.field][B]=C)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&nt(a)){var W=a;o.on(s.bindingEvent,W)}else if(s.allowGetting&&a===void 0){var H;return c&&(s.beforeGet(c),H=c._private[s.field]),H}return o}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Ae({},r,e),function(a){var i=e,s=this,o=s.length!==void 0,u=o?s:[s];if(Be(a)){for(var l=a.split(/\s+/),c=l.length,f=0;f<c;f++){var h=l[f];if(!In(h)){var v=!i.immutableKeys[h];if(v)for(var d=0,b=u.length;d<b;d++)u[d]._private[i.field][h]=void 0}}i.triggerEvent&&s[i.triggerFnName](i.event)}else if(a===void 0){for(var y=0,m=u.length;y<m;y++)for(var E=u[y]._private[i.field],S=Object.keys(E),B=0;B<S.length;B++){var C=S[B],O=!i.immutableKeys[C];O&&(E[C]=void 0)}i.triggerEvent&&s[i.triggerFnName](i.event)}return s}}},GE={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,s=Array.prototype.slice.call(arguments,0);return new ja(function(o,u){var l=function(v){i.off.apply(i,f),o(v)},c=s.concat([l]),f=c.concat([]);i.on.apply(i,c)})}}},ze={};[Mx,qE,GE].forEach(function(t){Ae(ze,t)});var HE={animate:ze.animate(),animation:ze.animation(),animated:ze.animated(),clearQueue:ze.clearQueue(),delay:ze.delay(),delayAnimation:ze.delayAnimation(),stop:ze.stop()},lo={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(d){return n.push(d)}),n}else Ye(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Qa(e),s=0;s<r.length;s++){for(var o=r[s],u=o._private,l=u.classes,c=!1,f=0;f<e.length;f++){var h=e[f],v=l.has(h);if(!v){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=i,a.push(o))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Ye(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],s=0,o=n.length;s<o;s++)for(var u=n[s],l=u._private.classes,c=!1,f=0;f<e.length;f++){var h=e[f],v=l.has(h),d=!1;r||a&&!v?(l.add(h),d=!0):(!r||a&&v)&&(l.delete(h),d=!0),!c&&d&&(i.push(u),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};lo.className=lo.classNames=lo.classes;var Fe={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:yt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Fe.variable="(?:[\\w-.]|(?:\\\\"+Fe.metaChar+"))+";Fe.className="(?:[\\w-]|(?:\\\\"+Fe.metaChar+"))+";Fe.value=Fe.string+"|"+Fe.number;Fe.id=Fe.variable;(function(){var t,e,r;for(t=Fe.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],Fe.comparatorOp+="|@"+e;for(t=Fe.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(Fe.comparatorOp+="|\\!"+e)})();var Ke=function(){return{checks:[]}},Se={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Pl=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return nb(t.selector,e.selector)}),WE=function(){for(var t={},e,r=0;r<Pl.length;r++)e=Pl[r],t[e.selector]=e.matches;return t}(),KE=function(e,r){return WE[e](r)},YE="("+Pl.map(function(t){return t.selector}).join("|")+")",wa=function(e){return e.replace(new RegExp("\\\\("+Fe.metaChar+")","g"),function(r,n){return n})},gn=function(e,r,n){e[e.length-1]=n},Ol=[{name:"group",query:!0,regex:"("+Fe.group+")",populate:function(e,r,n){var a=xr(n,1),i=a[0];r.checks.push({type:Se.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:YE,populate:function(e,r,n){var a=xr(n,1),i=a[0];r.checks.push({type:Se.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Fe.id+")",populate:function(e,r,n){var a=xr(n,1),i=a[0];r.checks.push({type:Se.ID,value:wa(i)})}},{name:"className",query:!0,regex:"\\.("+Fe.className+")",populate:function(e,r,n){var a=xr(n,1),i=a[0];r.checks.push({type:Se.CLASS,value:wa(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Fe.variable+")\\s*\\]",populate:function(e,r,n){var a=xr(n,1),i=a[0];r.checks.push({type:Se.DATA_EXIST,field:wa(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Fe.variable+")\\s*("+Fe.comparatorOp+")\\s*("+Fe.value+")\\s*\\]",populate:function(e,r,n){var a=xr(n,3),i=a[0],s=a[1],o=a[2],u=new RegExp("^"+Fe.string+"$").exec(o)!=null;u?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:Se.DATA_COMPARE,field:wa(i),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Fe.boolOp+")\\s*("+Fe.variable+")\\s*\\]",populate:function(e,r,n){var a=xr(n,2),i=a[0],s=a[1];r.checks.push({type:Se.DATA_BOOL,field:wa(s),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Fe.meta+")\\s*("+Fe.comparatorOp+")\\s*("+Fe.number+")\\s*\\]\\]",populate:function(e,r,n){var a=xr(n,3),i=a[0],s=a[1],o=a[2];r.checks.push({type:Se.META_COMPARE,field:wa(i),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Fe.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=a,s.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=Ke();return o}},{name:"directedEdge",separator:!0,regex:Fe.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ke(),a=r,i=Ke();return n.checks.push({type:Se.DIRECTED_EDGE,source:a,target:i}),gn(e,r,n),e.edgeCount++,i}else{var s=Ke(),o=r,u=Ke();return s.checks.push({type:Se.NODE_SOURCE,source:o,target:u}),gn(e,r,s),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Fe.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ke(),a=r,i=Ke();return n.checks.push({type:Se.UNDIRECTED_EDGE,nodes:[a,i]}),gn(e,r,n),e.edgeCount++,i}else{var s=Ke(),o=r,u=Ke();return s.checks.push({type:Se.NODE_NEIGHBOR,node:o,neighbor:u}),gn(e,r,s),u}}},{name:"child",separator:!0,regex:Fe.child,populate:function(e,r){if(e.currentSubject==null){var n=Ke(),a=Ke(),i=e[e.length-1];return n.checks.push({type:Se.CHILD,parent:i,child:a}),gn(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=Ke(),o=e[e.length-1],u=Ke(),l=Ke(),c=Ke(),f=Ke();return s.checks.push({type:Se.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:Se.TRUE}],f.checks.push({type:Se.TRUE}),u.checks.push({type:Se.PARENT,parent:f,child:c}),gn(e,o,s),e.currentSubject=l,e.compoundCount++,c}else{var h=Ke(),v=Ke(),d=[{type:Se.PARENT,parent:h,child:v}];return h.checks=r.checks,r.checks=d,e.compoundCount++,v}}},{name:"descendant",separator:!0,regex:Fe.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Ke(),a=Ke(),i=e[e.length-1];return n.checks.push({type:Se.DESCENDANT,ancestor:i,descendant:a}),gn(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=Ke(),o=e[e.length-1],u=Ke(),l=Ke(),c=Ke(),f=Ke();return s.checks.push({type:Se.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:Se.TRUE}],f.checks.push({type:Se.TRUE}),u.checks.push({type:Se.ANCESTOR,ancestor:f,descendant:c}),gn(e,o,s),e.currentSubject=l,e.compoundCount++,c}else{var h=Ke(),v=Ke(),d=[{type:Se.ANCESTOR,ancestor:h,descendant:v}];return h.checks=r.checks,r.checks=d,e.compoundCount++,v}}},{name:"subject",modifier:!0,regex:Fe.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Ve("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===Se.DIRECTED_EDGE?a.type=Se.NODE_TARGET:i===Se.UNDIRECTED_EDGE&&(a.type=Se.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Ol.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var ZE=function(e){for(var r,n,a,i=0;i<Ol.length;i++){var s=Ol[i],o=s.name,u=e.match(s.regexObj);if(u!=null){n=u,r=s,a=o;var l=u[0];e=e.substring(l.length);break}}return{expr:r,match:n,name:a,remaining:e}},XE=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},QE=function(e){var r=this,n=r.inputText=e,a=r[0]=Ke();for(r.length=1,n=XE(n);;){var i=ZE(n);if(i.expr==null)return Ve("The selector `"+e+"`is invalid"),!1;var s=i.match.slice(1),o=i.expr.populate(r,a,s);if(o===!1)return!1;if(o!=null&&(a=o),n=i.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var l=0;l<r.length;l++){var c=r[l];if(c.compoundCount>0&&c.edgeCount>0)return Ve("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Ve("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Ve("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},jE=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return Be(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,f){var h=c.type,v=c.value;switch(h){case Se.GROUP:{var d=e(v);return d.substring(0,d.length-1)}case Se.DATA_COMPARE:{var b=c.field,y=c.operator;return"["+b+n(e(y))+r(v)+"]"}case Se.DATA_BOOL:{var m=c.operator,E=c.field;return"["+e(m)+E+"]"}case Se.DATA_EXIST:{var S=c.field;return"["+S+"]"}case Se.META_COMPARE:{var B=c.operator,C=c.field;return"[["+C+n(e(B))+r(v)+"]]"}case Se.STATE:return v;case Se.ID:return"#"+v;case Se.CLASS:return"."+v;case Se.PARENT:case Se.CHILD:return i(c.parent,f)+n(">")+i(c.child,f);case Se.ANCESTOR:case Se.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case Se.COMPOUND_SPLIT:{var O=i(c.left,f),A=i(c.subject,f),D=i(c.right,f);return O+(O.length>0?" ":"")+A+D}case Se.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(h,v,d){return h+(f===c&&d===0?"$":"")+a(v,f)},"")},s="",o=0;o<this.length;o++){var u=this[o];s+=i(u,u.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},JE={parse:QE,toString:jE},U0=function(e,r,n){var a,i=Be(e),s=Ee(e),o=Be(n),u,l,c=!1,f=!1,h=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||o||c)&&(u=!i&&!s?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),r){case"*=":a=u.indexOf(l)>=0;break;case"$=":a=u.indexOf(l,u.length-l.length)>=0;break;case"^=":a=u.indexOf(l)===0;break;case"=":a=e===n;break;case">":h=!0,a=e>n;break;case">=":h=!0,a=e>=n;break;case"<":h=!0,a=e<n;break;case"<=":h=!0,a=e<=n;break;default:a=!1;break}return f&&(e!=null||!h)&&(a=!a),a},eS=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},tS=function(e){return e!==void 0},Ec=function(e,r){return e.data(r)},rS=function(e,r){return e[r]()},ot=[],Je=function(e,r){return e.checks.every(function(n){return ot[n.type](n,r)})};ot[Se.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};ot[Se.STATE]=function(t,e){var r=t.value;return KE(r,e)};ot[Se.ID]=function(t,e){var r=t.value;return e.id()===r};ot[Se.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};ot[Se.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return U0(rS(e,r),n,a)};ot[Se.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return U0(Ec(e,r),n,a)};ot[Se.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return eS(Ec(e,r),n)};ot[Se.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,tS(Ec(e,r))};ot[Se.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return Je(r,a)&&Je(n,i)||Je(n,a)&&Je(r,i)};ot[Se.NODE_NEIGHBOR]=function(t,e){return Je(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&Je(t.neighbor,r)})};ot[Se.DIRECTED_EDGE]=function(t,e){return Je(t.source,e.source())&&Je(t.target,e.target())};ot[Se.NODE_SOURCE]=function(t,e){return Je(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&Je(t.target,r)})};ot[Se.NODE_TARGET]=function(t,e){return Je(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&Je(t.source,r)})};ot[Se.CHILD]=function(t,e){return Je(t.child,e)&&Je(t.parent,e.parent())};ot[Se.PARENT]=function(t,e){return Je(t.parent,e)&&e.children().some(function(r){return Je(t.child,r)})};ot[Se.DESCENDANT]=function(t,e){return Je(t.descendant,e)&&e.ancestors().some(function(r){return Je(t.ancestor,r)})};ot[Se.ANCESTOR]=function(t,e){return Je(t.ancestor,e)&&e.descendants().some(function(r){return Je(t.descendant,r)})};ot[Se.COMPOUND_SPLIT]=function(t,e){return Je(t.subject,e)&&Je(t.left,e)&&Je(t.right,e)};ot[Se.TRUE]=function(){return!0};ot[Se.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};ot[Se.FILTER]=function(t,e){var r=t.value;return r(e)};var nS=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===Se.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var s=0;s<r.length;s++){var o=r[s];if(Je(o,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},aS=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(Je(a,e))return!0}return!1},iS={matches:aS,filter:nS},Rn=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Be(e)&&e.match(/^\s*$/)||(nr(e)?this.addQuery({checks:[{type:Se.COLLECTION,value:e.collection()}]}):nt(e)?this.addQuery({checks:[{type:Se.FILTER,value:e}]}):Be(e)?this.parse(e)||(this.invalid=!0):st("A selector must be created from a string; found "))},kn=Rn.prototype;[JE,iS].forEach(function(t){return Ae(kn,t)});kn.text=function(){return this.inputText};kn.size=function(){return this.length};kn.eq=function(t){return this[t]};kn.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};kn.addQuery=function(t){this[this.length++]=t};kn.selector=kn.toString;var Bn={allAre:function(e){var r=new Rn(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Rn(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Bn.allAreNeighbours=Bn.allAreNeighbors;Bn.has=Bn.contains;Bn.equal=Bn.equals=Bn.same;var vr=function(e,r){return function(a,i,s,o){var u=a,l=this,c;if(u==null?c="":nr(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,h=f.traversalCache=f.traversalCache||{},v=h[r]=h[r]||[],d=sa(c),b=v[d];return b||(v[d]=e.call(l,a,i,s,o))}else return e.call(l,a,i,s,o)}},Ya={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],s=i._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:vr(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var s=a[i];r.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function Sc(t,e,r,n){for(var a=[],i=new Qa,s=t.cy(),o=s.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];r?a.push(l):o&&n(a,i,l)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),o&&n(a,i,c)}return t}function L0(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}Ya.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Sc(this,t,e,L0)};function $0(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}Ya.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Sc(this,t,e,$0)};function sS(t,e,r){$0(t,e,r),L0(t,e,r)}Ya.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Sc(this,t,e,sS)};Ya.ancestors=Ya.parents;var qi,z0;qi=z0={data:ze.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:ze.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:ze.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ze.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:ze.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:ze.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};qi.attr=qi.data;qi.removeAttr=qi.removeData;var oS=z0,ou={};function Ku(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,s=0;s<i.length;s++){var o=i[s];!e&&o.isLoop()||(n+=t(a,o))}return n}else return}}Ae(ou,{degree:Ku(function(t,e){return e.source().same(e.target())?2:1}),indegree:Ku(function(t,e){return e.target().same(t)?1:0}),outdegree:Ku(function(t,e){return e.source().same(t)?1:0})});function xa(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var s=a[i],o=s[t](r);o!==void 0&&(n===void 0||e(o,n))&&(n=o)}return n}}Ae(ou,{minDegree:xa("degree",function(t,e){return t<e}),maxDegree:xa("degree",function(t,e){return t>e}),minIndegree:xa("indegree",function(t,e){return t<e}),maxIndegree:xa("indegree",function(t,e){return t>e}),minOutdegree:xa("outdegree",function(t,e){return t<e}),maxOutdegree:xa("outdegree",function(t,e){return t>e})});Ae(ou,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var Ar,V0,q0=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var s=i._private.position,o={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};i.isParent()&&!(o.x===0&&o.y===0)&&i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},ud={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){q0(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Ar=V0={position:ze.data(ud),silentPosition:ze.data(Ae({},ud,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){q0(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(De(e))r?this.silentPosition(e):this.position(e);else if(nt(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var s=this[i],o=void 0;(o=n(s,i))&&(r?s.silentPosition(o):s.position(o))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(De(e)?(a={x:Ee(e.x)?e.x:0,y:Ee(e.y)?e.y:0},n=r):Be(e)&&Ee(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),l={x:u.x+a.x,y:u.y+a.y};n?o.silentPosition(l):o.position(l)}}i.endBatch()}return this},silentShift:function(e,r){return De(e)?this.shift(e,!0):Be(e)&&Ee(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),s=a.pan(),o=De(e)?e:void 0,u=o!==void 0||r!==void 0&&Be(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];r!==void 0?c.position(e,(r-s[e])/i):o!==void 0&&c.position(p0(o,i,s))}else{var f=n.position();return o=ru(f,i,s),e===void 0?o:o[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=De(e)?e:void 0,s=i!==void 0||r!==void 0&&Be(e),o=a.hasCompoundNodes();if(n&&n.isNode())if(s)for(var u=0;u<this.length;u++){var l=this[u],c=o?l.parent():null,f=c&&c.length>0,h=f;f&&(c=c[0]);var v=h?c.position():{x:0,y:0};r!==void 0?l.position(e,r+v[e]):i!==void 0&&l.position({x:i.x+v.x,y:i.y+v.y})}else{var d=n.position(),b=o?n.parent():null,y=b&&b.length>0,m=y;y&&(b=b[0]);var E=m?b.position():{x:0,y:0};return i={x:d.x-E.x,y:d.y-E.y},e===void 0?i:i[e]}else if(!s)return;return this}};Ar.modelPosition=Ar.point=Ar.position;Ar.modelPositions=Ar.points=Ar.positions;Ar.renderedPoint=Ar.renderedPosition;Ar.relativePoint=Ar.relativePosition;var uS=V0,Ua,Fn;Ua=Fn={};Fn.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,s=e.x2*n+a.x,o=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:s,y1:o,y2:u,w:s-i,h:u-o}};Fn.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Fn.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(s){if(!s.isParent())return;var o=s._private,u=s.children(),l=s.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=o.position;(f.w===0||f.h===0)&&(f={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},f.x1=h.x-f.w/2,f.x2=h.x+f.w/2,f.y1=h.y-f.h/2,f.y2=h.y+f.h/2);function v(F,U,W){var H=0,R=0,I=U+W;return F>0&&I>0&&(H=U/I*F,R=W/I*F),{biasDiff:H,biasComplementDiff:R}}function d(F,U,W,H){if(W.units==="%")switch(H){case"width":return F>0?W.pfValue*F:0;case"height":return U>0?W.pfValue*U:0;case"average":return F>0&&U>0?W.pfValue*(F+U)/2:0;case"min":return F>0&&U>0?F>U?W.pfValue*U:W.pfValue*F:0;case"max":return F>0&&U>0?F>U?W.pfValue*F:W.pfValue*U:0;default:return 0}else return W.units==="px"?W.pfValue:0}var b=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(b=b*100/c.width.val);var y=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(y=y*100/c.width.val);var m=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var E=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(E=E*100/c.height.val);var S=v(c.width.val-f.w,b,y),B=S.biasDiff,C=S.biasComplementDiff,O=v(c.height.val-f.h,m,E),A=O.biasDiff,D=O.biasComplementDiff;o.autoPadding=d(f.w,f.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(f.w,c.width.val),h.x=(-B+f.x1+f.x2+C)/2,o.autoHeight=Math.max(f.h,c.height.val),h.y=(-A+f.y1+f.y2+D)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var hr=function(e){return e===1/0||e===-1/0?0:e},Sr=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Hn=function(e,r){return r==null?e:Sr(e,r.x1,r.y1,r.x2,r.y2)},fi=function(e,r,n){return Tr(e,r,n)},Ps=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,s=i.arrowWidth/2,o=r.pstyle(n+"-arrow-shape").value,u,l;if(o!=="none"){n==="source"?(u=i.srcX,l=i.srcY):n==="target"?(u=i.tgtX,l=i.tgtY):(u=i.midX,l=i.midY);var c=a.arrowBounds=a.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-s,f.y1=l-s,f.x2=u+s,f.y2=l+s,f.w=f.x2-f.x1,f.h=f.y2-f.y1,oo(f,1),Sr(e,f.x1,f.y1,f.x2,f.y2)}}},Yu=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,s=i.rstyle,o=r.pstyle(a+"label").strValue;if(o){var u=r.pstyle("text-halign"),l=r.pstyle("text-valign"),c=fi(s,"labelWidth",n),f=fi(s,"labelHeight",n),h=fi(s,"labelX",n),v=fi(s,"labelY",n),d=r.pstyle(a+"text-margin-x").pfValue,b=r.pstyle(a+"text-margin-y").pfValue,y=r.isEdge(),m=r.pstyle(a+"text-rotation"),E=r.pstyle("text-outline-width").pfValue,S=r.pstyle("text-border-width").pfValue,B=S/2,C=r.pstyle("text-background-padding").pfValue,O=2,A=f,D=c,F=D/2,U=A/2,W,H,R,I;if(y)W=h-F,H=h+F,R=v-U,I=v+U;else{switch(u.value){case"left":W=h-D,H=h;break;case"center":W=h-F,H=h+F;break;case"right":W=h,H=h+D;break}switch(l.value){case"top":R=v-A,I=v;break;case"center":R=v-U,I=v+U;break;case"bottom":R=v,I=v+A;break}}W+=d-Math.max(E,B)-C-O,H+=d+Math.max(E,B)+C+O,R+=b-Math.max(E,B)-C-O,I+=b+Math.max(E,B)+C+O;var G=n||"main",V=i.labelBounds,$=V[G]=V[G]||{};$.x1=W,$.y1=R,$.x2=H,$.y2=I,$.w=H-W,$.h=I-R;var X=y&&m.strValue==="autorotate",ae=m.pfValue!=null&&m.pfValue!==0;if(X||ae){var ce=X?fi(i.rstyle,"labelAngle",n):m.pfValue,re=Math.cos(ce),Z=Math.sin(ce),le=(W+H)/2,N=(R+I)/2;if(!y){switch(u.value){case"left":le=H;break;case"right":le=W;break}switch(l.value){case"top":N=I;break;case"bottom":N=R;break}}var fe=function(te,Q){return te=te-le,Q=Q-N,{x:te*re-Q*Z+le,y:te*Z+Q*re+N}},he=fe(W,R),pe=fe(W,I),ie=fe(H,R),J=fe(H,I);W=Math.min(he.x,pe.x,ie.x,J.x),H=Math.max(he.x,pe.x,ie.x,J.x),R=Math.min(he.y,pe.y,ie.y,J.y),I=Math.max(he.y,pe.y,ie.y,J.y)}var k=G+"Rot",M=V[k]=V[k]||{};M.x1=W,M.y1=R,M.x2=H,M.y2=I,M.w=H-W,M.h=I-R,Sr(e,W,R,H,I),Sr(i.labelBounds.all,W,R,H,I)}return e}},lS=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value;if(n>0&&a>0){var i=r.pstyle("outline-offset").value,s=r.pstyle("shape").value,o=a+i,u=(e.w+o*2)/e.w,l=(e.h+o*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(s)?(u=(e.w+o*2.4)/e.w,f=-o/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(s)?u=(e.w+o*2.4)/e.w:s==="star"?(u=(e.w+o*2.8)/e.w,l=(e.h+o*2.6)/e.h,f=-o/3.8):s==="triangle"?(u=(e.w+o*2.8)/e.w,l=(e.h+o*2.4)/e.h,f=-o/1.4):s==="vee"&&(u=(e.w+o*4.4)/e.w,l=(e.h+o*3.8)/e.h,f=-o*.5);var h=e.h*l-e.h,v=e.w*u-e.w;if(uo(e,[Math.ceil(h/2),Math.ceil(v/2)]),c!=0||f!==0){var d=Nw(e,c,f);y0(e,d)}}}},cS=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),s=er(),o=e._private,u=e.isNode(),l=e.isEdge(),c,f,h,v,d,b,y=o.rstyle,m=u&&a?e.pstyle("bounds-expansion").pfValue:[0],E=function(_){return _.pstyle("display").value!=="none"},S=!a||E(e)&&(!l||E(e.source())&&E(e.target()));if(S){var B=0,C=0;a&&r.includeOverlays&&(B=e.pstyle("overlay-opacity").value,B!==0&&(C=e.pstyle("overlay-padding").value));var O=0,A=0;a&&r.includeUnderlays&&(O=e.pstyle("underlay-opacity").value,O!==0&&(A=e.pstyle("underlay-padding").value));var D=Math.max(C,A),F=0,U=0;if(a&&(F=e.pstyle("width").pfValue,U=F/2),u&&r.includeNodes){var W=e.position();d=W.x,b=W.y;var H=e.outerWidth(),R=H/2,I=e.outerHeight(),G=I/2;c=d-R,f=d+R,h=b-G,v=b+G,Sr(s,c,h,f,v),a&&r.includeOutlines&&lS(s,e)}else if(l&&r.includeEdges)if(a&&!i){var V=e.pstyle("curve-style").strValue;if(c=Math.min(y.srcX,y.midX,y.tgtX),f=Math.max(y.srcX,y.midX,y.tgtX),h=Math.min(y.srcY,y.midY,y.tgtY),v=Math.max(y.srcY,y.midY,y.tgtY),c-=U,f+=U,h-=U,v+=U,Sr(s,c,h,f,v),V==="haystack"){var $=y.haystackPts;if($&&$.length===2){if(c=$[0].x,h=$[0].y,f=$[1].x,v=$[1].y,c>f){var X=c;c=f,f=X}if(h>v){var ae=h;h=v,v=ae}Sr(s,c-U,h-U,f+U,v+U)}}else if(V==="bezier"||V==="unbundled-bezier"||V.endsWith("segments")||V.endsWith("taxi")){var ce;switch(V){case"bezier":case"unbundled-bezier":ce=y.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":ce=y.linePts;break}if(ce!=null)for(var re=0;re<ce.length;re++){var Z=ce[re];c=Z.x-U,f=Z.x+U,h=Z.y-U,v=Z.y+U,Sr(s,c,h,f,v)}}}else{var le=e.source(),N=le.position(),fe=e.target(),he=fe.position();if(c=N.x,f=he.x,h=N.y,v=he.y,c>f){var pe=c;c=f,f=pe}if(h>v){var ie=h;h=v,v=ie}c-=U,f+=U,h-=U,v+=U,Sr(s,c,h,f,v)}if(a&&r.includeEdges&&l&&(Ps(s,e,"mid-source"),Ps(s,e,"mid-target"),Ps(s,e,"source"),Ps(s,e,"target")),a){var J=e.pstyle("ghost").value==="yes";if(J){var k=e.pstyle("ghost-offset-x").pfValue,M=e.pstyle("ghost-offset-y").pfValue;Sr(s,s.x1+k,s.y1+M,s.x2+k,s.y2+M)}}var K=o.bodyBounds=o.bodyBounds||{};zf(K,s),uo(K,m),oo(K,1),a&&(c=s.x1,f=s.x2,h=s.y1,v=s.y2,Sr(s,c-D,h-D,f+D,v+D));var te=o.overlayBounds=o.overlayBounds||{};zf(te,s),uo(te,m),oo(te,1);var Q=o.labelBounds=o.labelBounds||{};Q.all!=null?Iw(Q.all):Q.all=er(),a&&r.includeLabels&&(r.includeMainLabels&&Yu(s,e,null),l&&(r.includeSourceLabels&&Yu(s,e,"source"),r.includeTargetLabels&&Yu(s,e,"target")))}return s.x1=hr(s.x1),s.y1=hr(s.y1),s.x2=hr(s.x2),s.y2=hr(s.y2),s.w=hr(s.x2-s.x1),s.h=hr(s.y2-s.y1),s.w>0&&s.h>0&&S&&(uo(s,m),oo(s,1)),s},G0=function(e){var r=0,n=function(s){return(s?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},H0=function(e){if(e.isEdge()){var r=e.source().position(),n=e.target().position(),a=function(s){return Math.round(s)};return Xb([a(r.x),a(r.y),a(n.x),a(n.y)])}else return 0},ld=function(e,r){var n=e._private,a,i=e.isEdge(),s=r==null?cd:G0(r),o=s===cd,u=H0(e),l=n.bbCachePosKey===u,c=r.useCache&&l,f=function(b){return b._private.bbCache==null||b._private.styleDirty},h=!c||f(e)||i&&f(e.source())||f(e.target());if(h?(l||e.recalculateRenderedStyle(c),a=cS(e,Gi),n.bbCache=a,n.bbCachePosKey=u):a=n.bbCache,!o){var v=e.isNode();a=er(),(r.includeNodes&&v||r.includeEdges&&!v)&&(r.includeOverlays?Hn(a,n.overlayBounds):Hn(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?Hn(a,n.labelBounds.all):(r.includeMainLabels&&Hn(a,n.labelBounds.mainRot),r.includeSourceLabels&&Hn(a,n.labelBounds.sourceRot),r.includeTargetLabels&&Hn(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Gi={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},cd=G0(Gi),fd=Pt(Gi);Fn.boundingBox=function(t){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(t===void 0||t.useCache===void 0||t.useCache===!0))t===void 0?t=Gi:t=fd(t),e=ld(this[0],t);else{e=er(),t=t||Gi;var r=fd(t),n=this,a=n.cy(),i=a.styleEnabled();if(i)for(var s=0;s<n.length;s++){var o=n[s],u=o._private,l=H0(o),c=u.bbCachePosKey===l,f=r.useCache&&c&&!u.styleDirty;o.recalculateRenderedStyle(f)}this.updateCompoundBounds(!t.useCache);for(var h=0;h<n.length;h++){var v=n[h];Hn(e,ld(v,r))}}return e.x1=hr(e.x1),e.y1=hr(e.y1),e.x2=hr(e.x2),e.y2=hr(e.y2),e.w=hr(e.x2-e.x1),e.h=hr(e.y2-e.y1),e};Fn.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Fn.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(l){return l.isParent()}),e=e.not(a)),De(t)){var i=t;t=function(){return i}}var s=function(c,f){return c._private.bbAtOldPos=t(c,f)},o=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(s).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=Cw(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),u};Ua.boundingbox=Ua.bb=Ua.boundingBox;Ua.renderedBoundingbox=Ua.renderedBoundingBox;var fS=Fn,wi,os;wi=os={};var W0=function(e){e.uppercaseName=Of(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Of(e.outerName),wi[e.name]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var o=n.pstyle(e.name);switch(o.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return o.pfValue}}else return 1},wi["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){var o=n[e.name](),u=n.pstyle("border-width").pfValue,l=2*n.padding();return o+u+l}else return 1},wi["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},wi["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};W0({name:"width"});W0({name:"height"});os.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};os.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};os.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var dS=os,hS=function(e,r){if(e.isEdge())return r(e)},vS=function(e,r){if(e.isEdge()){var n=e.cy();return ru(r(e),n.zoom(),n.pan())}},pS=function(e,r){if(e.isEdge()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(s){return ru(s,i,a)})}},gS=function(e){return e.renderer().getControlPoints(e)},yS=function(e){return e.renderer().getSegmentPoints(e)},mS=function(e){return e.renderer().getSourceEndpoint(e)},bS=function(e){return e.renderer().getTargetEndpoint(e)},wS=function(e){return e.renderer().getEdgeMidpoint(e)},dd={controlPoints:{get:gS,mult:!0},segmentPoints:{get:yS,mult:!0},sourceEndpoint:{get:mS},targetEndpoint:{get:bS},midpoint:{get:wS}},xS=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},ES=Object.keys(dd).reduce(function(t,e){var r=dd[e],n=xS(e);return t[e]=function(){return hS(this,r.get)},r.mult?t[n]=function(){return pS(this,r.get)}:t[n]=function(){return vS(this,r.get)},t},{}),SS=Ae({},uS,fS,dS,ES);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var K0=function(e,r){this.recycle(e,r)};function di(){return!1}function Os(){return!0}K0.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=di,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Os:di):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Os;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Os;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Os,this.stopPropagation()},isDefaultPrevented:di,isPropagationStopped:di,isImmediatePropagationStopped:di};var Y0=/^([^.]+)(\.(?:[^.]+))?$/,TS=".*",Z0={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},hd=Object.keys(Z0),_S={};function uu(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_S,e=arguments.length>1?arguments[1]:void 0,r=0;r<hd.length;r++){var n=hd[r];this[n]=t[n]||Z0[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Pn=uu.prototype,X0=function(e,r,n,a,i,s,o){nt(a)&&(i=a,a=null),o&&(s==null?s=o:s=Ae({},s,o));for(var u=Ye(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!In(c)){var f=c.match(Y0);if(f){var h=f[1],v=f[2]?f[2]:null,d=r(e,c,h,v,a,i,s);if(d===!1)break}}}},vd=function(e,r){return e.addEventFields(e.context,r),new K0(r.type,r)},BS=function(e,r,n){if(W1(n)){r(e,n);return}else if(De(n)){r(e,vd(e,n));return}for(var a=Ye(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var s=a[i];if(!In(s)){var o=s.match(Y0);if(o){var u=o[1],l=o[2]?o[2]:null,c=vd(e,{type:u,namespace:l,target:e.context});r(e,c)}}}};Pn.on=Pn.addListener=function(t,e,r,n,a){return X0(this,function(i,s,o,u,l,c,f){nt(c)&&i.listeners.push({event:s,callback:c,type:o,namespace:u,qualifier:l,conf:f})},t,e,r,n,a),this};Pn.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};Pn.removeListener=Pn.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=tw(this.listeners));for(var i=this.listeners,s=function(l){var c=i[l];X0(a,function(f,h,v,d,b,y){if((c.type===v||t==="*")&&(!d&&c.namespace!==".*"||c.namespace===d)&&(!b||f.qualifierCompare(c.qualifier,b))&&(!y||c.callback===y))return i.splice(l,1),!1},t,e,r,n)},o=i.length-1;o>=0;o--)s(o);return this};Pn.removeAllListeners=function(){return this.removeListener("*")};Pn.emit=Pn.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,Ye(e)||(e=[e]),BS(this,function(i,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],a=n.length);for(var o=function(c){var f=n[c];if(f.type===s.type&&(!f.namespace||f.namespace===s.namespace||f.namespace===TS)&&i.eventMatches(i.context,f,s)){var h=[s];e!=null&&nw(h,e),i.beforeEmit(i.context,f,s),f.conf&&f.conf.one&&(i.listeners=i.listeners.filter(function(b){return b!==f}));var v=i.callbackContext(i.context,f,s),d=f.callback.apply(v,h);i.afterEmit(i.context,f,s),d===!1&&(s.stopPropagation(),s.preventDefault())}},u=0;u<a;u++)o(u);i.bubble(i.context)&&!s.isPropagationStopped()&&i.parent(i.context).emit(s,e)},t),this.emitting--,this};var AS={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&as(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Ms=function(e){return Be(e)?new Rn(e):e},Q0={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new uu(AS,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=Ms(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=Ms(r),i=0;i<this.length;i++){var s=this[i];s.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=Ms(r),i=0;i<this.length;i++){var s=this[i];s.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=Ms(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};ze.eventAliasesOn(Q0);var j0={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(Be(e)||nr(e))return new Rn(e).filter(this);if(nt(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);o&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){Be(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Be(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,s=this.length<e.length,o=s?a:i,u=s?i:a,l=0;l<o.length;l++){var c=o[l];u.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;Be(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,s=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],h=f._private.data.id,v=l.hasElementWithId(h);v||n.push(f)}};return s(a,i),s(i,a),n},diff:function(e){var r=this._private.cy;Be(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),s=this,o=e,u=function(c,f,h){for(var v=0;v<c.length;v++){var d=c[v],b=d._private.data.id,y=f.hasElementWithId(b);y?i.merge(d):h.push(d)}};return u(s,o,n),u(o,s,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(Be(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var s=e[i],o=!this.has(s);o&&a.push(s)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&Be(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,s=0;s<e.length;s++){var o=e[s],u=o._private.data.id,l=!i.has(u);if(l){var c=this.length++;this[c]=o,i.set(u,{ele:o,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var o=this.length-1,u=this[o],l=u._private.data.id;this[o]=void 0,this[e]=u,i.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var s=i.index;return this.unmergeAt(s),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&Be(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);n.push(o)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=r?e.apply(r,[o,s,i]):e(o,s,i);u>n&&(n=u,a=o)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=r?e.apply(r,[o,s,i]):e(o,s,i);u<n&&(n=u,a=o)}return{value:n,ele:a}}},Le=j0;Le.u=Le["|"]=Le["+"]=Le.union=Le.or=Le.add;Le["\\"]=Le["!"]=Le["-"]=Le.difference=Le.relativeComplement=Le.subtract=Le.not;Le.n=Le["&"]=Le["."]=Le.and=Le.intersection=Le.intersect;Le["^"]=Le["(+)"]=Le["(-)"]=Le.symmetricDifference=Le.symdiff=Le.xor;Le.fnFilter=Le.filterFn=Le.stdFilter=Le.filter;Le.complement=Le.abscomp=Le.absoluteComplement;var CS={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},J0=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?a?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?dc:0}var s=i(e)-i(r);if(s!==0)return s;function o(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=o(e)-o(r);if(u!==0)return u;var l=e.pstyle("z-index").value-r.pstyle("z-index").value;return l!==0?l:e.poolIndex()-r.poolIndex()},Oo={forEach:function(e,r){if(nt(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],s=r?e.apply(r,[i,a,this]):e(i,a,this);if(s===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!nt(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(J0)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:dc-1}else{var i=r.source,s=r.target,o=i.zDepth(),u=s.zDepth();return Math.max(o,u,0)}}}};Oo.each=Oo.forEach;var IS=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":wt(Symbol))!=e&&wt(Symbol.iterator)!=e;r&&(Oo[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,s=this.length;return Zv({next:function(){return i<s?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};IS();var NS=Pt({nodeDimensionsIncludeLabels:!1}),co={layoutDimensions:function(e){e=NS(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(C){return!C.isParent()}),i=this.cy(),s=r.eles,o=function(O){return O.id()},u=Fi(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(O,A,D){var F={x:A.x1+A.w/2,y:A.y1+A.h/2},U={x:(D.x-F.x)*O,y:(D.y-F.y)*O};return{x:F.x+U.x,y:F.y+U.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var O=er(),A=0;A<a.length;A++){var D=a[A],F=u(D,A);Rw(O,F.x,F.y)}return O},h=f(),v=Fi(function(C,O){var A=u(C,O);if(c){var D=Math.abs(r.spacingFactor);A=l(D,h,A)}return r.transform!=null&&(A=r.transform(C,A)),A},o);if(r.animate){for(var d=0;d<a.length;d++){var b=a[d],y=v(b,d),m=r.animateFilter==null||r.animateFilter(b,d);if(m){var E=b.animation({position:y,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(E)}else b.position(y)}if(r.fit){var S=i.animation({fit:{boundingBox:s.boundingBoxAt(v),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(S)}else if(r.zoom!==void 0&&r.pan!==void 0){var B=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(B)}e.animations.forEach(function(C){return C.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),ja.all(e.animations.map(function(C){return C.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(v),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(Ae({},e,{eles:this}))}};co.createLayout=co.makeLayout=co.layout;function ep(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function lu(t,e){return t=sa(t),function(n){return ep(t,e,n)}}function cu(t,e){t=sa(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return ep(t,r,a)}}var Rt={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=i;return e?s.emitAndNotify("style"):s.emit("style"),i.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(De(e)){var s=e;i.applyBypass(this,s,a),this.emitAndNotify("style")}else if(Be(e))if(r===void 0){var o=this[0];return o?i.getStylePropertyValue(o,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var s=0;s<i.length;s++){var o=i[s];a.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var l=i[u];a.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var s=a.data.parent?n.parents():null;if(s)for(var o=0;o<s.length;o++){var u=s[o],l=u.pstyle("opacity").value;i=l*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Zu(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Tc(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],s=a.hasCompoundNodes();if(i){var o=i._private;if(!e(i))return!1;if(i.isNode())return!s||Zu(i,n);var u=o.source,l=o.target;return r(u)&&(!s||Zu(u,r))&&(u===l||r(l)&&(!s||Zu(l,r)))}}}var ri=lu("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});Rt.takesUpSpace=cu("takesUpSpace",Tc({ok:ri}));var RS=lu("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&ri(t)}),kS=lu("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&ri(t)});Rt.interactive=cu("interactive",Tc({ok:RS,parentOk:kS,edgeOkViaNode:ri}));Rt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var PS=lu("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&ri(t)}),OS=ri;Rt.visible=cu("visible",Tc({ok:PS,edgeOkViaNode:OS}));Rt.hidden=function(){var t=this[0];if(t)return!t.visible()};Rt.isBundledBezier=cu("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Rt.bypass=Rt.css=Rt.style;Rt.renderedCss=Rt.renderedStyle;Rt.removeBypass=Rt.removeCss=Rt.removeStyle;Rt.pstyle=Rt.parsedStyle;var An={};function pd(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&nt(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&Ye(e[0])){for(var s=e.length===1?e[0]:null,o=0;o<this.length;o++){var u=this[o],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[t.field]=t.value,c&&r.push(u))}var h=this.spawn(r);h.updateStyle(),h.emit(t.event),s&&h.emit(s)}return this}}function ni(t){An[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},An[t.on]=pd({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),An[t.off]=pd({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}ni({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});ni({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});ni({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});ni({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});An.deselect=An.unselect;An.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};ni({field:"active",on:"activate",off:"unactivate"});ni({field:"pannable",on:"panify",off:"unpanify"});An.inactive=function(){var t=this[0];if(t)return!t._private.active};var $t={},gd=function(e){return function(n){for(var a=this,i=[],s=0;s<a.length;s++){var o=a[s];if(o.isNode()){for(var u=!1,l=o.connectedEdges(),c=0;c<l.length;c++){var f=l[c],h=f.source(),v=f.target();if(e.noIncomingEdges&&v===o&&h!==o||e.noOutgoingEdges&&h===o&&v!==o){u=!0;break}}u||i.push(o)}}return this.spawn(i,!0).filter(n)}},yd=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var s=n[i];if(s.isNode())for(var o=s.connectedEdges(),u=0;u<o.length;u++){var l=o[u],c=l.source(),f=l.target();e.outgoing&&c===s?(a.push(l),a.push(f)):e.incoming&&f===s&&(a.push(l),a.push(c))}}return this.spawn(a,!0).filter(r)}},md=function(e){return function(r){for(var n=this,a=[],i={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var o=!1,u=0;u<s.length;u++){var l=s[u],c=l.id();i[c]||(i[c]=!0,a.push(l),o=!0)}if(!o)break;n=s}return this.spawn(a,!0).filter(r)}};$t.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Ae($t,{roots:gd({noIncomingEdges:!0}),leaves:gd({noOutgoingEdges:!0}),outgoers:vr(yd({outgoing:!0}),"outgoers"),successors:md({outgoing:!0}),incomers:vr(yd({incoming:!0}),"incomers"),predecessors:md({incoming:!0})});Ae($t,{neighborhood:vr(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),s=0;s<i.length;s++){var o=i[s],u=o.source(),l=o.target(),c=a===u?l:u;c.length>0&&e.push(c[0]),e.push(o[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});$t.neighbourhood=$t.neighborhood;$t.closedNeighbourhood=$t.closedNeighborhood;$t.openNeighbourhood=$t.openNeighborhood;Ae($t,{source:vr(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:vr(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:bd({attr:"source"}),targets:bd({attr:"target"})});function bd(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],s=i._private[t.attr];s&&n.push(s)}return this.spawn(n,!0).filter(r)}}Ae($t,{edgesWith:vr(wd(),"edgesWith"),edgesTo:vr(wd({thisIsSrc:!0}),"edgesTo")});function wd(t){return function(r){var n=[],a=this._private.cy,i=t||{};Be(r)&&(r=a.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,u=0;u<o.length;u++){var l=o[u],c=l._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),h=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),v=f||h;v&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}Ae($t,{connectedEdges:vr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,s=0;s<i.length;s++){var o=i[s];e.push(o)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:vr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:vr(xd(),"parallelEdges"),codirectedEdges:vr(xd({codirected:!0}),"codirectedEdges")});function xd(t){var e={codirected:!1};return t=Ae({},e,t),function(n){for(var a=[],i=this.edges(),s=t,o=0;o<i.length;o++)for(var u=i[o],l=u._private,c=l.source,f=c._private.data.id,h=l.data.target,v=c._private.edges,d=0;d<v.length;d++){var b=v[d],y=b._private.data,m=y.target,E=y.source,S=m===h&&E===f,B=f===m&&h===E;(s.codirected&&S||!s.codirected&&(S||B))&&a.push(b)}return this.spawn(a,!0).filter(n)}}Ae($t,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),s=[];e!=null&&i.empty()&&(i=e.sources());var o=function(c,f){a.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return r.spawn();var u=function(){var c=n.collection();s.push(c);var f=i[0];o(f,c),r.bfs({directed:!1,roots:f,visit:function(v){return o(v,c)}}),c.forEach(function(h){h.connectedEdges().forEach(function(v){r.has(v)&&c.has(v.source())&&c.has(v.target())&&c.merge(v)})})};do u();while(i.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});$t.componentsOf=$t.components;var kt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){st("A collection must have a reference to the core");return}var i=new qr,s=!1;if(!r)r=[];else if(r.length>0&&De(r[0])&&!as(r[0])){s=!0;for(var o=[],u=new Qa,l=0,c=r.length;l<c;l++){var f=r[l];f.data==null&&(f.data={});var h=f.data;if(h.id==null)h.id=h0();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var v=new tu(e,f,!1);o.push(v),u.add(h.id)}r=o}this.length=0;for(var d=0,b=r.length;d<b;d++){var y=r[d][0];if(y!=null){var m=y._private.data.id;(!n||!i.has(m))&&(n&&i.set(m,{index:this.length,ele:y}),this[this.length]=y,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(E){this.lazyMap=E},rebuildMap:function(){for(var S=this.lazyMap=new qr,B=this.eles,C=0;C<B.length;C++){var O=B[C];S.set(O.id(),{index:C,ele:O})}}},n&&(this._private.map=i),s&&!a&&this.restore()},je=tu.prototype=kt.prototype=Object.create(Array.prototype);je.instanceString=function(){return"collection"};je.spawn=function(t,e){return new kt(this.cy(),t,e)};je.spawnSelf=function(){return this.spawn(this)};je.cy=function(){return this._private.cy};je.renderer=function(){return this._private.cy.renderer()};je.element=function(){return this[0]};je.collection=function(){return Jv(this)?this:new kt(this._private.cy,[this])};je.unique=function(){return new kt(this._private.cy,this,!0)};je.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};je.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new kt(e)};je.$id=je.getElementById;je.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};je.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};je.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};je.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(De(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,s={},o=t.data.source,u=t.data.target;o!=null&&o!=a.source&&(s.source=""+o,i=!0),u!=null&&u!=a.target&&(s.target=""+u,i=!0),i&&(e=e.move(s))}else{var l="parent"in t.data,c=t.data.parent;l&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(b,y,m){var E=t[b];E!=null&&E!==n[b]&&(E?e[y]():e[m]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var h={data:Vr(n.data),position:Vr(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var v=0;return n.classes.forEach(function(d){return h.classes+=v++===0?d:" "+d}),h}}};je.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};je.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new tu(t,a,!1);e.push(i)}return new kt(t,e)};je.copy=je.clone;je.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],s=[],o,u=0,l=r.length;u<l;u++){var c=r[u];e&&!c.removed()||(c.isNode()?i.push(c):s.push(c))}o=i.concat(s);var f,h=function(){o.splice(f,1),f--};for(f=0;f<o.length;f++){var v=o[f],d=v._private,b=d.data;if(v.clearTraversalCache(),!(!e&&!d.removed)){if(b.id===void 0)b.id=h0();else if(Ee(b.id))b.id=""+b.id;else if(In(b.id)||!Be(b.id)){st("Can not create element with invalid string ID `"+b.id+"`"),h();continue}else if(n.hasElementWithId(b.id)){st("Can not create second element with ID `"+b.id+"`"),h();continue}}var y=b.id;if(v.isNode()){var m=d.position;m.x==null&&(m.x=0),m.y==null&&(m.y=0)}if(v.isEdge()){for(var E=v,S=["source","target"],B=S.length,C=!1,O=0;O<B;O++){var A=S[O],D=b[A];Ee(D)&&(D=b[A]=""+b[A]),D==null||D===""?(st("Can not create edge `"+y+"` with unspecified "+A),C=!0):n.hasElementWithId(D)||(st("Can not create edge `"+y+"` with nonexistant "+A+" `"+D+"`"),C=!0)}if(C){h();continue}var F=n.getElementById(b.source),U=n.getElementById(b.target);F.same(U)?F._private.edges.push(E):(F._private.edges.push(E),U._private.edges.push(E)),E._private.source=F,E._private.target=U}d.map=new qr,d.map.set(y,{ele:v,index:0}),d.removed=!1,e&&n.addToPool(v)}for(var W=0;W<i.length;W++){var H=i[W],R=H._private.data;Ee(R.parent)&&(R.parent=""+R.parent);var I=R.parent,G=I!=null;if(G||H._private.parent){var V=H._private.parent?n.collection().merge(H._private.parent):n.getElementById(I);if(V.empty())R.parent=void 0;else if(V[0].removed())Ve("Node added with missing parent, reference to parent removed"),R.parent=void 0,H._private.parent=null;else{for(var $=!1,X=V;!X.empty();){if(H.same(X)){$=!0,R.parent=void 0;break}X=X.parent()}$||(V[0]._private.children.push(H),H._private.parent=V[0],a.hasCompoundNodes=!0)}}}if(o.length>0){for(var ae=o.length===r.length?r:new kt(n,o),ce=0;ce<ae.length;ce++){var re=ae[ce];re.isNode()||(re.parallelEdges().clearTraversalCache(),re.source().clearTraversalCache(),re.target().clearTraversalCache())}var Z;a.hasCompoundNodes?Z=n.collection().merge(ae).merge(ae.connectedNodes()).merge(ae.parent()):Z=ae,Z.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?ae.emitAndNotify("add"):e&&ae.emit("add")}return r};je.removed=function(){var t=this[0];return t&&t._private.removed};je.inside=function(){var t=this[0];return t&&!t._private.removed};je.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function s(I){for(var G=I._private.edges,V=0;V<G.length;V++)u(G[V])}function o(I){for(var G=I._private.children,V=0;V<G.length;V++)u(G[V])}function u(I){var G=a[I.id()];e&&I.removed()||G||(a[I.id()]=!0,I.isNode()?(n.push(I),s(I),o(I)):n.unshift(I))}for(var l=0,c=r.length;l<c;l++){var f=r[l];u(f)}function h(I,G){var V=I._private.edges;Nn(V,G),I.clearTraversalCache()}function v(I){I.clearTraversalCache()}var d=[];d.ids={};function b(I,G){G=G[0],I=I[0];var V=I._private.children,$=I.id();Nn(V,G),G._private.parent=null,d.ids[$]||(d.ids[$]=!0,d.push(I))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var y=0;y<n.length;y++){var m=n[y];if(m.isEdge()){var E=m.source()[0],S=m.target()[0];h(E,m),h(S,m);for(var B=m.parallelEdges(),C=0;C<B.length;C++){var O=B[C];v(O),O.isBundledBezier()&&O.dirtyBoundingBoxCache()}}else{var A=m.parent();A.length!==0&&b(A,m)}e&&(m._private.removed=!0)}var D=i._private.elements;i._private.hasCompoundNodes=!1;for(var F=0;F<D.length;F++){var U=D[F];if(U.isParent()){i._private.hasCompoundNodes=!0;break}}var W=new kt(this.cy(),n);W.size()>0&&(t?W.emitAndNotify("remove"):e&&W.emit("remove"));for(var H=0;H<d.length;H++){var R=d[H];(!e||!R.removed())&&R.updateStyle()}return W};je.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(d){return d==null?d:""+d};if(t.source!==void 0||t.target!==void 0){var s=i(t.source),o=i(t.target),u=s!=null&&e.hasElementWithId(s),l=o!=null&&e.hasElementWithId(o);(u||l)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var d=r[v],b=d._private.data;d.isEdge()&&(u&&(b.source=s),l&&(b.target=o))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),f=c===null||e.hasElementWithId(c);if(f){var h=c===null?void 0:c;e.batch(function(){var v=r.remove(n,a);v.emitAndNotify("moveout");for(var d=0;d<r.length;d++){var b=r[d],y=b._private.data;b.isNode()&&(y.parent=h)}v.restore(n,a)}),r.emitAndNotify("move")}}return this};[B0,HE,lo,Bn,Ya,oS,ou,SS,Q0,j0,CS,Oo,co,Rt,An,$t].forEach(function(t){Ae(je,t)});var MS={add:function(e){var r,n=this;if(nr(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],s=0;s<a.length;s++){var o=a[s];i.push(o.json())}r=new kt(n,i)}}else if(Ye(e)){var u=e;r=new kt(n,u)}else if(De(e)&&(Ye(e.nodes)||Ye(e.edges))){for(var l=e,c=[],f=["nodes","edges"],h=0,v=f.length;h<v;h++){var d=f[h],b=l[d];if(Ye(b))for(var y=0,m=b.length;y<m;y++){var E=Ae({group:d},b[y]);c.push(E)}}r=new kt(n,c)}else{var S=e;r=new tu(n,S).collection()}return r},remove:function(e){if(!nr(e)){if(Be(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function FS(t,e,r,n){var a=4,i=.001,s=1e-7,o=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var h=c?new Float32Array(u):new Array(u);function v(U,W){return 1-3*W+3*U}function d(U,W){return 3*W-6*U}function b(U){return 3*U}function y(U,W,H){return((v(W,H)*U+d(W,H))*U+b(W))*U}function m(U,W,H){return 3*v(W,H)*U*U+2*d(W,H)*U+b(W)}function E(U,W){for(var H=0;H<a;++H){var R=m(W,t,r);if(R===0)return W;var I=y(W,t,r)-U;W-=I/R}return W}function S(){for(var U=0;U<u;++U)h[U]=y(U*l,t,r)}function B(U,W,H){var R,I,G=0;do I=W+(H-W)/2,R=y(I,t,r)-U,R>0?H=I:W=I;while(Math.abs(R)>s&&++G<o);return I}function C(U){for(var W=0,H=1,R=u-1;H!==R&&h[H]<=U;++H)W+=l;--H;var I=(U-h[H])/(h[H+1]-h[H]),G=W+I*l,V=m(G,t,r);return V>=i?E(U,G):V===0?G:B(U,W,W+l)}var O=!1;function A(){O=!0,(t!==e||r!==n)&&S()}var D=function(W){return O||A(),t===e&&r===n?W:W===0?0:W===1?1:y(C(W),e,n)};D.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var F="generateBezier("+[t,e,r,n]+")";return D.toString=function(){return F},D}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var DS=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var s={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:s.v,dv:t(s)}}function r(n,a){var i={dx:n.v,dv:t(n)},s=e(n,a*.5,i),o=e(n,a*.5,s),u=e(n,a,o),l=1/6*(i.dx+2*(s.dx+o.dx)+u.dx),c=1/6*(i.dv+2*(s.dv+o.dv)+u.dv);return n.x=n.x+l*a,n.v=n.v+c*a,n}return function n(a,i,s){var o={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,h,v,d;for(a=parseFloat(a)||500,i=parseFloat(i)||20,s=s||null,o.tension=a,o.friction=i,h=s!==null,h?(l=n(a,i),v=l/s*f):v=f;d=r(d||o,v),u.push(1+d.x),l+=16,Math.abs(d.x)>c&&Math.abs(d.v)>c;);return h?function(b){return u[b*(u.length-1)|0]}:l}}(),Qe=function(e,r,n,a){var i=FS(e,r,n,a);return function(s,o,u){return s+(o-s)*i(u)}},fo={linear:function(e,r,n){return e+(r-e)*n},ease:Qe(.25,.1,.25,1),"ease-in":Qe(.42,0,1,1),"ease-out":Qe(0,0,.58,1),"ease-in-out":Qe(.42,0,.58,1),"ease-in-sine":Qe(.47,0,.745,.715),"ease-out-sine":Qe(.39,.575,.565,1),"ease-in-out-sine":Qe(.445,.05,.55,.95),"ease-in-quad":Qe(.55,.085,.68,.53),"ease-out-quad":Qe(.25,.46,.45,.94),"ease-in-out-quad":Qe(.455,.03,.515,.955),"ease-in-cubic":Qe(.55,.055,.675,.19),"ease-out-cubic":Qe(.215,.61,.355,1),"ease-in-out-cubic":Qe(.645,.045,.355,1),"ease-in-quart":Qe(.895,.03,.685,.22),"ease-out-quart":Qe(.165,.84,.44,1),"ease-in-out-quart":Qe(.77,0,.175,1),"ease-in-quint":Qe(.755,.05,.855,.06),"ease-out-quint":Qe(.23,1,.32,1),"ease-in-out-quint":Qe(.86,0,.07,1),"ease-in-expo":Qe(.95,.05,.795,.035),"ease-out-expo":Qe(.19,1,.22,1),"ease-in-out-expo":Qe(1,0,0,1),"ease-in-circ":Qe(.6,.04,.98,.335),"ease-out-circ":Qe(.075,.82,.165,1),"ease-in-out-circ":Qe(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return fo.linear;var a=DS(e,r,n);return function(i,s,o){return i+(s-i)*a(o)}},"cubic-bezier":Qe};function Ed(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function Sd(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Ea(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var s=Sd(t,a),o=Sd(e,a);if(Ee(s)&&Ee(o))return Ed(i,s,o,r,n);if(Ye(s)&&Ye(o)){for(var u=[],l=0;l<o.length;l++){var c=s[l],f=o[l];if(c!=null&&f!=null){var h=Ed(i,c,f,r,n);u.push(h)}else u.push(f)}return u}}function US(t,e,r,n){var a=!n,i=t._private,s=e._private,o=s.easing,u=s.startTime,l=n?t:t.cy(),c=l.style();if(!s.easingImpl)if(o==null)s.easingImpl=fo.linear;else{var f;if(Be(o)){var h=c.parse("transition-timing-function",o);f=h.value}else f=o;var v,d;Be(f)?(v=f,d=[]):(v=f[1],d=f.slice(2).map(function(ae){return+ae})),d.length>0?(v==="spring"&&d.push(s.duration),s.easingImpl=fo[v].apply(null,d)):s.easingImpl=fo[v]}var b=s.easingImpl,y;if(s.duration===0?y=1:y=(r-u)/s.duration,s.applying&&(y=s.progress),y<0?y=0:y>1&&(y=1),s.delay==null){var m=s.startPosition,E=s.position;if(E&&a&&!t.locked()){var S={};hi(m.x,E.x)&&(S.x=Ea(m.x,E.x,y,b)),hi(m.y,E.y)&&(S.y=Ea(m.y,E.y,y,b)),t.position(S)}var B=s.startPan,C=s.pan,O=i.pan,A=C!=null&&n;A&&(hi(B.x,C.x)&&(O.x=Ea(B.x,C.x,y,b)),hi(B.y,C.y)&&(O.y=Ea(B.y,C.y,y,b)),t.emit("pan"));var D=s.startZoom,F=s.zoom,U=F!=null&&n;U&&(hi(D,F)&&(i.zoom=$i(i.minZoom,Ea(D,F,y,b),i.maxZoom)),t.emit("zoom")),(A||U)&&t.emit("viewport");var W=s.style;if(W&&W.length>0&&a){for(var H=0;H<W.length;H++){var R=W[H],I=R.name,G=R,V=s.startStyle[I],$=c.properties[V.name],X=Ea(V,G,y,b,$);c.overrideBypass(t,I,X)}t.emit("style")}}return s.progress=y,y}function hi(t,e){return t==null||e==null?!1:Ee(t)&&Ee(e)?!0:!!(t&&e)}function LS(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function Td(t,e){var r=e._private.aniEles,n=[];function a(c,f){var h=c._private,v=h.animation.current,d=h.animation.queue,b=!1;if(v.length===0){var y=d.shift();y&&v.push(y)}for(var m=function(O){for(var A=O.length-1;A>=0;A--){var D=O[A];D()}O.splice(0,O.length)},E=v.length-1;E>=0;E--){var S=v[E],B=S._private;if(B.stopped){v.splice(E,1),B.hooked=!1,B.playing=!1,B.started=!1,m(B.frames);continue}!B.playing&&!B.applying||(B.playing&&B.applying&&(B.applying=!1),B.started||LS(c,S,t),US(c,S,t,f),B.applying&&(B.applying=!1),m(B.frames),B.step!=null&&B.step(t),S.completed()&&(v.splice(E,1),B.hooked=!1,B.playing=!1,B.started=!1,m(B.completes)),b=!0)}return!f&&v.length===0&&d.length===0&&n.push(c),b}for(var i=!1,s=0;s<r.length;s++){var o=r[s],u=a(o);i=i||u}var l=a(e,!0);(i||l)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var $S={animate:ze.animate(),animation:ze.animation(),animated:ze.animated(),clearQueue:ze.clearQueue(),delay:ze.delay(),delayAnimation:ze.delayAnimation(),stop:ze.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&Io(function(i){Td(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,s){Td(s,e)},n.beforeRenderPriorities.animations):r()}},zS={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&as(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},Fs=function(e){return Be(e)?new Rn(e):e},tp={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new uu(zS,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,Fs(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,Fs(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,Fs(r),n),this},once:function(e,r,n){return this.emitter().one(e,Fs(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};ze.eventAliasesOn(tp);var Ml={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};Ml.jpeg=Ml.jpg;var ho={layout:function(e){var r=this;if(e==null){st("Layout options must be specified to make a layout");return}if(e.name==null){st("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){st("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Be(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var s=new a(Ae({},e,{cy:r,eles:i}));return s}};ho.createLayout=ho.makeLayout=ho.layout;var VS={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],s=e[i],o=r.getElementById(i);o.data(s)}})}},qS=Pt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Fl={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){st("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Ve("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=qS(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Fl.invalidateDimensions=Fl.resize;var vo={collection:function(e,r){return Be(e)?this.$(e):nr(e)?e.collection():Ye(e)?(r||(r={}),new kt(this,e,r.unique,r.removed)):new kt(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};vo.elements=vo.filter=vo.$;var qt={},Bi="t",GS="f";qt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var s=t[i],o=e.getContextMeta(s);if(!o.empty){var u=e.getContextStyle(o),l=e.applyContextStyle(o,u,s);s._private.appliedInitStyle?e.updateTransitions(s,l.diffProps):s._private.appliedInitStyle=!0;var c=e.updateStyleHints(s);c&&a.push(s)}}return a};qt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var s=[],o={},u=0;u<r.length;u++){var l=r[u],c=t[u]===Bi,f=e[u]===Bi,h=c!==f,v=l.mappedProperties.length>0;if(h||f&&v){var d=void 0;h&&v||h?d=l.properties:v&&(d=l.mappedProperties);for(var b=0;b<d.length;b++){for(var y=d[b],m=y.name,E=!1,S=u+1;S<r.length;S++){var B=r[S],C=e[S]===Bi;if(C&&(E=B.properties[y.name]!=null,E))break}!o[m]&&!E&&(o[m]=!0,s.push(m))}}}return n[a]=s,s};qt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var s=e[i],o=s.selector&&s.selector.matches(t);o?r+=Bi:r+=GS}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};qt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var s=r[i],o=e[i]===Bi;if(o)for(var u=0;u<s.properties.length;u++){var l=s.properties[u];a[l.name]=l}}return n[e]=a,a};qt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},s=n.types,o=0;o<a.length;o++){var u=a[o],l=e[u],c=r.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===s.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,h=f.fnValue=l.value(r);if(h===f.prevFnValue)continue}var v=i[u]={prev:c};n.applyParsedProperty(r,l),v.next=r.pstyle(u),v.next&&v.next.bypass&&(v.next=v.next.bypassed)}}return{diffProps:i}};qt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(M,K,te){return r.getPropertiesHash(M,K,te)},s=e.styleKey;if(t.removed())return!1;var o=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var l=0;l<a.length;l++){var c=a[l];e.styleKeys[c]=[Ra,mi]}for(var f=function(M,K){return e.styleKeys[K][0]=Di(M,e.styleKeys[K][0])},h=function(M,K){return e.styleKeys[K][1]=Ui(M,e.styleKeys[K][1])},v=function(M,K){f(M,K),h(M,K)},d=function(M,K){for(var te=0;te<M.length;te++){var Q=M.charCodeAt(te);f(Q,K),h(Q,K)}},b=2e9,y=function(M){return-128<M&&M<128&&Math.floor(M)!==M?b-(M*1024|0):M},m=0;m<n.length;m++){var E=n[m],S=u[E];if(S!=null){var B=this.properties[E],C=B.type,O=B.groupKey,A=void 0;B.hashOverride!=null?A=B.hashOverride(t,S):S.pfValue!=null&&(A=S.pfValue);var D=B.enums==null?S.value:null,F=A!=null,U=D!=null,W=F||U,H=S.units;if(C.number&&W&&!C.multiple){var R=F?A:D;v(y(R),O),!F&&H!=null&&d(H,O)}else d(S.strValue,O)}}for(var I=[Ra,mi],G=0;G<a.length;G++){var V=a[G],$=e.styleKeys[V];I[0]=Di($[0],I[0]),I[1]=Ui($[1],I[1])}e.styleKey=Zb(I[0],I[1]);var X=e.styleKeys;e.labelDimsKey=pn(X.labelDimensions);var ae=i(t,["label"],X.labelDimensions);if(e.labelKey=pn(ae),e.labelStyleKey=pn(As(X.commonLabel,ae)),!o){var ce=i(t,["source-label"],X.labelDimensions);e.sourceLabelKey=pn(ce),e.sourceLabelStyleKey=pn(As(X.commonLabel,ce));var re=i(t,["target-label"],X.labelDimensions);e.targetLabelKey=pn(re),e.targetLabelStyleKey=pn(As(X.commonLabel,re))}if(o){var Z=e.styleKeys,le=Z.nodeBody,N=Z.nodeBorder,fe=Z.nodeOutline,he=Z.backgroundImage,pe=Z.compound,ie=Z.pie,J=[le,N,fe,he,pe,ie].filter(function(k){return k!=null}).reduce(As,[Ra,mi]);e.nodeKey=pn(J),e.hasPie=ie!=null&&ie[0]!==Ra&&ie[1]!==mi}return s!==e.styleKey};qt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};qt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,s=r.types,o=r.properties[n.name].type,u=n.bypass,l=a[n.name],c=l&&l.bypass,f=t._private,h="mapping",v=function(le){return le==null?null:le.pfValue!=null?le.pfValue:le.value},d=function(){var le=v(l),N=v(n);r.checkTriggers(t,n.name,le,N)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,d(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,d(),!0):!1:(d(),!0);if(n.deleteBypass)return l?l.bypass?(a[n.name]=l.bypassed,d(),!0):!1:(d(),!0);var b=function(){Ve("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var y=n.field.split("."),m=f.data,E=0;E<y.length&&m;E++){var S=y[E];m=m[S]}if(m==null)return b(),!1;var B;if(Ee(m)){var C=n.fieldMax-n.fieldMin;C===0?B=0:B=(m-n.fieldMin)/C}else return Ve("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+m+"` for `"+t.id()+"` is non-numeric)"),!1;if(B<0?B=0:B>1&&(B=1),o.color){var O=n.valueMin[0],A=n.valueMax[0],D=n.valueMin[1],F=n.valueMax[1],U=n.valueMin[2],W=n.valueMax[2],H=n.valueMin[3]==null?1:n.valueMin[3],R=n.valueMax[3]==null?1:n.valueMax[3],I=[Math.round(O+(A-O)*B),Math.round(D+(F-D)*B),Math.round(U+(W-U)*B),Math.round(H+(R-H)*B)];i={bypass:n.bypass,name:n.name,value:I,strValue:"rgb("+I[0]+", "+I[1]+", "+I[2]+")"}}else if(o.number){var G=n.valueMin+(n.valueMax-n.valueMin)*B;i=this.parse(n.name,G,n.bypass,h)}else return!1;if(!i)return b(),!1;i.mapping=n,n=i;break}case s.data:{for(var V=n.field.split("."),$=f.data,X=0;X<V.length&&$;X++){var ae=V[X];$=$[ae]}if($!=null&&(i=this.parse(n.name,$,n.bypass,h)),!i)return b(),!1;i.mapping=n,n=i;break}case s.fn:{var ce=n.value,re=n.fnValue!=null?n.fnValue:ce(t);if(n.prevFnValue=re,re==null)return Ve("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,re,n.bypass,h),!i)return Ve("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Vr(n),n=i;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,a[n.name]=n):c?l.bypassed=n:a[n.name]=n,d(),!0};qt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),s=0;s<i.length;s++){var o=i[s],u=a[o];u!=null&&(u.bypass?u.bypassed=null:a[o]=null)}}};qt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};qt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var o={},u=!1,l=0;l<a.length;l++){var c=a[l],f=t.pstyle(c),h=e[c];if(h){var v=h.prev,d=v,b=h.next!=null?h.next:f,y=!1,m=void 0,E=1e-6;d&&(Ee(d.pfValue)&&Ee(b.pfValue)?(y=b.pfValue-d.pfValue,m=d.pfValue+E*y):Ee(d.value)&&Ee(b.value)?(y=b.value-d.value,m=d.value+E*y):Ye(d.value)&&Ye(b.value)&&(y=d.value[0]!==b.value[0]||d.value[1]!==b.value[1]||d.value[2]!==b.value[2],m=d.strValue),y&&(o[c]=b.strValue,this.applyBypass(t,c,m),u=!0))}}if(!u)return;n.transitioning=!0,new ja(function(S){s>0?t.delayAnimation(s).play().promise().then(S):S()}).then(function(){return t.animation({style:o,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};qt.checkTrigger=function(t,e,r,n,a,i){var s=this.properties[e],o=a(s);o!=null&&o(r,n)&&i(s)};qt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};qt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&e==="curve-style"&&(r==="bezier"||n==="bezier")&&t.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()}),a.triggersBoundsOfConnectedEdges&&e==="display"&&(r==="none"||n==="none")&&t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};qt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n)};var us={};us.applyBypass=function(t,e,r,n){var a=this,i=[],s=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var o=0;o<a.properties.length;o++){var u=a.properties[o],l=u.name,c=this.parse(l,r,!0);c&&i.push(c)}}else if(Be(e)){var f=this.parse(e,r,!0);f&&i.push(f)}else if(De(e)){var h=e;n=r;for(var v=Object.keys(h),d=0;d<v.length;d++){var b=v[d],y=h[b];if(y===void 0&&(y=h[jo(b)]),y!==void 0){var m=this.parse(b,y,!0);m&&i.push(m)}}}else return!1;if(i.length===0)return!1;for(var E=!1,S=0;S<t.length;S++){for(var B=t[S],C={},O=void 0,A=0;A<i.length;A++){var D=i[A];if(n){var F=B.pstyle(D.name);O=C[D.name]={prev:F}}E=this.applyParsedProperty(B,Vr(D))||E,n&&(O.next=B.pstyle(D.name))}E&&this.updateStyleHints(B),n&&this.updateTransitions(B,C,s)}return E};us.overrideBypass=function(t,e,r){e=fc(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],s=this.properties[e].type,o=s.color,u=s.mutiple,l=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),o?i.strValue="rgb("+r.join(",")+")":u?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,l,r)}};us.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};us.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],s={},o=0;o<e.length;o++){var u=e[o],l=this.properties[u],c=i.pstyle(l.name);if(!(!c||!c.bypass)){var f="",h=this.parse(u,f,!0),v=s[l.name]={prev:c};this.applyParsedProperty(i,h),v.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,s,n)}};var _c={};_c.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};_c.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var Hr={};Hr.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Hr.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],s=r.getStylePropertyValue(t,i.name,e);s!=null&&(n[i.name]=s,n[jo(i.name)]=s)}return n}};Hr.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};Hr.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,s=t.pstyle(a.name);if(s){var o=s.value,u=s.units,l=s.strValue;if(r&&i.number&&o!=null&&Ee(o)){var c=t.cy().zoom(),f=function(y){return y*c},h=function(y,m){return f(y)+m},v=Ye(o),d=v?u.every(function(b){return b!=null}):u!=null;return d?v?o.map(function(b,y){return h(b,u[y])}).join(" "):h(o,u):v?o.map(function(b){return Be(b)?b:""+f(b)}).join(" "):""+f(o)}else if(l!=null)return l}return null}};Hr.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,s=t.pstyle(i);s!==void 0&&(De(s)?s=this.parse(i,s.strValue):s=this.parse(i,s)),s&&(r[i]=s)}return r};Hr.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),s=0;s<i.length;s++){var o=i[s],u=n[o],l=a[o]||a[fc(o)],c=this.parse(l.name,u);c&&r.push(c)}return r};Hr.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,s,o,u,l;for(u=0;u<e.length;u++)if(a=e[u],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Di(o,n[0]),n[1]=Ui(o,n[1]);else for(s=i.strValue,l=0;l<s.length;l++)o=s.charCodeAt(l),n[0]=Di(o,n[0]),n[1]=Ui(o,n[1]);return n};Hr.getPropertiesHash=Hr.getNonDefaultPropertiesHash;var fu={};fu.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,s=Object.keys(i);e.selector(a);for(var o=0;o<s.length;o++){var u=s[o],l=i[u];e.css(u,l)}}return e};fu.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};fu.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},s=0;s<a.length;s++){var o=a[s];i[o.name]=o.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var Bc={};Bc.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>s.length?i=i.substr(s.length):i=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Ve("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var f=c[1];if(f!=="core"){var h=new Rn(f);if(h.invalid){Ve("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),o();continue}}var v=c[2],d=!1;i=v;for(var b=[];;){var y=i.match(/^\s*$/);if(y)break;var m=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!m){Ve("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+v),d=!0;break}s=m[0];var E=m[1],S=m[2],B=e.properties[E];if(!B){Ve("Skipping property: Invalid property name in: "+s),u();continue}var C=r.parse(E,S);if(!C){Ve("Skipping property: Invalid property definition in: "+s),u();continue}b.push({name:E,val:S}),u()}if(d){o();break}r.selector(f);for(var O=0;O<b.length;O++){var A=b[O];r.css(A.name,A.val)}o()}return r};Bc.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var It={};(function(){var t=yt,e=j1,r=eb,n=tb,a=rb,i=function(J){return"^"+J+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(J){var k=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+J+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+k+")\\s*\\,\\s*("+k+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];It.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(J,k){switch(J.length){case 2:return k[0]!=="deg"&&k[0]!=="rad"&&k[1]!=="deg"&&k[1]!=="rad";case 1:return Be(J[0])||k[0]==="deg"||k[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(J){var k=J.length;return k===1||k===2||k===4}}};var u={zeroNonZero:function(J,k){return(J==null||k==null)&&J!==k||J==0&&k!=0?!0:J!=0&&k==0},any:function(J,k){return J!=k},emptyNonEmpty:function(J,k){var M=In(J),K=In(k);return M&&!K||!M&&K}},l=It.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],v=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],d=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification}],b=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}],y=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],m=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],E=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],S=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],B=function(J,k){return k.value==="label"?-J.poolIndex():k.pfValue},C=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:B},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:B},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],O=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],A=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],D=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],F=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],U=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],W=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],H=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],R=[];It.pieBackgroundN=16,R.push({name:"pie-size",type:l.sizeMaybePercent});for(var I=1;I<=It.pieBackgroundN;I++)R.push({name:"pie-"+I+"-background-color",type:l.color}),R.push({name:"pie-"+I+"-background-size",type:l.percent}),R.push({name:"pie-"+I+"-background-opacity",type:l.zeroOneNumber});var G=[],V=It.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(ie){V.forEach(function(J){var k=J+"-"+ie.name,M=ie.type,K=ie.triggersBounds;G.push({name:k,type:M,triggersBounds:K})})},{});var $=It.properties=[].concat(b,S,y,m,E,W,d,v,c,f,h,C,O,A,D,R,F,U,G,H),X=It.propertyGroups={behavior:b,transition:S,visibility:y,overlay:m,underlay:E,ghost:W,commonLabel:d,labelDimensions:v,mainLabel:c,sourceLabel:f,targetLabel:h,nodeBody:C,nodeBorder:O,nodeOutline:A,backgroundImage:D,pie:R,compound:F,edgeLine:U,edgeArrow:G,core:H},ae=It.propertyGroupNames={},ce=It.propertyGroupKeys=Object.keys(X);ce.forEach(function(ie){ae[ie]=X[ie].map(function(J){return J.name}),X[ie].forEach(function(J){return J.groupKey=ie})});var re=It.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];It.propertyNames=$.map(function(ie){return ie.name});for(var Z=0;Z<$.length;Z++){var le=$[Z];$[le.name]=le}for(var N=0;N<re.length;N++){var fe=re[N],he=$[fe.pointsTo],pe={name:fe.name,alias:!0,pointsTo:he};$.push(pe),$[fe.name]=pe}})();It.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};It.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Ae({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=It.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return It.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,h=l.value;u[f]=h}),u},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,s=e[i],o=this.parse(i,s);r[i]=o}}return t.defaultProperties=r,t.defaultProperties};It.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var du={};du.parse=function(t,e,r,n){var a=this;if(nt(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=r?"t":"f",o=""+e,u=c0(t,o,s,i),l=a.propCache=a.propCache||[],c;return(c=l[u])||(c=l[u]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Vr(c),c&&(c.value=Vr(c.value))),c};du.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Ve("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Ve("The style value of `label` is deprecated for `"+a.name+"`"),a};du.parseImpl=function(t,e,r,n){var a=this;t=fc(t);var i=a.properties[t],s=e,o=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var u=Be(e);u&&(e=e.trim());var l=i.type;if(!l)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(nt(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:r};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(o.data.regex).exec(e))){if(r)return!1;var h=o.data;return{name:t,value:c,strValue:""+e,mapped:h,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(o.mapData.regex).exec(e))){if(r||l.multiple)return!1;var v=o.mapData;if(!(l.color||l.number))return!1;var d=this.parse(t,f[4]);if(!d||d.mapped)return!1;var b=this.parse(t,f[5]);if(!b||b.mapped)return!1;if(d.pfValue===b.pfValue||d.strValue===b.strValue)return Ve("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+d.strValue+"`"),this.parse(t,d.strValue);if(l.color){var y=d.value,m=b.value,E=y[0]===m[0]&&y[1]===m[1]&&y[2]===m[2]&&(y[3]===m[3]||(y[3]==null||y[3]===1)&&(m[3]==null||m[3]===1));if(E)return!1}return{name:t,value:f,strValue:""+e,mapped:v,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:d.value,valueMax:b.value,bypass:r}}}if(l.multiple&&n!=="multiple"){var S;if(u?S=e.split(/\s+/):Ye(e)?S=e:S=[e],l.evenMultiple&&S.length%2!==0)return null;for(var B=[],C=[],O=[],A="",D=!1,F=0;F<S.length;F++){var U=a.parse(t,S[F],r,"multiple");D=D||Be(U.value),B.push(U.value),O.push(U.pfValue!=null?U.pfValue:U.value),C.push(U.units),A+=(F>0?" ":"")+U.strValue}return l.validate&&!l.validate(B,C)?null:l.singleEnum&&D?B.length===1&&Be(B[0])?{name:t,value:B[0],strValue:B[0],bypass:r}:null:{name:t,value:B,pfValue:O,strValue:A,bypass:r,units:C}}var W=function(){for(var J=0;J<l.enums.length;J++){var k=l.enums[J];if(k===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(l.number){var H,R="px";if(l.units&&(H=l.units),l.implicitUnits&&(R=l.implicitUnits),!l.unitless)if(u){var I="px|em"+(l.allowPercent?"|\\%":"");H&&(I=H);var G=e.match("^("+yt+")("+I+")?$");G&&(e=G[1],H=G[2]||R)}else(!H||l.implicitUnits)&&(H=R);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=s,W();if(l.integer&&!H1(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var V={name:t,value:e,strValue:""+e+(H||""),units:H,bypass:r};return l.unitless||H!=="px"&&H!=="em"?V.pfValue=e:V.pfValue=H==="px"||!H?e:this.getEmSizeInPixels()*e,(H==="ms"||H==="s")&&(V.pfValue=H==="ms"?e:1e3*e),(H==="deg"||H==="rad")&&(V.pfValue=H==="rad"?e:_w(e)),H==="%"&&(V.pfValue=e/100),V}else if(l.propList){var $=[],X=""+e;if(X!=="none"){for(var ae=X.split(/\s*,\s*|\s+/),ce=0;ce<ae.length;ce++){var re=ae[ce].trim();a.properties[re]?$.push(re):Ve("`"+re+"` is not a valid property name")}if($.length===0)return null}return{name:t,value:$,strValue:$.length===0?"none":$.join(" "),bypass:r}}else if(l.color){var Z=ub(e);return Z?{name:t,value:Z,pfValue:Z,strValue:"rgb("+Z[0]+","+Z[1]+","+Z[2]+")",bypass:r}:null}else if(l.regex||l.regexes){if(l.enums){var le=W();if(le)return le}for(var N=l.regexes?l.regexes:[l.regex],fe=0;fe<N.length;fe++){var he=new RegExp(N[fe]),pe=he.exec(e);if(pe)return{name:t,value:l.singleRegexMatchValue?pe[1]:pe,strValue:""+e,bypass:r}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:r}:l.enums?W():null};var Lt=function t(e){if(!(this instanceof t))return new t(e);if(!cc(e)){st("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},zt=Lt.prototype;zt.instanceString=function(){return"style"};zt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};zt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};zt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};zt.selector=function(t){var e=t==="core"?null:new Rn(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};zt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[jo(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};zt.style=zt.css;zt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};zt.append=function(t){return e0(t)?t.appendToStyle(this):Ye(t)?this.appendFromJson(t):Be(t)&&this.appendFromString(t),this};Lt.fromJson=function(t,e){var r=new Lt(t);return r.fromJson(e),r};Lt.fromString=function(t,e){return new Lt(t).fromString(e)};[qt,us,_c,Hr,fu,Bc,It,du].forEach(function(t){Ae(zt,t)});Lt.types=zt.types;Lt.properties=zt.properties;Lt.propertyGroups=zt.propertyGroups;Lt.propertyGroupNames=zt.propertyGroupNames;Lt.propertyGroupKeys=zt.propertyGroupKeys;var HS={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return e0(e)?r.style=e.generateStyle(this):Ye(e)?r.style=Lt.fromJson(this,e):Be(e)?r.style=Lt.fromString(this,e):r.style=Lt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},WS="single",ca={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=WS),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,s,o;switch(e.length){case 0:return r;case 1:if(Be(e[0]))return n=e[0],r[n];if(De(e[0])){if(!this._private.panningEnabled)return this;i=e[0],s=i.x,o=i.y,Ee(s)&&(r.x=s),Ee(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&Ee(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,s,o,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:De(e)&&(o=n[0],u=o.x,l=o.y,Ee(u)&&(a.x+=u),Ee(l)&&(a.y+=l),this.emit("pan viewport"));break;case 2:i=e,s=r,(i==="x"||i==="y")&&Ee(s)&&(a[i]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(Ee(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Be(e)){var a=e;e=this.$(a)}else if(Y1(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else nr(e)||(e=this.mutableElements());if(!(nr(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),o=this.height(),u;if(r=Ee(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((s-2*r)/n.w,(o-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(s-u*(n.x1+n.x2))/2,y:(o-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return Ee(e)&&Ee(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):Ee(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:Ee(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,s,o=!1;if(r.zoomingEnabled||(o=!0),Ee(e)?s=e:De(e)&&(s=e.level,e.position!=null?i=ru(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(o=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,o||!Ee(s)||s===a||i!=null&&(!Ee(i.x)||!Ee(i.y)))return null;if(i!=null){var u=n,l=a,c=s,f={x:-c/l*(i.x-u.x)+i.x,y:-c/l*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],s=!1,o=!1;if(!e)return this;if(Ee(e.zoom)||(n=!1),De(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=u,i.push("zoom"))}if(a&&(!s||!e.cancelOnFailedZoom)&&r.panningEnabled){var l=e.pan;Ee(l.x)&&(r.pan.x=l.x,o=!1),Ee(l.y)&&(r.pan.y=l.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(Be(e)){var n=e;e=this.mutableElements().filter(n)}else nr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var o={x:(i-r*(a.x1+a.x2))/2,y:(s-r*(a.y1+a.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(o){return parseFloat(a.getPropertyValue(o))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};ca.centre=ca.center;ca.autolockNodes=ca.autolock;ca.autoungrabifyNodes=ca.autoungrabify;var Hi={data:ze.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:ze.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:ze.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ze.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Hi.attr=Hi.data;Hi.removeAttr=Hi.removeData;var Wi=function(e){var r=this;e=Ae({},e);var n=e.container;n&&!Co(n)&&Co(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var s=pt!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=Ae({name:s?"grid":"null"},o.layout),o.renderer=Ae({name:s?"canvas":"null"},o.renderer);var u=function(d,b,y){return b!==void 0?b:y!==void 0?y:d},l=this._private={container:n,ready:!1,options:o,elements:new kt(this),listeners:[],aniEles:new kt(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:Ee(o.zoom)?o.zoom:1,pan:{x:De(o.pan)&&Ee(o.pan.x)?o.pan.x:0,y:De(o.pan)&&Ee(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var c=function(d,b){var y=d.some(Z1);if(y)return ja.all(d).then(b);b(d)};l.styleEnabled&&r.setStyle([]);var f=Ae({},o,o.renderer);r.initRenderer(f);var h=function(d,b,y){r.notifications(!1);var m=r.mutableElements();m.length>0&&m.remove(),d!=null&&(De(d)||Ye(d))&&r.add(d),r.one("layoutready",function(S){r.notifications(!0),r.emit(S),r.one("load",b),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",y),r.emit("done")});var E=Ae({},r._private.options.layout);E.eles=r.elements(),r.layout(E).run()};c([o.style,o.elements],function(v){var d=v[0],b=v[1];l.styleEnabled&&r.style().append(d),h(b,function(){r.startAnimationLoop(),l.ready=!0,nt(o.ready)&&r.on("ready",o.ready);for(var y=0;y<i.length;y++){var m=i[y];r.on("ready",m)}a&&(a.readies=[]),r.emit("ready")},o.done)})},Mo=Wi.prototype;Ae(Mo,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return pt;var r=this._private.container.ownerDocument;return r===void 0||r==null?pt:r.defaultView||pt},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!Co(e)&&Co(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(Ae({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Vr(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(B){return r.getElementById(B.id())};if(De(e)){if(r.startBatch(),e.elements){var s={},o=function(B,C){for(var O=[],A=[],D=0;D<B.length;D++){var F=B[D];if(!F.data.id){Ve("cy.json() cannot handle elements without an ID attribute");continue}var U=""+F.data.id,W=r.getElementById(U);s[U]=!0,W.length!==0?A.push({ele:W,json:F}):(C&&(F.group=C),O.push(F))}r.add(O);for(var H=0;H<A.length;H++){var R=A[H],I=R.ele,G=R.json;I.json(G)}};if(Ye(e.elements))o(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];Ye(f)&&o(f,c)}var h=r.collection();a.filter(function(S){return!s[S.id()]}).forEach(function(S){S.isParent()?h.merge(S):S.remove()}),h.forEach(function(S){return S.children().move({parent:null})}),h.forEach(function(S){return i(S).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var v=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],d=0;d<v.length;d++){var b=v[d];e[b]!=null&&r[b](e[b])}return r.endBatch(),this}else{var y=!!e,m={};y?m.elements=this.elements().map(function(S){return S.json()}):(m.elements={},a.forEach(function(S){var B=S.group();m.elements[B]||(m.elements[B]=[]),m.elements[B].push(S.json())})),this._private.styleEnabled&&(m.style=r.style().json()),m.data=Vr(r.data());var E=n.options;return m.zoomingEnabled=n.zoomingEnabled,m.userZoomingEnabled=n.userZoomingEnabled,m.zoom=n.zoom,m.minZoom=n.minZoom,m.maxZoom=n.maxZoom,m.panningEnabled=n.panningEnabled,m.userPanningEnabled=n.userPanningEnabled,m.pan=Vr(n.pan),m.boxSelectionEnabled=n.boxSelectionEnabled,m.renderer=Vr(E.renderer),m.hideEdgesOnViewport=E.hideEdgesOnViewport,m.textureOnViewport=E.textureOnViewport,m.wheelSensitivity=E.wheelSensitivity,m.motionBlur=E.motionBlur,m.multiClickDebounceTime=E.multiClickDebounceTime,m}}});Mo.$id=Mo.getElementById;[MS,$S,tp,Ml,ho,VS,Fl,vo,HS,ca,Hi].forEach(function(t){Ae(Mo,t)});var KS={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},YS={maximal:!1,acyclic:!1},Sa=function(e){return e.scratch("breadthfirst")},_d=function(e,r){return e.scratch("breadthfirst",r)};function rp(t){this.options=Ae({},KS,YS,t)}rp.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().filter(function(Q){return!Q.isParent()}),i=n,s=e.directed,o=e.acyclic||e.maximal||e.maximalAdjustments>0,u=er(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l;if(nr(e.roots))l=e.roots;else if(Ye(e.roots)){for(var c=[],f=0;f<e.roots.length;f++){var h=e.roots[f],v=r.getElementById(h);c.push(v)}l=r.collection(c)}else if(Be(e.roots))l=r.$(e.roots);else if(s)l=a.roots();else{var d=n.components();l=r.collection();for(var b=function(ee){var _=d[ee],g=_.maxDegree(!1),w=_.filter(function(P){return P.degree(!1)===g});l=l.add(w)},y=0;y<d.length;y++)b(y)}var m=[],E={},S=function(ee,_){m[_]==null&&(m[_]=[]);var g=m[_].length;m[_].push(ee),_d(ee,{index:g,depth:_})},B=function(ee,_){var g=Sa(ee),w=g.depth,P=g.index;m[w][P]=null,S(ee,_)};i.bfs({roots:l,directed:e.directed,visit:function(ee,_,g,w,P){var q=ee[0],j=q.id();S(q,P),E[j]=!0}});for(var C=[],O=0;O<a.length;O++){var A=a[O];E[A.id()]||C.push(A)}var D=function(ee){for(var _=m[ee],g=0;g<_.length;g++){var w=_[g];if(w==null){_.splice(g,1),g--;continue}_d(w,{depth:ee,index:g})}},F=function(){for(var ee=0;ee<m.length;ee++)D(ee)},U=function(ee,_){for(var g=Sa(ee),w=ee.incomers().filter(function(L){return L.isNode()&&n.has(L)}),P=-1,q=ee.id(),j=0;j<w.length;j++){var oe=w[j],ge=Sa(oe);P=Math.max(P,ge.depth)}if(g.depth<=P){if(!e.acyclic&&_[q])return null;var ve=P+1;return B(ee,ve),_[q]=ve,!0}return!1};if(s&&o){var W=[],H={},R=function(ee){return W.push(ee)},I=function(){return W.shift()};for(a.forEach(function(Q){return W.push(Q)});W.length>0;){var G=I(),V=U(G,H);if(V)G.outgoers().filter(function(Q){return Q.isNode()&&n.has(Q)}).forEach(R);else if(V===null){Ve("Detected double maximal shift for node `"+G.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}F();var $=0;if(e.avoidOverlap)for(var X=0;X<a.length;X++){var ae=a[X],ce=ae.layoutDimensions(e),re=ce.w,Z=ce.h;$=Math.max($,re,Z)}var le={},N=function(ee){if(le[ee.id()])return le[ee.id()];for(var _=Sa(ee).depth,g=ee.neighborhood(),w=0,P=0,q=0;q<g.length;q++){var j=g[q];if(!(j.isEdge()||j.isParent()||!a.has(j))){var oe=Sa(j);if(oe!=null){var ge=oe.index,ve=oe.depth;if(!(ge==null||ve==null)){var L=m[ve].length;ve<_&&(w+=ge/L,P++)}}}}return P=Math.max(1,P),w=w/P,P===0&&(w=0),le[ee.id()]=w,w},fe=function(ee,_){var g=N(ee),w=N(_),P=g-w;return P===0?r0(ee.id(),_.id()):P};e.depthSort!==void 0&&(fe=e.depthSort);for(var he=0;he<m.length;he++)m[he].sort(fe),D(he);for(var pe=[],ie=0;ie<C.length;ie++)pe.push(C[ie]);m.unshift(pe),F();for(var J=0,k=0;k<m.length;k++)J=Math.max(m[k].length,J);var M={x:u.x1+u.w/2,y:u.x1+u.h/2},K=m.reduce(function(Q,ee){return Math.max(Q,ee.length)},0),te=function(ee){var _=Sa(ee),g=_.depth,w=_.index,P=m[g].length,q=Math.max(u.w/((e.grid?K:P)+1),$),j=Math.max(u.h/(m.length+1),$),oe=Math.min(u.w/2/m.length,u.h/2/m.length);if(oe=Math.max(oe,$),e.circle){var ve=oe*g+oe-(m.length>0&&m[0].length<=3?oe/2:0),L=2*Math.PI/m[g].length*w;return g===0&&m[0].length===1&&(ve=1),{x:M.x+ve*Math.cos(L),y:M.y+ve*Math.sin(L)}}else{var ge={x:M.x+(w+1-(P+1)/2)*q,y:(g+1)*j};return ge}};return n.nodes().layoutPositions(this,e,te),this};var ZS={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function np(t){this.options=Ae({},ZS,t)}np.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var s=er(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,l=u/Math.max(1,i.length-1),c,f=0,h=0;h<i.length;h++){var v=i[h],d=v.layoutDimensions(e),b=d.w,y=d.h;f=Math.max(f,b,y)}if(Ee(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(s.h,s.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var m=Math.cos(l)-Math.cos(0),E=Math.sin(l)-Math.sin(0),S=Math.sqrt(f*f/(m*m+E*E));c=Math.max(S,c)}var B=function(O,A){var D=e.startAngle+A*l*(a?1:-1),F=c*Math.cos(D),U=c*Math.sin(D),W={x:o.x+F,y:o.y+U};return W};return n.nodes().layoutPositions(this,e,B),this};var XS={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function ap(t){this.options=Ae({},XS,t)}ap.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),s=er(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],l=0,c=0;c<i.length;c++){var f=i[c],h=void 0;h=e.concentric(f),u.push({value:h,node:f}),f._private.scratch.concentric=h}i.updateStyle();for(var v=0;v<i.length;v++){var d=i[v],b=d.layoutDimensions(e);l=Math.max(l,b.w,b.h)}u.sort(function(Q,ee){return ee.value-Q.value});for(var y=e.levelWidth(i),m=[[]],E=m[0],S=0;S<u.length;S++){var B=u[S];if(E.length>0){var C=Math.abs(E[0].value-B.value);C>=y&&(E=[],m.push(E))}E.push(B)}var O=l+e.minNodeSpacing;if(!e.avoidOverlap){var A=m.length>0&&m[0].length>1,D=Math.min(s.w,s.h)/2-O,F=D/(m.length+A?1:0);O=Math.min(O,F)}for(var U=0,W=0;W<m.length;W++){var H=m[W],R=e.sweep===void 0?2*Math.PI-2*Math.PI/H.length:e.sweep,I=H.dTheta=R/Math.max(1,H.length-1);if(H.length>1&&e.avoidOverlap){var G=Math.cos(I)-Math.cos(0),V=Math.sin(I)-Math.sin(0),$=Math.sqrt(O*O/(G*G+V*V));U=Math.max($,U)}H.r=U,U+=O}if(e.equidistant){for(var X=0,ae=0,ce=0;ce<m.length;ce++){var re=m[ce],Z=re.r-ae;X=Math.max(X,Z)}ae=0;for(var le=0;le<m.length;le++){var N=m[le];le===0&&(ae=N.r),N.r=ae,ae+=X}}for(var fe={},he=0;he<m.length;he++)for(var pe=m[he],ie=pe.dTheta,J=pe.r,k=0;k<pe.length;k++){var M=pe[k],K=e.startAngle+(r?1:-1)*ie*k,te={x:o.x+J*Math.cos(K),y:o.y+J*Math.sin(K)};fe[M.node.id()]=te}return a.nodes().layoutPositions(this,e,function(Q){var ee=Q.id();return fe[ee]}),this};var Xu,QS={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function hu(t){this.options=Ae({},QS,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),s=a.target().data("id"),o=e.some(function(l){return l.data("id")===i}),u=e.some(function(l){return l.data("id")===s});return!o||!u});this.options.eles=this.options.eles.not(n)}hu.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Xu=!0:Xu=!1;var n=jS(e,r,t);Xu&&tT(n),t.randomize&&rT(n);var a=nn(),i=function(){nT(n,e,t),t.fit===!0&&e.fit(t.padding)},s=function(h){return!(r.stopped||h>=t.numIter||(aT(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},o=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var h=t.eles.nodes(),v=ip(n,t,h);h.layoutPositions(r,t,v)}},u=0,l=!0;if(t.animate===!0){var c=function f(){for(var h=0;l&&h<t.refresh;)l=s(u),u++,h++;if(!l)Ad(n,t),o();else{var v=nn();v-a>=t.animationThreshold&&i(),Io(f)}};c()}else{for(;l;)l=s(u),u++;Ad(n,t),o()}return this};hu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};hu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var jS=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),s=er(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],h=0;h<f.length;h++){var v=f[h];l[v.id()]=c}for(var c=0;c<o.nodeSize;c++){var d=i[c],b=d.layoutDimensions(n),y={};y.isLocked=d.locked(),y.id=d.data("id"),y.parentId=d.data("parent"),y.cmptId=l[d.id()],y.children=[],y.positionX=d.position("x"),y.positionY=d.position("y"),y.offsetX=0,y.offsetY=0,y.height=b.w,y.width=b.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(d.style("padding")),y.padRight=parseFloat(d.style("padding")),y.padTop=parseFloat(d.style("padding")),y.padBottom=parseFloat(d.style("padding")),y.nodeRepulsion=nt(n.nodeRepulsion)?n.nodeRepulsion(d):n.nodeRepulsion,o.layoutNodes.push(y),o.idToIndex[y.id]=c}for(var m=[],E=0,S=-1,B=[],c=0;c<o.nodeSize;c++){var d=o.layoutNodes[c],C=d.parentId;C!=null?o.layoutNodes[o.idToIndex[C]].children.push(d.id):(m[++S]=d.id,B.push(d.id))}for(o.graphSet.push(B);E<=S;){var O=m[E++],A=o.idToIndex[O],v=o.layoutNodes[A],D=v.children;if(D.length>0){o.graphSet.push(D);for(var c=0;c<D.length;c++)m[++S]=D[c]}}for(var c=0;c<o.graphSet.length;c++)for(var F=o.graphSet[c],h=0;h<F.length;h++){var U=o.idToIndex[F[h]];o.indexToGraph[U]=c}for(var c=0;c<o.edgeSize;c++){var W=a[c],H={};H.id=W.data("id"),H.sourceId=W.data("source"),H.targetId=W.data("target");var R=nt(n.idealEdgeLength)?n.idealEdgeLength(W):n.idealEdgeLength,I=nt(n.edgeElasticity)?n.edgeElasticity(W):n.edgeElasticity,G=o.idToIndex[H.sourceId],V=o.idToIndex[H.targetId],$=o.indexToGraph[G],X=o.indexToGraph[V];if($!=X){for(var ae=JS(H.sourceId,H.targetId,o),ce=o.graphSet[ae],re=0,y=o.layoutNodes[G];ce.indexOf(y.id)===-1;)y=o.layoutNodes[o.idToIndex[y.parentId]],re++;for(y=o.layoutNodes[V];ce.indexOf(y.id)===-1;)y=o.layoutNodes[o.idToIndex[y.parentId]],re++;R*=re*n.nestingFactor}H.idealLength=R,H.elasticity=I,o.layoutEdges.push(H)}return o},JS=function(e,r,n){var a=eT(e,r,0,n);return 2>a.count?0:a.graph},eT=function t(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var s=0,o=0;o<i.length;o++){var u=i[o],l=a.idToIndex[u],c=a.layoutNodes[l].children;if(c.length!==0){var f=a.indexToGraph[a.idToIndex[c[0]]],h=t(e,r,f,a);if(h.count!==0)if(h.count===1){if(s++,s===2)break}else return h}}return{count:s,graph:n}},tT,rT=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var s=e.layoutNodes[i];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*a)}},ip=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(s){var o=e.layoutNodes[e.idToIndex[s.data("id")]];i.x1=Math.min(i.x1,o.positionX),i.x2=Math.max(i.x2,o.positionX),i.y1=Math.min(i.y1,o.positionY),i.y2=Math.max(i.y2,o.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(s,o){var u=e.layoutNodes[e.idToIndex[s.data("id")]];if(r.boundingBox){var l=(u.positionX-i.x1)/i.w,c=(u.positionY-i.y1)/i.h;return{x:a.x1+l*a.w,y:a.y1+c*a.h}}else return{x:u.positionX,y:u.positionY}}},nT=function(e,r,n){var a=n.layout,i=n.eles.nodes(),s=ip(e,n,i);i.positions(s),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},aT=function(e,r,n){iT(e,r),uT(e),lT(e,r),cT(e),fT(e)},iT=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,s=0;s<i;s++)for(var o=e.layoutNodes[e.idToIndex[a[s]]],u=s+1;u<i;u++){var l=e.layoutNodes[e.idToIndex[a[u]]];sT(o,l,e,r)}},Bd=function(e){return-e+2*e*Math.random()},sT=function(e,r,n,a){var i=e.cmptId,s=r.cmptId;if(!(i!==s&&!n.isCompound)){var o=r.positionX-e.positionX,u=r.positionY-e.positionY,l=1;o===0&&u===0&&(o=Bd(l),u=Bd(l));var c=oT(e,r,o,u);if(c>0)var f=a.nodeOverlap*c,h=Math.sqrt(o*o+u*u),v=f*o/h,d=f*u/h;else var b=Fo(e,o,u),y=Fo(r,-1*o,-1*u),m=y.x-b.x,E=y.y-b.y,S=m*m+E*E,h=Math.sqrt(S),f=(e.nodeRepulsion+r.nodeRepulsion)/S,v=f*m/h,d=f*E/h;e.isLocked||(e.offsetX-=v,e.offsetY-=d),r.isLocked||(r.offsetX+=v,r.offsetY+=d)}},oT=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var s=e.maxY-r.minY;else var s=r.maxY-e.minY;return i>=0&&s>=0?Math.sqrt(i*i+s*s):0},Fo=function(e,r,n){var a=e.positionX,i=e.positionY,s=e.height||1,o=e.width||1,u=n/r,l=s/o,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+s/2,c):0<r&&-1*l<=u&&u<=l?(c.x=a+o/2,c.y=i+o*n/2/r,c):0>r&&-1*l<=u&&u<=l?(c.x=a-o/2,c.y=i-o*n/2/r,c):0<n&&(u<=-1*l||u>=l)?(c.x=a+s*r/2/n,c.y=i+s/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=a-s*r/2/n,c.y=i-s/2),c)},uT=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],s=e.layoutNodes[i],o=e.idToIndex[a.targetId],u=e.layoutNodes[o],l=u.positionX-s.positionX,c=u.positionY-s.positionY;if(!(l===0&&c===0)){var f=Fo(s,l,c),h=Fo(u,-1*l,-1*c),v=h.x-f.x,d=h.y-f.y,b=Math.sqrt(v*v+d*d),y=Math.pow(a.idealLength-b,2)/a.elasticity;if(b!==0)var m=y*v/b,E=y*d/b;else var m=0,E=0;s.isLocked||(s.offsetX+=m,s.offsetY+=E),u.isLocked||(u.offsetX-=m,u.offsetY-=E)}}},lT=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],s=i.length;if(a===0)var o=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],o=c.positionX,u=c.positionY;for(var f=0;f<s;f++){var h=e.layoutNodes[e.idToIndex[i[f]]];if(!h.isLocked){var v=o-h.positionX,d=u-h.positionY,b=Math.sqrt(v*v+d*d);if(b>n){var y=r.gravity*v/b,m=r.gravity*d/b;h.offsetX+=y,h.offsetY+=m}}}}},cT=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var s=n[a++],o=e.idToIndex[s],u=e.layoutNodes[o],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,h=0;h<l.length;h++){var v=e.layoutNodes[e.idToIndex[l[h]]];v.offsetX+=c,v.offsetY+=f,n[++i]=l[h]}u.offsetX=0,u.offsetY=0}}},fT=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=dT(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,hT(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},dT=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},hT=function t(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return t(a,r)}},Ad=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var s=n[i],o=s.cmptId,u=a[o]=a[o]||[];u.push(s)}for(var l=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var h=c[f];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}a.sort(function(E,S){return S.w*S.h-E.w*E.h});for(var v=0,d=0,b=0,y=0,m=Math.sqrt(l)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var f=0;f<c.length;f++){var h=c[f];h.isLocked||(h.positionX+=v-c.x1,h.positionY+=d-c.y1)}v+=c.w+r.componentSpacing,b+=c.w+r.componentSpacing,y=Math.max(y,c.h),b>m&&(d+=y+r.componentSpacing,v=0,b=0,y=0)}}},vT={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function sp(t){this.options=Ae({},vT,t)}sp.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=er(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(le){return{x:i.x1,y:i.y1}});else{var s=a.size(),o=Math.sqrt(s*i.h/i.w),u=Math.round(o),l=Math.round(i.w/i.h*o),c=function(N){if(N==null)return Math.min(u,l);var fe=Math.min(u,l);fe==u?u=N:l=N},f=function(N){if(N==null)return Math.max(u,l);var fe=Math.max(u,l);fe==u?u=N:l=N},h=e.rows,v=e.cols!=null?e.cols:e.columns;if(h!=null&&v!=null)u=h,l=v;else if(h!=null&&v==null)u=h,l=Math.ceil(s/u);else if(h==null&&v!=null)l=v,u=Math.ceil(s/l);else if(l*u>s){var d=c(),b=f();(d-1)*b>=s?c(d-1):(b-1)*d>=s&&f(b-1)}else for(;l*u<s;){var y=c(),m=f();(m+1)*y>=s?f(m+1):c(y+1)}var E=i.w/l,S=i.h/u;if(e.condense&&(E=0,S=0),e.avoidOverlap)for(var B=0;B<a.length;B++){var C=a[B],O=C._private.position;(O.x==null||O.y==null)&&(O.x=0,O.y=0);var A=C.layoutDimensions(e),D=e.avoidOverlapPadding,F=A.w+D,U=A.h+D;E=Math.max(E,F),S=Math.max(S,U)}for(var W={},H=function(N,fe){return!!W["c-"+N+"-"+fe]},R=function(N,fe){W["c-"+N+"-"+fe]=!0},I=0,G=0,V=function(){G++,G>=l&&(G=0,I++)},$={},X=0;X<a.length;X++){var ae=a[X],ce=e.position(ae);if(ce&&(ce.row!==void 0||ce.col!==void 0)){var re={row:ce.row,col:ce.col};if(re.col===void 0)for(re.col=0;H(re.row,re.col);)re.col++;else if(re.row===void 0)for(re.row=0;H(re.row,re.col);)re.row++;$[ae.id()]=re,R(re.row,re.col)}}var Z=function(N,fe){var he,pe;if(N.locked()||N.isParent())return!1;var ie=$[N.id()];if(ie)he=ie.col*E+E/2+i.x1,pe=ie.row*S+S/2+i.y1;else{for(;H(I,G);)V();he=G*E+E/2+i.x1,pe=I*S+S/2+i.y1,R(I,G),V()}return{x:he,y:pe}};a.layoutPositions(this,e,Z)}return this};var pT={ready:function(){},stop:function(){}};function Ac(t){this.options=Ae({},pT,t)}Ac.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};Ac.prototype.stop=function(){return this};var gT={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function op(t){this.options=Ae({},gT,t)}op.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=nt(t.positions);function a(i){if(t.positions==null)return ww(i.position());if(n)return t.positions(i);var s=t.positions[i._private.data.id];return s??null}return r.layoutPositions(this,t,function(i,s){var o=a(i);return i.locked()||o==null?!1:o}),this};var yT={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function up(t){this.options=Ae({},yT,t)}up.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=er(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(s,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var mT=[{name:"breadthfirst",impl:rp},{name:"circle",impl:np},{name:"concentric",impl:ap},{name:"cose",impl:hu},{name:"grid",impl:sp},{name:"null",impl:Ac},{name:"preset",impl:op},{name:"random",impl:up}];function lp(t){this.options=t,this.notifications=0}var Cd=function(){},Id=function(){throw new Error("A headless instance can not render images")};lp.prototype={recalculateRenderedStyle:Cd,notify:function(){this.notifications++},init:Cd,isHeadless:function(){return!0},png:Id,jpg:Id};var Cc={};Cc.arrowShapeWidth=.3;Cc.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(l,c,f,h,v,d,b){var y=v.x-f/2-b,m=v.x+f/2+b,E=v.y-f/2-b,S=v.y+f/2+b,B=y<=l&&l<=m&&E<=c&&c<=S;return B},n=function(l,c,f,h,v){var d=l*Math.cos(h)-c*Math.sin(h),b=l*Math.sin(h)+c*Math.cos(h),y=d*f,m=b*f,E=y+v.x,S=m+v.y;return{x:E,y:S}},a=function(l,c,f,h){for(var v=[],d=0;d<l.length;d+=2){var b=l[d],y=l[d+1];v.push(n(b,y,c,f,h))}return v},i=function(l){for(var c=[],f=0;f<l.length;f++){var h=l[f];c.push(h.x,h.y)}return c},s=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},o=function(l,c){Be(c)&&(c=t[c]),t[l]=Ae({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,v,d,b,y,m){var E=i(a(this.points,d+2*m,b,y)),S=jt(h,v,E);return S},roughCollide:r,draw:function(h,v,d,b){var y=a(this.points,v,d,b);e.arrowShapeImpl("polygon")(h,y)},spacing:function(h){return 0},gap:s},c)};o("none",{collide:No,roughCollide:No,draw:hc,spacing:Lf,gap:Lf}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(l,c,f,h,v){var d=a(this.points,c,f,h),b=this.controlPoint,y=n(b[0],b[1],c,f,h);e.arrowShapeImpl(this.name)(l,d,y)},gap:function(l){return s(l)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,h,v,d,b){var y=i(a(this.points,f+2*b,h,v)),m=i(a(this.pointsTee,f+2*b,h,v)),E=jt(l,c,y)||jt(l,c,m);return E},draw:function(l,c,f,h,v){var d=a(this.points,c,f,h),b=a(this.pointsTee,c,f,h);e.arrowShapeImpl(this.name)(l,d,b)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,h,v,d,b){var y=v,m=Math.pow(y.x-l,2)+Math.pow(y.y-c,2)<=Math.pow((f+2*b)*this.radius,2),E=i(a(this.points,f+2*b,h,v));return jt(l,c,E)||m},draw:function(l,c,f,h,v){var d=a(this.pointsTr,c,f,h);e.arrowShapeImpl(this.name)(l,d,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),h=c/l,v=3,d=5;return f[v]=f[v]-h,f[d]=f[d]-h,f},collide:function(l,c,f,h,v,d,b){var y=i(a(this.points,f+2*b,h,v)),m=i(a(this.crossLinePts(f,d),f+2*b,h,v)),E=jt(l,c,y)||jt(l,c,m);return E},draw:function(l,c,f,h,v){var d=a(this.points,c,f,h),b=a(this.crossLinePts(c,v),c,f,h);e.arrowShapeImpl(this.name)(l,d,b)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return s(l)*.525}}),o("circle",{radius:.15,collide:function(l,c,f,h,v,d,b){var y=v,m=Math.pow(y.x-l,2)+Math.pow(y.y-c,2)<=Math.pow((f+2*b)*this.radius,2);return m},draw:function(l,c,f,h,v){e.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var ha={};ha.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],s=n[4],o=r.pan(),u=r.zoom(),l=((t-a)/s-o.x)/u,c=((e-i)/s-o.y)/u;return[l,c]};ha.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(m){return parseFloat(r.getPropertyValue(m))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=t.clientWidth,o=t.clientHeight,u=a.left+a.right,l=a.top+a.bottom,c=i.left+i.right,f=e.width/(s+c),h=s-u,v=o-l,d=e.left+a.left+i.left,b=e.top+a.top+i.top;return this.containerBB=[d,b,h,v,f]};ha.invalidateContainerClientCoordsCache=function(){this.containerBB=null};ha.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};ha.findNearestElements=function(t,e,r,n){var a=this,i=this,s=i.getCachedZSortedEles(),o=[],u=i.cy.zoom(),l=i.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,h=(n?8:2)/u,v=1/0,d,b;r&&(s=s.interactive);function y(A,D){if(A.isNode()){if(b)return;b=A,o.push(A)}if(A.isEdge()&&(D==null||D<v))if(d){if(d.pstyle("z-compound-depth").value===A.pstyle("z-compound-depth").value&&d.pstyle("z-compound-depth").value===A.pstyle("z-compound-depth").value){for(var F=0;F<o.length;F++)if(o[F].isEdge()){o[F]=A,d=A,v=D??v;break}}}else o.push(A),d=A,v=D??v}function m(A){var D=A.outerWidth()+2*f,F=A.outerHeight()+2*f,U=D/2,W=F/2,H=A.position(),R=A.pstyle("corner-radius").value==="auto"?"auto":A.pstyle("corner-radius").pfValue,I=A._private.rscratch;if(H.x-U<=t&&t<=H.x+U&&H.y-W<=e&&e<=H.y+W){var G=i.nodeShapes[a.getNodeShape(A)];if(G.checkPoint(t,e,0,D,F,H.x,H.y,R,I))return y(A,0),!0}}function E(A){var D=A._private,F=D.rscratch,U=A.pstyle("width").pfValue,W=A.pstyle("arrow-scale").value,H=U/2+c,R=H*H,I=H*2,X=D.source,ae=D.target,G;if(F.edgeType==="segments"||F.edgeType==="straight"||F.edgeType==="haystack"){for(var V=F.allpts,$=0;$+3<V.length;$+=2)if(Pw(t,e,V[$],V[$+1],V[$+2],V[$+3],I)&&R>(G=Uw(t,e,V[$],V[$+1],V[$+2],V[$+3])))return y(A,G),!0}else if(F.edgeType==="bezier"||F.edgeType==="multibezier"||F.edgeType==="self"||F.edgeType==="compound"){for(var V=F.allpts,$=0;$+5<F.allpts.length;$+=4)if(Ow(t,e,V[$],V[$+1],V[$+2],V[$+3],V[$+4],V[$+5],I)&&R>(G=Dw(t,e,V[$],V[$+1],V[$+2],V[$+3],V[$+4],V[$+5])))return y(A,G),!0}for(var X=X||D.source,ae=ae||D.target,ce=a.getArrowWidth(U,W),re=[{name:"source",x:F.arrowStartX,y:F.arrowStartY,angle:F.srcArrowAngle},{name:"target",x:F.arrowEndX,y:F.arrowEndY,angle:F.tgtArrowAngle},{name:"mid-source",x:F.midX,y:F.midY,angle:F.midsrcArrowAngle},{name:"mid-target",x:F.midX,y:F.midY,angle:F.midtgtArrowAngle}],$=0;$<re.length;$++){var Z=re[$],le=i.arrowShapes[A.pstyle(Z.name+"-arrow-shape").value],N=A.pstyle("width").pfValue;if(le.roughCollide(t,e,ce,Z.angle,{x:Z.x,y:Z.y},N,c)&&le.collide(t,e,ce,Z.angle,{x:Z.x,y:Z.y},N,c))return y(A),!0}l&&o.length>0&&(m(X),m(ae))}function S(A,D,F){return Tr(A,D,F)}function B(A,D){var F=A._private,U=h,W;D?W=D+"-":W="",A.boundingBox();var H=F.labelBounds[D||"main"],R=A.pstyle(W+"label").value,I=A.pstyle("text-events").strValue==="yes";if(!(!I||!R)){var G=S(F.rscratch,"labelX",D),V=S(F.rscratch,"labelY",D),$=S(F.rscratch,"labelAngle",D),X=A.pstyle(W+"text-margin-x").pfValue,ae=A.pstyle(W+"text-margin-y").pfValue,ce=H.x1-U-X,re=H.x2+U-X,Z=H.y1-U-ae,le=H.y2+U-ae;if($){var N=Math.cos($),fe=Math.sin($),he=function(te,Q){return te=te-G,Q=Q-V,{x:te*N-Q*fe+G,y:te*fe+Q*N+V}},pe=he(ce,Z),ie=he(ce,le),J=he(re,Z),k=he(re,le),M=[pe.x+X,pe.y+ae,J.x+X,J.y+ae,k.x+X,k.y+ae,ie.x+X,ie.y+ae];if(jt(t,e,M))return y(A),!0}else if(Wa(H,t,e))return y(A),!0}}for(var C=s.length-1;C>=0;C--){var O=s[C];O.isNode()?m(O)||B(O):E(O)||B(O)||B(O,"source")||B(O,"target")}return o};ha.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=[],s=Math.min(t,r),o=Math.max(t,r),u=Math.min(e,n),l=Math.max(e,n);t=s,r=o,e=u,n=l;for(var c=er({x1:t,y1:e,x2:r,y2:n}),f=0;f<a.length;f++){var h=a[f];if(h.isNode()){var v=h,d=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});gc(c,d)&&!m0(d,c)&&i.push(v)}else{var b=h,y=b._private,m=y.rscratch;if(m.startX!=null&&m.startY!=null&&!Wa(c,m.startX,m.startY)||m.endX!=null&&m.endY!=null&&!Wa(c,m.endX,m.endY))continue;if(m.edgeType==="bezier"||m.edgeType==="multibezier"||m.edgeType==="self"||m.edgeType==="compound"||m.edgeType==="segments"||m.edgeType==="haystack"){for(var E=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,S=!0,B=0;B<E.length;B++)if(!kw(c,E[B])){S=!1;break}S&&i.push(b)}else(m.edgeType==="haystack"||m.edgeType==="straight")&&i.push(b)}}return i};var Do={};Do.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",s=e.edgeType==="compound",o=e.edgeType==="self",u,l,c,f,h,v,m,E;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],h=e.haystackPts[2],v=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,h=e.arrowEndX,v=e.arrowEndY),m=e.midX,E=e.midY,i)u=c-e.segpts[0],l=f-e.segpts[1];else if(a||s||o||n){var d=e.allpts,b=St(d[0],d[2],d[4],.1),y=St(d[1],d[3],d[5],.1);u=c-b,l=f-y}else u=c-m,l=f-E;e.srcArrowAngle=Cs(u,l);var m=e.midX,E=e.midY;if(r&&(m=(c+h)/2,E=(f+v)/2),u=h-c,l=v-f,i){var d=e.allpts;if(d.length/2%2===0){var S=d.length/2,B=S-2;u=d[S]-d[B],l=d[S+1]-d[B+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var S=d.length/2-1,B=S-2;u=d[S]-d[B],l=d[S+1]-d[B+1]}}else if(a||s||o){var d=e.allpts,C=e.ctrlpts,O,A,D,F;if(C.length/2%2===0){var U=d.length/2-1,W=U+2,H=W+2;O=St(d[U],d[W],d[H],0),A=St(d[U+1],d[W+1],d[H+1],0),D=St(d[U],d[W],d[H],1e-4),F=St(d[U+1],d[W+1],d[H+1],1e-4)}else{var W=d.length/2-1,U=W-2,H=W+2;O=St(d[U],d[W],d[H],.4999),A=St(d[U+1],d[W+1],d[H+1],.4999),D=St(d[U],d[W],d[H],.5),F=St(d[U+1],d[W+1],d[H+1],.5)}u=D-O,l=F-A}if(e.midtgtArrowAngle=Cs(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,i){var d=e.allpts;if(d.length/2%2!==0){if(!e.isRound){var S=d.length/2-1,R=S+2;u=-(d[R]-d[S]),l=-(d[R+1]-d[S+1])}}}if(e.midsrcArrowAngle=Cs(u,l),i)u=h-e.segpts[e.segpts.length-2],l=v-e.segpts[e.segpts.length-1];else if(a||s||o||n){var d=e.allpts,I=d.length,b=St(d[I-6],d[I-4],d[I-2],.9),y=St(d[I-5],d[I-3],d[I-1],.9);u=h-b,l=v-y}else u=h-m,l=v-E;e.tgtArrowAngle=Cs(u,l)};Do.getArrowWidth=Do.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var Dl,Ul,Fr={},lr={},Nd,Rd,Zn,po,Xr,zn,Wn,Or,Ta,Ds,cp,fp,Ll,$l,kd,Pd=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},bT=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},wT=function(e,r,n,a,i){if(e!==kd?Pd(r,e,Fr):bT(lr,Fr),Pd(r,n,lr),Nd=Fr.nx*lr.ny-Fr.ny*lr.nx,Rd=Fr.nx*lr.nx-Fr.ny*-lr.ny,Xr=Math.asin(Math.max(-1,Math.min(1,Nd))),Math.abs(Xr)<1e-6){Dl=r.x,Ul=r.y,Wn=Ta=0;return}Zn=1,po=!1,Rd<0?Xr<0?Xr=Math.PI+Xr:(Xr=Math.PI-Xr,Zn=-1,po=!0):Xr>0&&(Zn=-1,po=!0),r.radius!==void 0?Ta=r.radius:Ta=a,zn=Xr/2,Ds=Math.min(Fr.len/2,lr.len/2),i?(Or=Math.abs(Math.cos(zn)*Ta/Math.sin(zn)),Or>Ds?(Or=Ds,Wn=Math.abs(Or*Math.sin(zn)/Math.cos(zn))):Wn=Ta):(Or=Math.min(Ds,Ta),Wn=Math.abs(Or*Math.sin(zn)/Math.cos(zn))),Ll=r.x+lr.nx*Or,$l=r.y+lr.ny*Or,Dl=Ll-lr.ny*Wn*Zn,Ul=$l+lr.nx*Wn*Zn,cp=r.x+Fr.nx*Or,fp=r.y+Fr.ny*Or,kd=r};function dp(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function Ic(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(wT(t,e,r,n,a),{cx:Dl,cy:Ul,radius:Wn,startX:cp,startY:fp,stopX:Ll,stopY:$l,startAngle:Fr.ang+Math.PI/2*Zn,endAngle:lr.ang-Math.PI/2*Zn,counterClockwise:po})}var Gt={};Gt.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,s=t.pstyle("source-endpoint"),o=t.pstyle("target-endpoint"),u=s.units!=null&&o.units!=null,l=function(C,O,A,D){var F=D-O,U=A-C,W=Math.sqrt(U*U+F*F);return{x:-F/W,y:U/W}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(t.source()[0],s),h=xr(f,2),v=h[0],d=h[1],b=this.manualEndptToPx(t.target()[0],o),y=xr(b,2),m=y[0],E=y[1],S={x1:v,y1:d,x2:m,y2:E};a=l(v,d,m,E),i=S}else Ve("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Gt.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var s=n.source,o=n.target,u=s.position(),l=o.position(),c=s.width(),f=o.width(),h=s.height(),v=o.height(),d=r.pstyle("haystack-radius").value,b=d/2;a.haystackPts=a.allpts=[a.source.x*c*b+u.x,a.source.y*h*b+u.y,a.target.x*f*b+l.x,a.target.y*v*b+l.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Gt.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),s=t.pstyle("radius-type"),o=Math.min(n.pfValue.length,a.pfValue.length),u=i.pfValue[i.pfValue.length-1],l=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<o;c++){var f=n.pfValue[c],h=a.pfValue[c],v=1-f,d=f,b=this.findMidptPtsEtc(t,e),y=b.midptPts,m=b.vectorNormInverse,E={x:y.x1*v+y.x2*d,y:y.y1*v+y.y2*d};r.segpts.push(E.x+m.x*h,E.y+m.y*h),r.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:u),r.isArcRadius.push((s.pfValue[c]!==void 0?s.pfValue[c]:l)==="arc-radius")}};Gt.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,s=e.srcPos,o=t.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var h=r,v=f;n&&(h=0,v=u);var d=l-Math.PI/2,b=d-c/2,y=d+c/2,m=l+"_"+c;h=i[m]===void 0?i[m]=0:++i[m],a.ctrlpts=[s.x+Math.cos(b)*1.4*v*(h/3+1),s.y+Math.sin(b)*1.4*v*(h/3+1),s.x+Math.cos(y)*1.4*v*(h/3+1),s.y+Math.sin(y)*1.4*v*(h/3+1)]};Gt.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,s=e.tgtPos,o=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),v=h?h.pfValue[0]:void 0,d=r,b=f;n&&(d=0,b=v);var y=50,m={x:i.x-o/2,y:i.y-u/2},E={x:s.x-l/2,y:s.y-c/2},S={x:Math.min(m.x,E.x),y:Math.min(m.y,E.y)},B=.5,C=Math.max(B,Math.log(o*.01)),O=Math.max(B,Math.log(l*.01));a.ctrlpts=[S.x,S.y-(1+Math.pow(y,1.12)/100)*b*(d/3+1)*C,S.x-(1+Math.pow(y,1.12)/100)*b*(d/3+1)*O,S.y]};Gt.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Gt.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,s=t.pstyle("control-point-step-size").pfValue,o=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=o&&u?Math.min(o.value.length,u.value.length):1,c=o?o.pfValue[0]:void 0,f=u.value[0],h=n;i.edgeType=h?"multibezier":"bezier",i.ctrlpts=[];for(var v=0;v<l;v++){var d=(.5-e.eles.length/2+r)*s*(a?-1:1),b=void 0,y=g0(d);h&&(c=o?o.pfValue[v]:s,f=u.value[v]),n?b=c:b=c!==void 0?y*c:void 0;var m=b!==void 0?b:d,E=1-f,S=f,B=this.findMidptPtsEtc(t,e),C=B.midptPts,O=B.vectorNormInverse,A={x:C.x1*E+C.x2*S,y:C.y1*E+C.y2*S};i.ctrlpts.push(A.x+O.x*m,A.y+O.y*m)}};Gt.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",s="rightward",o="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,h=e.srcH,v=e.tgtW,d=e.tgtH,b=t.pstyle("edge-distances").value,y=b!=="node-position",m=t.pstyle("taxi-direction").value,E=m,S=t.pstyle("taxi-turn"),B=S.units==="%",C=S.pfValue,O=C<0,A=t.pstyle("taxi-turn-min-distance").pfValue,D=y?(f+v)/2:0,F=y?(h+d)/2:0,U=c.x2-c.x1,W=c.y2-c.y1,H=function(ue,me){return ue>0?Math.max(ue-me,0):Math.min(ue+me,0)},R=H(U,D),I=H(W,F),G=!1;E===l?m=Math.abs(R)>Math.abs(I)?a:n:E===u||E===o?(m=n,G=!0):(E===i||E===s)&&(m=a,G=!0);var V=m===n,$=V?I:R,X=V?W:U,ae=g0(X),ce=!1;!(G&&(B||O))&&(E===o&&X<0||E===u&&X>0||E===i&&X>0||E===s&&X<0)&&(ae*=-1,$=ae*Math.abs($),ce=!0);var re;if(B){var Z=C<0?1+C:C;re=Z*$}else{var le=C<0?$:0;re=le+C*ae}var N=function(ue){return Math.abs(ue)<A||Math.abs(ue)>=Math.abs($)},fe=N(re),he=N(Math.abs($)-Math.abs(re)),pe=fe||he;if(pe&&!ce)if(V){var ie=Math.abs(X)<=h/2,J=Math.abs(U)<=v/2;if(ie){var k=(c.x1+c.x2)/2,M=c.y1,K=c.y2;r.segpts=[k,M,k,K]}else if(J){var te=(c.y1+c.y2)/2,Q=c.x1,ee=c.x2;r.segpts=[Q,te,ee,te]}else r.segpts=[c.x1,c.y2]}else{var _=Math.abs(X)<=f/2,g=Math.abs(W)<=d/2;if(_){var w=(c.y1+c.y2)/2,P=c.x1,q=c.x2;r.segpts=[P,w,q,w]}else if(g){var j=(c.x1+c.x2)/2,oe=c.y1,ge=c.y2;r.segpts=[j,oe,j,ge]}else r.segpts=[c.x2,c.y1]}else if(V){var ve=c.y1+re+(y?h/2*ae:0),L=c.x1,de=c.x2;r.segpts=[L,ve,de,ve]}else{var T=c.x1+re+(y?f/2*ae:0),p=c.y1,x=c.y2;r.segpts=[T,p,T,x]}if(r.isRound){var z=t.pstyle("taxi-radius").value,Y=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(z),r.isArcRadius=new Array(r.segpts.length/2).fill(Y)}};Gt.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,s=e.srcH,o=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,h=e.tgtCornerRadius,v=e.srcRs,d=e.tgtRs,b=!Ee(r.startX)||!Ee(r.startY),y=!Ee(r.arrowStartX)||!Ee(r.arrowStartY),m=!Ee(r.endX)||!Ee(r.endY),E=!Ee(r.arrowEndX)||!Ee(r.arrowEndY),S=3,B=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,C=S*B,O=oa({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),A=O<C,D=oa({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),F=D<C,U=!1;if(b||y||A){U=!0;var W={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},H=Math.sqrt(W.x*W.x+W.y*W.y),R={x:W.x/H,y:W.y/H},I=Math.max(i,s),G={x:r.ctrlpts[0]+R.x*2*I,y:r.ctrlpts[1]+R.y*2*I},V=l.intersectLine(n.x,n.y,i,s,G.x,G.y,0,f,v);A?(r.ctrlpts[0]=r.ctrlpts[0]+R.x*(C-O),r.ctrlpts[1]=r.ctrlpts[1]+R.y*(C-O)):(r.ctrlpts[0]=V[0]+R.x*C,r.ctrlpts[1]=V[1]+R.y*C)}if(m||E||F){U=!0;var $={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},X=Math.sqrt($.x*$.x+$.y*$.y),ae={x:$.x/X,y:$.y/X},ce=Math.max(i,s),re={x:r.ctrlpts[0]+ae.x*2*ce,y:r.ctrlpts[1]+ae.y*2*ce},Z=c.intersectLine(a.x,a.y,o,u,re.x,re.y,0,h,d);F?(r.ctrlpts[0]=r.ctrlpts[0]+ae.x*(C-D),r.ctrlpts[1]=r.ctrlpts[1]+ae.y*(C-D)):(r.ctrlpts[0]=Z[0]+ae.x*C,r.ctrlpts[1]=Z[1]+ae.y*C)}U&&this.findEndpoints(t)}};Gt.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=St(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=St(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var s=e.radii[i/2-1],o=e.isArcRadius[i/2-1];e.roundCorners.push(Ic({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:s},{x:e.allpts[i+2],y:e.allpts[i+3]},s,o))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},h=e.roundCorners[c/2],v=[f.x-h.cx,f.y-h.cy],d=h.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(b){return b*d}),e.midX=h.cx+v[0],e.midY=h.cy+v[1],e.midVector=v}}}};Gt.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||Ee(e.startX)&&Ee(e.startY)&&Ee(e.endX)&&Ee(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Ve("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Gt.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i={map:new qr,get:function(A){var D=this.map.get(A[0]);return D!=null?D.get(A[1]):null},set:function(A,D){var F=this.map.get(A[0]);F==null&&(F=new qr,this.map.set(A[0],F)),F.set(A[1],D)}},s=[],o=[],u=0;u<t.length;u++){var l=t[u],c=l._private,f=l.pstyle("curve-style").value;if(!(l.removed()||!l.takesUpSpace())){if(f==="haystack"){o.push(l);continue}var h=f==="unbundled-bezier"||f.endsWith("segments")||f==="straight"||f==="straight-triangle"||f.endsWith("taxi"),v=f==="unbundled-bezier"||f==="bezier",d=c.source,b=c.target,y=d.poolIndex(),m=b.poolIndex(),E=[y,m].sort(),S=i.get(E);S==null&&(S={eles:[]},i.set(E,S),s.push(E)),S.eles.push(l),h&&(S.hasUnbundled=!0),v&&(S.hasBezier=!0)}}for(var B=function(A){var D=s[A],F=i.get(D),U=void 0;if(!F.hasUnbundled){var W=F.eles[0].parallelEdges().filter(function(T){return T.isBundledBezier()});vc(F.eles),W.forEach(function(T){return F.eles.push(T)}),F.eles.sort(function(T,p){return T.poolIndex()-p.poolIndex()})}var H=F.eles[0],R=H.source(),I=H.target();if(R.poolIndex()>I.poolIndex()){var G=R;R=I,I=G}var V=F.srcPos=R.position(),$=F.tgtPos=I.position(),X=F.srcW=R.outerWidth(),ae=F.srcH=R.outerHeight(),ce=F.tgtW=I.outerWidth(),re=F.tgtH=I.outerHeight(),Z=F.srcShape=r.nodeShapes[e.getNodeShape(R)],le=F.tgtShape=r.nodeShapes[e.getNodeShape(I)],N=F.srcCornerRadius=R.pstyle("corner-radius").value==="auto"?"auto":R.pstyle("corner-radius").pfValue,fe=F.tgtCornerRadius=I.pstyle("corner-radius").value==="auto"?"auto":I.pstyle("corner-radius").pfValue,he=F.tgtRs=I._private.rscratch,pe=F.srcRs=R._private.rscratch;F.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var ie=0;ie<F.eles.length;ie++){var J=F.eles[ie],k=J[0]._private.rscratch,M=J.pstyle("curve-style").value,K=M==="unbundled-bezier"||M.endsWith("segments")||M.endsWith("taxi"),te=!R.same(J.source());if(!F.calculatedIntersection&&R!==I&&(F.hasBezier||F.hasUnbundled)){F.calculatedIntersection=!0;var Q=Z.intersectLine(V.x,V.y,X,ae,$.x,$.y,0,N,pe),ee=F.srcIntn=Q,_=le.intersectLine($.x,$.y,ce,re,V.x,V.y,0,fe,he),g=F.tgtIntn=_,w=F.intersectionPts={x1:Q[0],x2:_[0],y1:Q[1],y2:_[1]},P=F.posPts={x1:V.x,x2:$.x,y1:V.y,y2:$.y},q=_[1]-Q[1],j=_[0]-Q[0],oe=Math.sqrt(j*j+q*q),ge=F.vector={x:j,y:q},ve=F.vectorNorm={x:ge.x/oe,y:ge.y/oe},L={x:-ve.y,y:ve.x};F.nodesOverlap=!Ee(oe)||le.checkPoint(Q[0],Q[1],0,ce,re,$.x,$.y,fe,he)||Z.checkPoint(_[0],_[1],0,X,ae,V.x,V.y,N,pe),F.vectorNormInverse=L,U={nodesOverlap:F.nodesOverlap,dirCounts:F.dirCounts,calculatedIntersection:!0,hasBezier:F.hasBezier,hasUnbundled:F.hasUnbundled,eles:F.eles,srcPos:$,tgtPos:V,srcW:ce,srcH:re,tgtW:X,tgtH:ae,srcIntn:g,tgtIntn:ee,srcShape:le,tgtShape:Z,posPts:{x1:P.x2,y1:P.y2,x2:P.x1,y2:P.y1},intersectionPts:{x1:w.x2,y1:w.y2,x2:w.x1,y2:w.y1},vector:{x:-ge.x,y:-ge.y},vectorNorm:{x:-ve.x,y:-ve.y},vectorNormInverse:{x:-L.x,y:-L.y}}}var de=te?U:F;k.nodesOverlap=de.nodesOverlap,k.srcIntn=de.srcIntn,k.tgtIntn=de.tgtIntn,k.isRound=M.startsWith("round"),a&&(R.isParent()||R.isChild()||I.isParent()||I.isChild())&&(R.parents().anySame(I)||I.parents().anySame(R)||R.same(I)&&R.isParent())?e.findCompoundLoopPoints(J,de,ie,K):R===I?e.findLoopPoints(J,de,ie,K):M.endsWith("segments")?e.findSegmentsPoints(J,de):M.endsWith("taxi")?e.findTaxiPoints(J,de):M==="straight"||!K&&F.eles.length%2===1&&ie===Math.floor(F.eles.length/2)?e.findStraightEdgePoints(J):e.findBezierPoints(J,de,ie,K,te),e.findEndpoints(J),e.tryToCorrectInvalidPoints(J,de),e.checkForInvalidEdgeWarning(J),e.storeAllpts(J),e.storeEdgeProjections(J),e.calculateArrowAngles(J),e.recalculateEdgeLabelProjections(J),e.calculateLabelAngles(J)}},C=0;C<s.length;C++)B(C);this.findHaystackPoints(o)}};function hp(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}Gt.getSegmentPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="segments")return this.recalculateRenderedStyle(t),hp(e.segpts)};Gt.getControlPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return this.recalculateRenderedStyle(t),hp(e.ctrlpts)};Gt.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var ls={};ls.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),s=t._private.rscratch;if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(a,i),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,s)}};ls.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],i=n.position(),s=a.position(),o=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,l=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,f=n._private.rscratch,h=a._private.rscratch,v=t.pstyle("curve-style").value,d=t._private.rscratch,b=d.edgeType,y=v==="taxi",m=b==="self"||b==="compound",E=b==="bezier"||b==="multibezier"||m,S=b!=="bezier",B=b==="straight"||b==="segments",C=b==="segments",O=E||S||B,A=m||y,D=t.pstyle("source-endpoint"),F=A?"outside-to-node":D.value,U=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,W=t.pstyle("target-endpoint"),H=A?"outside-to-node":W.value,R=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;d.srcManEndpt=D,d.tgtManEndpt=W;var I,G,V,$;if(E){var X=[d.ctrlpts[0],d.ctrlpts[1]],ae=S?[d.ctrlpts[d.ctrlpts.length-2],d.ctrlpts[d.ctrlpts.length-1]]:X;I=ae,G=X}else if(B){var ce=C?d.segpts.slice(0,2):[s.x,s.y],re=C?d.segpts.slice(d.segpts.length-2):[i.x,i.y];I=re,G=ce}if(H==="inside-to-node")r=[s.x,s.y];else if(W.units)r=this.manualEndptToPx(a,W);else if(H==="outside-to-line")r=d.tgtIntn;else if(H==="outside-to-node"||H==="outside-to-node-or-label"?V=I:(H==="outside-to-line"||H==="outside-to-line-or-label")&&(V=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(s.x,s.y,a.outerWidth(),a.outerHeight(),V[0],V[1],0,R,h),H==="outside-to-node-or-label"||H==="outside-to-line-or-label"){var Z=a._private.rscratch,le=Z.labelWidth,N=Z.labelHeight,fe=Z.labelX,he=Z.labelY,pe=le/2,ie=N/2,J=a.pstyle("text-valign").value;J==="top"?he-=ie:J==="bottom"&&(he+=ie);var k=a.pstyle("text-halign").value;k==="left"?fe-=pe:k==="right"&&(fe+=pe);var M=zi(V[0],V[1],[fe-pe,he-ie,fe+pe,he-ie,fe+pe,he+ie,fe-pe,he+ie],s.x,s.y);if(M.length>0){var K=i,te=Gn(K,ka(r)),Q=Gn(K,ka(M)),ee=te;if(Q<te&&(r=M,ee=Q),M.length>2){var _=Gn(K,{x:M[2],y:M[3]});_<ee&&(r=[M[2],M[3]])}}}var g=Is(r,I,e.arrowShapes[o].spacing(t)+l),w=Is(r,I,e.arrowShapes[o].gap(t)+l);if(d.endX=w[0],d.endY=w[1],d.arrowEndX=g[0],d.arrowEndY=g[1],F==="inside-to-node")r=[i.x,i.y];else if(D.units)r=this.manualEndptToPx(n,D);else if(F==="outside-to-line")r=d.srcIntn;else if(F==="outside-to-node"||F==="outside-to-node-or-label"?$=G:(F==="outside-to-line"||F==="outside-to-line-or-label")&&($=[s.x,s.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),$[0],$[1],0,U,f),F==="outside-to-node-or-label"||F==="outside-to-line-or-label"){var P=n._private.rscratch,q=P.labelWidth,j=P.labelHeight,oe=P.labelX,ge=P.labelY,ve=q/2,L=j/2,de=n.pstyle("text-valign").value;de==="top"?ge-=L:de==="bottom"&&(ge+=L);var T=n.pstyle("text-halign").value;T==="left"?oe-=ve:T==="right"&&(oe+=ve);var p=zi($[0],$[1],[oe-ve,ge-L,oe+ve,ge-L,oe+ve,ge+L,oe-ve,ge+L],i.x,i.y);if(p.length>0){var x=s,z=Gn(x,ka(r)),Y=Gn(x,ka(p)),ne=z;if(Y<z&&(r=[p[0],p[1]],ne=Y),p.length>2){var ue=Gn(x,{x:p[2],y:p[3]});ue<ne&&(r=[p[2],p[3]])}}}var me=Is(r,G,e.arrowShapes[u].spacing(t)+c),be=Is(r,G,e.arrowShapes[u].gap(t)+c);d.startX=be[0],d.startY=be[1],d.arrowStartX=me[0],d.arrowStartY=me[1],O&&(!Ee(d.startX)||!Ee(d.startY)||!Ee(d.endX)||!Ee(d.endY)?d.badLine=!0:d.badLine=!1)};ls.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};ls.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Nc={};function xT(t,e,r){for(var n=function(l,c,f,h){return St(l,c,f,h)},a=e._private,i=a.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var o=t.bezierProjPcts[s];i.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}Nc.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)xT(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var s=r.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};Nc.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Kr={};Kr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!In(e)){var r,n,a=t._private,i=t.width(),s=t.height(),o=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=a.rscratch,h=a.rstyle;switch(l){case"left":r=u.x-i/2-o;break;case"right":r=u.x+i/2+o;break;default:r=u.x}switch(c){case"top":n=u.y-s/2-o;break;case"bottom":n=u.y+s/2+o;break;default:n=u.y}f.labelX=r,f.labelY=n,h.labelX=r,h.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var vp=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},pp=function(e,r){var n=r.x-e.x,a=r.y-e.y;return vp(n,a)},ET=function(e,r,n,a){var i=$i(0,a-.001,1),s=$i(0,a+.001,1),o=Ma(e,r,n,i),u=Ma(e,r,n,s);return pp(o,u)};Kr.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var s=function(f,h,v){Sn(r.rscratch,f,h,v),Sn(r.rstyle,f,h,v)};s("labelX",null,e.x),s("labelY",null,e.y);var o=vp(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var u=function c(){if(c.cache)return c.cache;for(var f=[],h=0;h+5<n.allpts.length;h+=4){var v={x:n.allpts[h],y:n.allpts[h+1]},d={x:n.allpts[h+2],y:n.allpts[h+3]},b={x:n.allpts[h+4],y:n.allpts[h+5]};f.push({p0:v,p1:d,p2:b,startDist:0,length:0,segments:[]})}var y=r.rstyle.bezierPts,m=a.bezierProjPcts.length;function E(A,D,F,U,W){var H=oa(D,F),R=A.segments[A.segments.length-1],I={p0:D,p1:F,t0:U,t1:W,startDist:R?R.startDist+R.length:0,length:H};A.segments.push(I),A.length+=H}for(var S=0;S<f.length;S++){var B=f[S],C=f[S-1];C&&(B.startDist=C.startDist+C.length),E(B,B.p0,y[S*m],0,a.bezierProjPcts[0]);for(var O=0;O<m-1;O++)E(B,y[S*m+O],y[S*m+O+1],a.bezierProjPcts[O],a.bezierProjPcts[O+1]);E(B,y[S*m+m-1],B.p2,a.bezierProjPcts[m-1],1)}return c.cache=f},l=function(f){var h,v=f==="source";if(i[f]){var d=t.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var b=u(),y,m=0,E=0,S=0;S<b.length;S++){for(var B=b[v?S:b.length-1-S],C=0;C<B.segments.length;C++){var O=B.segments[v?C:B.segments.length-1-C],A=S===b.length-1&&C===B.segments.length-1;if(m=E,E+=O.length,E>=d||A){y={cp:B,segment:O};break}}if(y)break}var D=y.cp,F=y.segment,U=(d-m)/F.length,W=F.t1-F.t0,H=v?F.t0+W*U:F.t1-W*U;H=$i(0,H,1),e=Ma(D.p0,D.p1,D.p2,H),h=ET(D.p0,D.p1,D.p2,H);break}case"straight":case"segments":case"haystack":{for(var R=0,I,G,V,$,X=n.allpts.length,ae=0;ae+3<X&&(v?(V={x:n.allpts[ae],y:n.allpts[ae+1]},$={x:n.allpts[ae+2],y:n.allpts[ae+3]}):(V={x:n.allpts[X-2-ae],y:n.allpts[X-1-ae]},$={x:n.allpts[X-4-ae],y:n.allpts[X-3-ae]}),I=oa(V,$),G=R,R+=I,!(R>=d));ae+=2);var ce=d-G,re=ce/I;re=$i(0,re,1),e=Aw(V,$,re),h=pp(V,$);break}}s("labelX",f,e.x),s("labelY",f,e.y),s("labelAutoAngle",f,h)}};l("source"),l("target"),this.applyLabelDimensions(t)}};Kr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Kr.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=this.calculateLabelDimensions(t,n),i=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,o=Tr(r.rscratch,"labelWrapCachedLines",e)||[],u=s!=="wrap"?1:Math.max(o.length,1),l=a.height/u,c=l*i,f=a.width,h=a.height+(u-1)*(i-1)*l;Sn(r.rstyle,"labelWidth",e,f),Sn(r.rscratch,"labelWidth",e,f),Sn(r.rstyle,"labelHeight",e,h),Sn(r.rscratch,"labelHeight",e,h),Sn(r.rscratch,"labelLineHeight",e,c)};Kr.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,s=function(le,N){return N?(Sn(r.rscratch,le,e,N),N):Tr(r.rscratch,le,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var o=t.pstyle("text-wrap").value;if(o==="wrap"){var u=s("labelKey");if(u!=null&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var l="​",c=a.split(`
`),f=t.pstyle("text-max-width").pfValue,h=t.pstyle("text-overflow-wrap").value,v=h==="anywhere",d=[],b=/[\s\u200b]+|$/g,y=0;y<c.length;y++){var m=c[y],E=this.calculateLabelDimensions(t,m),S=E.width;if(v){var B=m.split("").join(l);m=B}if(S>f){var C=m.matchAll(b),O="",A=0,D=Qv(C),F;try{for(D.s();!(F=D.n()).done;){var U=F.value,W=U[0],H=m.substring(A,U.index);A=U.index+W.length;var R=O.length===0?H:O+H+W,I=this.calculateLabelDimensions(t,R),G=I.width;G<=f?O+=H+W:(O&&d.push(O),O=H+W)}}catch(Z){D.e(Z)}finally{D.f()}O.match(/^[\s\u200b]+$/)||d.push(O)}else d.push(m)}s("labelWrapCachedLines",d),a=s("labelWrapCachedText",d.join(`
`)),s("labelWrapKey",u)}else if(o==="ellipsis"){var V=t.pstyle("text-max-width").pfValue,$="",X="…",ae=!1;if(this.calculateLabelDimensions(t,a).width<V)return a;for(var ce=0;ce<a.length;ce++){var re=this.calculateLabelDimensions(t,$+a[ce]+X).width;if(re>V)break;$+=a[ce],ce===a.length-1&&(ae=!0)}return ae||($+=X),$}return a};Kr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Kr.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=sa(e,t._private.labelDimsKey),s=r.labelDimCache||(r.labelDimCache=[]),o=s[i];if(o!=null)return o;var u=0,l=t.pstyle("font-style").strValue,c=t.pstyle("font-size").pfValue,f=t.pstyle("font-family").strValue,h=t.pstyle("font-weight").strValue,v=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!v){v=this.labelCalcCanvas=a.createElement("canvas"),d=this.labelCalcCanvasContext=v.getContext("2d");var b=v.style;b.position="absolute",b.left="-9999px",b.top="-9999px",b.zIndex="-1",b.visibility="hidden",b.pointerEvents="none"}d.font="".concat(l," ").concat(h," ").concat(c,"px ").concat(f);for(var y=0,m=0,E=e.split(`
`),S=0;S<E.length;S++){var B=E[S],C=d.measureText(B),O=Math.ceil(C.width),A=c;y=Math.max(O,y),m+=A}return y+=u,m+=u,s[i]={width:y,height:m}};Kr.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",s=t.pstyle(i+"text-rotation"),o=s.strValue;return o==="none"?0:a&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:s.pfValue};Kr.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var gp={},Od=28,Md=!1;gp.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<Od||t.height()<Od))return Md||(Ve("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Md=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var vu={};vu.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),o)for(var u=0;u<s.length;u++){var l=s[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(s){var o=s.target;n(o)}).on("style.* background.*",function(s){var o=s.target;n(o,!1)});var a=function(s){if(s){var o=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(o)for(var f=0;f<o.length;f++){var h=o[f];h(s,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};vu.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};vu.recalculateRenderedStyle=function(t,e){var r=function(B){return B._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var s=t[i],o=s._private,u=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(u.clean=!1),!(e&&u.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?a.push(s):n.push(s),u.clean=!0)}for(var l=0;l<a.length;l++){var c=a[l],f=c._private,h=f.rstyle,v=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=v.x,h.nodeY=v.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var d=0;d<n.length;d++){var b=n[d],y=b._private,m=y.rstyle,E=y.rscratch;m.srcX=E.arrowStartX,m.srcY=E.arrowStartY,m.tgtX=E.arrowEndX,m.tgtY=E.arrowEndY,m.midX=E.midX,m.midY=E.midY,m.labelAngle=E.labelAngle,m.sourceLabelAngle=E.sourceLabelAngle,m.targetLabelAngle=E.targetLabelAngle}}};var pu={};pu.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};pu.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};pu.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(J0),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var yp={};[ha,Do,Gt,ls,Nc,Kr,gp,vu,pu].forEach(function(t){Ae(yp,t)});var mp={};mp.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var s=i.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var o="data:",u=t.substring(0,o.length).toLowerCase()===o;return u||(e=e==="null"?null:e,s.crossOrigin=e),s.src=t,s};var ai={};ai.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(t);return i.on.apply(i,a)};ai.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||K1(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var s=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:s,addEventListener:s,addListener:s,bind:s}};ai.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};ai.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};ai.load=function(){var t=this,e=t.cy.window(),r=function(L){return L.selected()},n=function(L,de,T,p){L==null&&(L=t.cy);for(var x=0;x<de.length;x++){var z=de[x];L.emit({originalEvent:T,type:z,position:p})}},a=function(L){return L.shiftKey||L.metaKey||L.ctrlKey},i=function(L,de){var T=!0;if(t.cy.hasCompoundNodes()&&L&&L.pannable())for(var p=0;de&&p<de.length;p++){var L=de[p];if(L.isNode()&&L.isParent()&&!L.pannable()){T=!1;break}}else T=!0;return T},s=function(L){L[0]._private.grabbed=!0},o=function(L){L[0]._private.grabbed=!1},u=function(L){L[0]._private.rscratch.inDragLayer=!0},l=function(L){L[0]._private.rscratch.inDragLayer=!1},c=function(L){L[0]._private.rscratch.isGrabTarget=!0},f=function(L){L[0]._private.rscratch.isGrabTarget=!1},h=function(L,de){var T=de.addToList,p=T.has(L);!p&&L.grabbable()&&!L.locked()&&(T.merge(L),s(L))},v=function(L,de){if(L.cy().hasCompoundNodes()&&!(de.inDragLayer==null&&de.addToList==null)){var T=L.descendants();de.inDragLayer&&(T.forEach(u),T.connectedEdges().forEach(u)),de.addToList&&h(T,de)}},d=function(L,de){de=de||{};var T=L.cy().hasCompoundNodes();de.inDragLayer&&(L.forEach(u),L.neighborhood().stdFilter(function(p){return!T||p.isEdge()}).forEach(u)),de.addToList&&L.forEach(function(p){h(p,de)}),v(L,de),m(L,{inDragLayer:de.inDragLayer}),t.updateCachedGrabbedEles()},b=d,y=function(L){L&&(t.getCachedZSortedEles().forEach(function(de){o(de),l(de),f(de)}),t.updateCachedGrabbedEles())},m=function(L,de){if(!(de.inDragLayer==null&&de.addToList==null)&&L.cy().hasCompoundNodes()){var T=L.ancestors().orphans();if(!T.same(L)){var p=T.descendants().spawnSelf().merge(T).unmerge(L).unmerge(L.descendants()),x=p.connectedEdges();de.inDragLayer&&(x.forEach(u),p.forEach(u)),de.addToList&&p.forEach(function(z){h(z,de)})}}},E=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},S=typeof MutationObserver<"u",B=typeof ResizeObserver<"u";S?(t.removeObserver=new MutationObserver(function(ve){for(var L=0;L<ve.length;L++){var de=ve[L],T=de.removedNodes;if(T)for(var p=0;p<T.length;p++){var x=T[p];if(x===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(ve){t.destroy()});var C=eu(function(){t.cy.resize()},100);S&&(t.styleObserver=new MutationObserver(C),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",C),B&&(t.resizeObserver=new ResizeObserver(C),t.resizeObserver.observe(t.container));var O=function(L,de){for(;L!=null;)de(L),L=L.parentNode},A=function(){t.invalidateContainerClientCoordsCache()};O(t.container,function(ve){t.registerBinding(ve,"transitionend",A),t.registerBinding(ve,"animationend",A),t.registerBinding(ve,"scroll",A)}),t.registerBinding(t.container,"contextmenu",function(ve){ve.preventDefault()});var D=function(){return t.selection[4]!==0},F=function(L){for(var de=t.findContainerClientCoords(),T=de[0],p=de[1],x=de[2],z=de[3],Y=L.touches?L.touches:[L],ne=!1,ue=0;ue<Y.length;ue++){var me=Y[ue];if(T<=me.clientX&&me.clientX<=T+x&&p<=me.clientY&&me.clientY<=p+z){ne=!0;break}}if(!ne)return!1;for(var be=t.container,we=L.target,ye=we.parentNode,xe=!1;ye;){if(ye===be){xe=!0;break}ye=ye.parentNode}return!!xe};t.registerBinding(t.container,"mousedown",function(L){if(F(L)&&!(t.hoverData.which===1&&L.which!==1)){L.preventDefault(),E(),t.hoverData.capture=!0,t.hoverData.which=L.which;var de=t.cy,T=[L.clientX,L.clientY],p=t.projectIntoViewport(T[0],T[1]),x=t.selection,z=t.findNearestElements(p[0],p[1],!0,!1),Y=z[0],ne=t.dragData.possibleDragElements;t.hoverData.mdownPos=p,t.hoverData.mdownGPos=T;var ue=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Ce=t.hoverData.down;Ce?Ce.emit({originalEvent:L,type:"taphold",position:{x:p[0],y:p[1]}}):de.emit({originalEvent:L,type:"taphold",position:{x:p[0],y:p[1]}})}},t.tapholdDuration)};if(L.which==3){t.hoverData.cxtStarted=!0;var me={originalEvent:L,type:"cxttapstart",position:{x:p[0],y:p[1]}};Y?(Y.activate(),Y.emit(me),t.hoverData.down=Y):de.emit(me),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(L.which==1){Y&&Y.activate();{if(Y!=null&&t.nodeIsGrabbable(Y)){var be=function(Ce){return{originalEvent:L,type:Ce,position:{x:p[0],y:p[1]}}},we=function(Ce){Ce.emit(be("grab"))};if(c(Y),!Y.selected())ne=t.dragData.possibleDragElements=de.collection(),b(Y,{addToList:ne}),Y.emit(be("grabon")).emit(be("grab"));else{ne=t.dragData.possibleDragElements=de.collection();var ye=de.$(function(xe){return xe.isNode()&&xe.selected()&&t.nodeIsGrabbable(xe)});d(ye,{addToList:ne}),Y.emit(be("grabon")),ye.forEach(we)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=Y,t.hoverData.downs=z,t.hoverData.downTime=new Date().getTime()}n(Y,["mousedown","tapstart","vmousedown"],L,{x:p[0],y:p[1]}),Y==null?(x[4]=1,t.data.bgActivePosistion={x:p[0],y:p[1]},t.redrawHint("select",!0),t.redraw()):Y.pannable()&&(x[4]=1),ue()}x[0]=x[2]=p[0],x[1]=x[3]=p[1]}},!1),t.registerBinding(e,"mousemove",function(L){var de=t.hoverData.capture;if(!(!de&&!F(L))){var T=!1,p=t.cy,x=p.zoom(),z=[L.clientX,L.clientY],Y=t.projectIntoViewport(z[0],z[1]),ne=t.hoverData.mdownPos,ue=t.hoverData.mdownGPos,me=t.selection,be=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(be=t.findNearestElement(Y[0],Y[1],!0,!1));var we=t.hoverData.last,ye=t.hoverData.down,xe=[Y[0]-me[2],Y[1]-me[3]],Ce=t.dragData.possibleDragElements,qe;if(ue){var Ct=z[0]-ue[0],vt=Ct*Ct,ut=z[1]-ue[1],Mt=ut*ut,et=vt+Mt;t.hoverData.isOverThresholdDrag=qe=et>=t.desktopTapThreshold2}var Ft=a(L);qe&&(t.hoverData.tapholdCancelled=!0);var ir=function(){var or=t.hoverData.dragDelta=t.hoverData.dragDelta||[];or.length===0?(or.push(xe[0]),or.push(xe[1])):(or[0]+=xe[0],or[1]+=xe[1])};T=!0,n(be,["mousemove","vmousemove","tapdrag"],L,{x:Y[0],y:Y[1]});var tr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||p.emit({originalEvent:L,type:"boxstart",position:{x:Y[0],y:Y[1]}}),me[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(qe){var Ht={originalEvent:L,type:"cxtdrag",position:{x:Y[0],y:Y[1]}};ye?ye.emit(Ht):p.emit(Ht),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||be!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:L,type:"cxtdragout",position:{x:Y[0],y:Y[1]}}),t.hoverData.cxtOver=be,be&&be.emit({originalEvent:L,type:"cxtdragover",position:{x:Y[0],y:Y[1]}}))}}else if(t.hoverData.dragging){if(T=!0,p.panningEnabled()&&p.userPanningEnabled()){var Ge;if(t.hoverData.justStartedPan){var Ir=t.hoverData.mdownPos;Ge={x:(Y[0]-Ir[0])*x,y:(Y[1]-Ir[1])*x},t.hoverData.justStartedPan=!1}else Ge={x:xe[0]*x,y:xe[1]*x};p.panBy(Ge),p.emit("dragpan"),t.hoverData.dragged=!0}Y=t.projectIntoViewport(L.clientX,L.clientY)}else if(me[4]==1&&(ye==null||ye.pannable())){if(qe){if(!t.hoverData.dragging&&p.boxSelectionEnabled()&&(Ft||!p.panningEnabled()||!p.userPanningEnabled()))tr();else if(!t.hoverData.selecting&&p.panningEnabled()&&p.userPanningEnabled()){var sr=i(ye,t.hoverData.downs);sr&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,me[4]=0,t.data.bgActivePosistion=ka(ne),t.redrawHint("select",!0),t.redraw())}ye&&ye.pannable()&&ye.active()&&ye.unactivate()}}else{if(ye&&ye.pannable()&&ye.active()&&ye.unactivate(),(!ye||!ye.grabbed())&&be!=we&&(we&&n(we,["mouseout","tapdragout"],L,{x:Y[0],y:Y[1]}),be&&n(be,["mouseover","tapdragover"],L,{x:Y[0],y:Y[1]}),t.hoverData.last=be),ye)if(qe){if(p.boxSelectionEnabled()&&Ft)ye&&ye.grabbed()&&(y(Ce),ye.emit("freeon"),Ce.emit("free"),t.dragData.didDrag&&(ye.emit("dragfreeon"),Ce.emit("dragfree"))),tr();else if(ye&&ye.grabbed()&&t.nodeIsDraggable(ye)){var ft=!t.dragData.didDrag;ft&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||d(Ce,{inDragLayer:!0});var dt={x:0,y:0};if(Ee(xe[0])&&Ee(xe[1])&&(dt.x+=xe[0],dt.y+=xe[1],ft)){var Et=t.hoverData.dragDelta;Et&&Ee(Et[0])&&Ee(Et[1])&&(dt.x+=Et[0],dt.y+=Et[1])}t.hoverData.draggingEles=!0,Ce.silentShift(dt).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else ir();T=!0}if(me[2]=Y[0],me[3]=Y[1],T)return L.stopPropagation&&L.stopPropagation(),L.preventDefault&&L.preventDefault(),!1}},!1);var U,W,H;t.registerBinding(e,"mouseup",function(L){if(!(t.hoverData.which===1&&L.which!==1&&t.hoverData.capture)){var de=t.hoverData.capture;if(de){t.hoverData.capture=!1;var T=t.cy,p=t.projectIntoViewport(L.clientX,L.clientY),x=t.selection,z=t.findNearestElement(p[0],p[1],!0,!1),Y=t.dragData.possibleDragElements,ne=t.hoverData.down,ue=a(L);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ne&&ne.unactivate(),t.hoverData.which===3){var me={originalEvent:L,type:"cxttapend",position:{x:p[0],y:p[1]}};if(ne?ne.emit(me):T.emit(me),!t.hoverData.cxtDragged){var be={originalEvent:L,type:"cxttap",position:{x:p[0],y:p[1]}};ne?ne.emit(be):T.emit(be)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(n(z,["mouseup","tapend","vmouseup"],L,{x:p[0],y:p[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(n(ne,["click","tap","vclick"],L,{x:p[0],y:p[1]}),W=!1,L.timeStamp-H<=T.multiClickDebounceTime()?(U&&clearTimeout(U),W=!0,H=null,n(ne,["dblclick","dbltap","vdblclick"],L,{x:p[0],y:p[1]})):(U=setTimeout(function(){W||n(ne,["oneclick","onetap","voneclick"],L,{x:p[0],y:p[1]})},T.multiClickDebounceTime()),H=L.timeStamp)),ne==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!a(L)&&(T.$(r).unselect(["tapunselect"]),Y.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=Y=T.collection()),z==ne&&!t.dragData.didDrag&&!t.hoverData.selecting&&z!=null&&z._private.selectable&&(t.hoverData.dragging||(T.selectionType()==="additive"||ue?z.selected()?z.unselect(["tapunselect"]):z.select(["tapselect"]):ue||(T.$(r).unmerge(z).unselect(["tapunselect"]),z.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var we=T.collection(t.getAllInBox(x[0],x[1],x[2],x[3]));t.redrawHint("select",!0),we.length>0&&t.redrawHint("eles",!0),T.emit({type:"boxend",originalEvent:L,position:{x:p[0],y:p[1]}});var ye=function(qe){return qe.selectable()&&!qe.selected()};T.selectionType()==="additive"||ue||T.$(r).unmerge(we).unselect(),we.emit("box").stdFilter(ye).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!x[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var xe=ne&&ne.grabbed();y(Y),xe&&(ne.emit("freeon"),Y.emit("free"),t.dragData.didDrag&&(ne.emit("dragfreeon"),Y.emit("dragfree")))}}x[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var R=function(L){if(!t.scrollingPage){var de=t.cy,T=de.zoom(),p=de.pan(),x=t.projectIntoViewport(L.clientX,L.clientY),z=[x[0]*T+p.x,x[1]*T+p.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||D()){L.preventDefault();return}if(de.panningEnabled()&&de.userPanningEnabled()&&de.zoomingEnabled()&&de.userZoomingEnabled()){L.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Y;L.deltaY!=null?Y=L.deltaY/-250:L.wheelDeltaY!=null?Y=L.wheelDeltaY/1e3:Y=L.wheelDelta/1e3,Y=Y*t.wheelSensitivity;var ne=L.deltaMode===1;ne&&(Y*=33);var ue=de.zoom()*Math.pow(10,Y);L.type==="gesturechange"&&(ue=t.gestureStartZoom*L.scale),de.zoom({level:ue,renderedPosition:{x:z[0],y:z[1]}}),de.emit(L.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",R,!0),t.registerBinding(e,"scroll",function(L){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(L){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||L.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(ve){t.hasTouchStarted||R(ve)},!0),t.registerBinding(t.container,"mouseout",function(L){var de=t.projectIntoViewport(L.clientX,L.clientY);t.cy.emit({originalEvent:L,type:"mouseout",position:{x:de[0],y:de[1]}})},!1),t.registerBinding(t.container,"mouseover",function(L){var de=t.projectIntoViewport(L.clientX,L.clientY);t.cy.emit({originalEvent:L,type:"mouseover",position:{x:de[0],y:de[1]}})},!1);var I,G,V,$,X,ae,ce,re,Z,le,N,fe,he,pe=function(L,de,T,p){return Math.sqrt((T-L)*(T-L)+(p-de)*(p-de))},ie=function(L,de,T,p){return(T-L)*(T-L)+(p-de)*(p-de)},J;t.registerBinding(t.container,"touchstart",J=function(L){if(t.hasTouchStarted=!0,!!F(L)){E(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var de=t.cy,T=t.touchData.now,p=t.touchData.earlier;if(L.touches[0]){var x=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);T[0]=x[0],T[1]=x[1]}if(L.touches[1]){var x=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);T[2]=x[0],T[3]=x[1]}if(L.touches[2]){var x=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);T[4]=x[0],T[5]=x[1]}if(L.touches[1]){t.touchData.singleTouchMoved=!0,y(t.dragData.touchDragEles);var z=t.findContainerClientCoords();Z=z[0],le=z[1],N=z[2],fe=z[3],I=L.touches[0].clientX-Z,G=L.touches[0].clientY-le,V=L.touches[1].clientX-Z,$=L.touches[1].clientY-le,he=0<=I&&I<=N&&0<=V&&V<=N&&0<=G&&G<=fe&&0<=$&&$<=fe;var Y=de.pan(),ne=de.zoom();X=pe(I,G,V,$),ae=ie(I,G,V,$),ce=[(I+V)/2,(G+$)/2],re=[(ce[0]-Y.x)/ne,(ce[1]-Y.y)/ne];var ue=200,me=ue*ue;if(ae<me&&!L.touches[2]){var be=t.findNearestElement(T[0],T[1],!0,!0),we=t.findNearestElement(T[2],T[3],!0,!0);be&&be.isNode()?(be.activate().emit({originalEvent:L,type:"cxttapstart",position:{x:T[0],y:T[1]}}),t.touchData.start=be):we&&we.isNode()?(we.activate().emit({originalEvent:L,type:"cxttapstart",position:{x:T[0],y:T[1]}}),t.touchData.start=we):de.emit({originalEvent:L,type:"cxttapstart",position:{x:T[0],y:T[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(L.touches[2])de.boxSelectionEnabled()&&L.preventDefault();else if(!L.touches[1]){if(L.touches[0]){var ye=t.findNearestElements(T[0],T[1],!0,!0),xe=ye[0];if(xe!=null&&(xe.activate(),t.touchData.start=xe,t.touchData.starts=ye,t.nodeIsGrabbable(xe))){var Ce=t.dragData.touchDragEles=de.collection(),qe=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),xe.selected()?(qe=de.$(function(et){return et.selected()&&t.nodeIsGrabbable(et)}),d(qe,{addToList:Ce})):b(xe,{addToList:Ce}),c(xe);var Ct=function(Ft){return{originalEvent:L,type:Ft,position:{x:T[0],y:T[1]}}};xe.emit(Ct("grabon")),qe?qe.forEach(function(et){et.emit(Ct("grab"))}):xe.emit(Ct("grab"))}n(xe,["touchstart","tapstart","vmousedown"],L,{x:T[0],y:T[1]}),xe==null&&(t.data.bgActivePosistion={x:x[0],y:x[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&n(t.touchData.start,["taphold"],L,{x:T[0],y:T[1]})},t.tapholdDuration)}}if(L.touches.length>=1){for(var vt=t.touchData.startPosition=[null,null,null,null,null,null],ut=0;ut<T.length;ut++)vt[ut]=p[ut]=T[ut];var Mt=L.touches[0];t.touchData.startGPosition=[Mt.clientX,Mt.clientY]}}},!1);var k;t.registerBinding(e,"touchmove",k=function(L){var de=t.touchData.capture;if(!(!de&&!F(L))){var T=t.selection,p=t.cy,x=t.touchData.now,z=t.touchData.earlier,Y=p.zoom();if(L.touches[0]){var ne=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);x[0]=ne[0],x[1]=ne[1]}if(L.touches[1]){var ne=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);x[2]=ne[0],x[3]=ne[1]}if(L.touches[2]){var ne=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);x[4]=ne[0],x[5]=ne[1]}var ue=t.touchData.startGPosition,me;if(de&&L.touches[0]&&ue){for(var be=[],we=0;we<x.length;we++)be[we]=x[we]-z[we];var ye=L.touches[0].clientX-ue[0],xe=ye*ye,Ce=L.touches[0].clientY-ue[1],qe=Ce*Ce,Ct=xe+qe;me=Ct>=t.touchTapThreshold2}if(de&&t.touchData.cxt){L.preventDefault();var vt=L.touches[0].clientX-Z,ut=L.touches[0].clientY-le,Mt=L.touches[1].clientX-Z,et=L.touches[1].clientY-le,Ft=ie(vt,ut,Mt,et),ir=Ft/ae,tr=150,Ht=tr*tr,Ge=1.5,Ir=Ge*Ge;if(ir>=Ir||Ft>=Ht){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var sr={originalEvent:L,type:"cxttapend",position:{x:x[0],y:x[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(sr),t.touchData.start=null):p.emit(sr)}}if(de&&t.touchData.cxt){var sr={originalEvent:L,type:"cxtdrag",position:{x:x[0],y:x[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(sr):p.emit(sr),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var ft=t.findNearestElement(x[0],x[1],!0,!0);(!t.touchData.cxtOver||ft!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:L,type:"cxtdragout",position:{x:x[0],y:x[1]}}),t.touchData.cxtOver=ft,ft&&ft.emit({originalEvent:L,type:"cxtdragover",position:{x:x[0],y:x[1]}}))}else if(de&&L.touches[2]&&p.boxSelectionEnabled())L.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||p.emit({originalEvent:L,type:"boxstart",position:{x:x[0],y:x[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,T[4]=1,!T||T.length===0||T[0]===void 0?(T[0]=(x[0]+x[2]+x[4])/3,T[1]=(x[1]+x[3]+x[5])/3,T[2]=(x[0]+x[2]+x[4])/3+1,T[3]=(x[1]+x[3]+x[5])/3+1):(T[2]=(x[0]+x[2]+x[4])/3,T[3]=(x[1]+x[3]+x[5])/3),t.redrawHint("select",!0),t.redraw();else if(de&&L.touches[1]&&!t.touchData.didSelect&&p.zoomingEnabled()&&p.panningEnabled()&&p.userZoomingEnabled()&&p.userPanningEnabled()){L.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var dt=t.dragData.touchDragEles;if(dt){t.redrawHint("drag",!0);for(var Et=0;Et<dt.length;Et++){var ln=dt[Et]._private;ln.grabbed=!1,ln.rscratch.inDragLayer=!1}}var or=t.touchData.start,vt=L.touches[0].clientX-Z,ut=L.touches[0].clientY-le,Mt=L.touches[1].clientX-Z,et=L.touches[1].clientY-le,rt=pe(vt,ut,Mt,et),gu=rt/X;if(he){var yu=vt-I,mu=ut-G,bu=Mt-V,wu=et-$,xu=(yu+bu)/2,Eu=(mu+wu)/2,Un=p.zoom(),$e=Un*gu,pa=p.pan(),ds=re[0]*Un+pa.x,se=re[1]*Un+pa.y,Pe={x:-$e/Un*(ds-pa.x-xu)+ds,y:-$e/Un*(se-pa.y-Eu)+se};if(or&&or.active()){var dt=t.dragData.touchDragEles;y(dt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),or.unactivate().emit("freeon"),dt.emit("free"),t.dragData.didDrag&&(or.emit("dragfreeon"),dt.emit("dragfree"))}p.viewport({zoom:$e,pan:Pe,cancelOnFailedZoom:!0}),p.emit("pinchzoom"),X=rt,I=vt,G=ut,V=Mt,$=et,t.pinching=!0}if(L.touches[0]){var ne=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);x[0]=ne[0],x[1]=ne[1]}if(L.touches[1]){var ne=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);x[2]=ne[0],x[3]=ne[1]}if(L.touches[2]){var ne=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);x[4]=ne[0],x[5]=ne[1]}}else if(L.touches[0]&&!t.touchData.didSelect){var Ie=t.touchData.start,Ne=t.touchData.last,ft;if(!t.hoverData.draggingEles&&!t.swipePanning&&(ft=t.findNearestElement(x[0],x[1],!0,!0)),de&&Ie!=null&&L.preventDefault(),de&&Ie!=null&&t.nodeIsDraggable(Ie))if(me){var dt=t.dragData.touchDragEles,Ln=!t.dragData.didDrag;Ln&&d(dt,{inDragLayer:!0}),t.dragData.didDrag=!0;var gr={x:0,y:0};if(Ee(be[0])&&Ee(be[1])&&(gr.x+=be[0],gr.y+=be[1],Ln)){t.redrawHint("eles",!0);var ur=t.touchData.dragDelta;ur&&Ee(ur[0])&&Ee(ur[1])&&(gr.x+=ur[0],gr.y+=ur[1])}t.hoverData.draggingEles=!0,dt.silentShift(gr).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==z[0]&&t.touchData.startPosition[1]==z[1]&&t.redrawHint("eles",!0),t.redraw()}else{var ur=t.touchData.dragDelta=t.touchData.dragDelta||[];ur.length===0?(ur.push(be[0]),ur.push(be[1])):(ur[0]+=be[0],ur[1]+=be[1])}if(n(Ie||ft,["touchmove","tapdrag","vmousemove"],L,{x:x[0],y:x[1]}),(!Ie||!Ie.grabbed())&&ft!=Ne&&(Ne&&Ne.emit({originalEvent:L,type:"tapdragout",position:{x:x[0],y:x[1]}}),ft&&ft.emit({originalEvent:L,type:"tapdragover",position:{x:x[0],y:x[1]}})),t.touchData.last=ft,de)for(var Et=0;Et<x.length;Et++)x[Et]&&t.touchData.startPosition[Et]&&me&&(t.touchData.singleTouchMoved=!0);if(de&&(Ie==null||Ie.pannable())&&p.panningEnabled()&&p.userPanningEnabled()){var Mp=i(Ie,t.touchData.starts);Mp&&(L.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=ka(t.touchData.startPosition)),t.swipePanning?(p.panBy({x:be[0]*Y,y:be[1]*Y}),p.emit("dragpan")):me&&(t.swipePanning=!0,p.panBy({x:ye*Y,y:Ce*Y}),p.emit("dragpan"),Ie&&(Ie.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ne=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);x[0]=ne[0],x[1]=ne[1]}}for(var we=0;we<x.length;we++)z[we]=x[we];de&&L.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var M;t.registerBinding(e,"touchcancel",M=function(L){var de=t.touchData.start;t.touchData.capture=!1,de&&de.unactivate()});var K,te,Q,ee;if(t.registerBinding(e,"touchend",K=function(L){var de=t.touchData.start,T=t.touchData.capture;if(T)L.touches.length===0&&(t.touchData.capture=!1),L.preventDefault();else return;var p=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var x=t.cy,z=x.zoom(),Y=t.touchData.now,ne=t.touchData.earlier;if(L.touches[0]){var ue=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);Y[0]=ue[0],Y[1]=ue[1]}if(L.touches[1]){var ue=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);Y[2]=ue[0],Y[3]=ue[1]}if(L.touches[2]){var ue=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);Y[4]=ue[0],Y[5]=ue[1]}de&&de.unactivate();var me;if(t.touchData.cxt){if(me={originalEvent:L,type:"cxttapend",position:{x:Y[0],y:Y[1]}},de?de.emit(me):x.emit(me),!t.touchData.cxtDragged){var be={originalEvent:L,type:"cxttap",position:{x:Y[0],y:Y[1]}};de?de.emit(be):x.emit(be)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!L.touches[2]&&x.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var we=x.collection(t.getAllInBox(p[0],p[1],p[2],p[3]));p[0]=void 0,p[1]=void 0,p[2]=void 0,p[3]=void 0,p[4]=0,t.redrawHint("select",!0),x.emit({type:"boxend",originalEvent:L,position:{x:Y[0],y:Y[1]}});var ye=function(Ht){return Ht.selectable()&&!Ht.selected()};we.emit("box").stdFilter(ye).select().emit("boxselect"),we.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(de!=null&&de.unactivate(),L.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!L.touches[1]){if(!L.touches[0]){if(!L.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var xe=t.dragData.touchDragEles;if(de!=null){var Ce=de._private.grabbed;y(xe),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Ce&&(de.emit("freeon"),xe.emit("free"),t.dragData.didDrag&&(de.emit("dragfreeon"),xe.emit("dragfree"))),n(de,["touchend","tapend","vmouseup","tapdragout"],L,{x:Y[0],y:Y[1]}),de.unactivate(),t.touchData.start=null}else{var qe=t.findNearestElement(Y[0],Y[1],!0,!0);n(qe,["touchend","tapend","vmouseup","tapdragout"],L,{x:Y[0],y:Y[1]})}var Ct=t.touchData.startPosition[0]-Y[0],vt=Ct*Ct,ut=t.touchData.startPosition[1]-Y[1],Mt=ut*ut,et=vt+Mt,Ft=et*z*z;t.touchData.singleTouchMoved||(de||x.$(":selected").unselect(["tapunselect"]),n(de,["tap","vclick"],L,{x:Y[0],y:Y[1]}),te=!1,L.timeStamp-ee<=x.multiClickDebounceTime()?(Q&&clearTimeout(Q),te=!0,ee=null,n(de,["dbltap","vdblclick"],L,{x:Y[0],y:Y[1]})):(Q=setTimeout(function(){te||n(de,["onetap","voneclick"],L,{x:Y[0],y:Y[1]})},x.multiClickDebounceTime()),ee=L.timeStamp)),de!=null&&!t.dragData.didDrag&&de._private.selectable&&Ft<t.touchTapThreshold2&&!t.pinching&&(x.selectionType()==="single"?(x.$(r).unmerge(de).unselect(["tapunselect"]),de.select(["tapselect"])):de.selected()?de.unselect(["tapunselect"]):de.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var ir=0;ir<Y.length;ir++)ne[ir]=Y[ir];t.dragData.didDrag=!1,L.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),L.touches.length<2&&(L.touches.length===1&&(t.touchData.startGPosition=[L.touches[0].clientX,L.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var _=[],g=function(L){return{clientX:L.clientX,clientY:L.clientY,force:1,identifier:L.pointerId,pageX:L.pageX,pageY:L.pageY,radiusX:L.width/2,radiusY:L.height/2,screenX:L.screenX,screenY:L.screenY,target:L.target}},w=function(L){return{event:L,touch:g(L)}},P=function(L){_.push(w(L))},q=function(L){for(var de=0;de<_.length;de++){var T=_[de];if(T.event.pointerId===L.pointerId){_.splice(de,1);return}}},j=function(L){var de=_.filter(function(T){return T.event.pointerId===L.pointerId})[0];de.event=L,de.touch=g(L)},oe=function(L){L.touches=_.map(function(de){return de.touch})},ge=function(L){return L.pointerType==="mouse"||L.pointerType===4};t.registerBinding(t.container,"pointerdown",function(ve){ge(ve)||(ve.preventDefault(),P(ve),oe(ve),J(ve))}),t.registerBinding(t.container,"pointerup",function(ve){ge(ve)||(q(ve),oe(ve),K(ve))}),t.registerBinding(t.container,"pointercancel",function(ve){ge(ve)||(q(ve),oe(ve),M(ve))}),t.registerBinding(t.container,"pointermove",function(ve){ge(ve)||(ve.preventDefault(),j(ve),oe(ve),k(ve))})}};var on={};on.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,s,o,u){this.renderer.nodeShapeImpl("polygon",n,a,i,s,o,this.points)},intersectLine:function(n,a,i,s,o,u,l,c){return zi(o,u,this.points,n,a,i/2,s/2,l)},checkPoint:function(n,a,i,s,o,u,l,c){return an(n,a,this.points,u,l,s,o,[0,-1],i)}}};on.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,u){return $w(i,s,e,r,n/2+o,a/2+o)},checkPoint:function(e,r,n,a,i,s,o,u){return Jn(e,r,a,i,s,o,n)}}};on.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,s,o,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===a)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=a;var c=i/2,f=s/2;o=o==="auto"?x0(i,s):o;for(var h=new Array(e.length/2),v=0;v<e.length/2;v++)h[v]={x:n+c*e[v*2],y:a+f*e[v*2+1]};var d,b,y,m,E=h.length;for(b=h[E-1],d=0;d<E;d++)y=h[d%E],m=h[(d+1)%E],u[l][d]=Ic(b,y,m,o),b=y,y=m;return u[l]},draw:function(n,a,i,s,o,u,l){this.renderer.nodeShapeImpl("round-polygon",n,a,i,s,o,this.points,this.getOrCreateCorners(a,i,s,o,u,l,"drawCorners"))},intersectLine:function(n,a,i,s,o,u,l,c,f){return zw(o,u,this.points,n,a,i,s,l,this.getOrCreateCorners(n,a,i,s,c,f,"corners"))},checkPoint:function(n,a,i,s,o,u,l,c,f){return Lw(n,a,this.points,u,l,s,o,this.getOrCreateCorners(u,l,s,o,c,f,"corners"))}}};on.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Zt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,u){return b0(i,s,e,r,n,a,o,u)},checkPoint:function(e,r,n,a,i,s,o,u){var l=a/2,c=i/2;u=u==="auto"?ua(a,i):u,u=Math.min(l,c,u);var f=u*2;return!!(an(e,r,this.points,s,o,a,i-f,[0,-1],n)||an(e,r,this.points,s,o,a-f,i,[0,-1],n)||Jn(e,r,f,f,s-l+u,o-c+u,n)||Jn(e,r,f,f,s+l-u,o-c+u,n)||Jn(e,r,f,f,s+l-u,o+c-u,n)||Jn(e,r,f,f,s-l+u,o+c-u,n))}}};on.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:yc(),points:Zt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,s)},generateCutTrianglePts:function(e,r,n,a,i){var s=i==="auto"?this.cornerLength:i,o=r/2,u=e/2,l=n-u,c=n+u,f=a-o,h=a+o;return{topLeft:[l,f+s,l+s,f,l+s,f+s],topRight:[c-s,f,c,f+s,c-s,f+s],bottomRight:[c,h-s,c-s,h,c-s,h-s],bottomLeft:[l+s,h,l,h-s,l+s,h-s]}},intersectLine:function(e,r,n,a,i,s,o,u){var l=this.generateCutTrianglePts(n+2*o,a+2*o,e,r,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return zi(i,s,c,e,r)},checkPoint:function(e,r,n,a,i,s,o,u){var l=u==="auto"?this.cornerLength:u;if(an(e,r,this.points,s,o,a,i-2*l,[0,-1],n)||an(e,r,this.points,s,o,a-2*l,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,s,o);return jt(e,r,c.topLeft)||jt(e,r,c.topRight)||jt(e,r,c.bottomRight)||jt(e,r,c.bottomLeft)}}};on.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Zt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,u){var l=.15,c=.5,f=.85,h=this.generateBarrelBezierPts(n+2*o,a+2*o,e,r),v=function(y){var m=Ma({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},l),E=Ma({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},c),S=Ma({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},f);return[y[0],y[1],m.x,m.y,E.x,E.y,S.x,S.y,y[4],y[5]]},d=[].concat(v(h.topLeft),v(h.topRight),v(h.bottomRight),v(h.bottomLeft));return zi(i,s,d,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,s=e/2,o=n-s,u=n+s,l=a-i,c=a+i,f=Nl(e,r),h=f.heightOffset,v=f.widthOffset,d=f.ctrlPtOffsetPct*e,b={topLeft:[o,l+h,o+d,l,o+v,l],topRight:[u-v,l,u-d,l,u,l+h],bottomRight:[u,c-h,u-d,c,u-v,c],bottomLeft:[o+v,c,o+d,c,o,c-h]};return b.topLeft.isTop=!0,b.topRight.isTop=!0,b.bottomLeft.isBottom=!0,b.bottomRight.isBottom=!0,b},checkPoint:function(e,r,n,a,i,s,o,u){var l=Nl(a,i),c=l.heightOffset,f=l.widthOffset;if(an(e,r,this.points,s,o,a,i-2*c,[0,-1],n)||an(e,r,this.points,s,o,a-2*f,i,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(a,i,s,o),v=function(D,F,U){var W=U[4],H=U[2],R=U[0],I=U[5],G=U[1],V=Math.min(W,R),$=Math.max(W,R),X=Math.min(I,G),ae=Math.max(I,G);if(V<=D&&D<=$&&X<=F&&F<=ae){var ce=Vw(W,H,R),re=Mw(ce[0],ce[1],ce[2],D),Z=re.filter(function(le){return 0<=le&&le<=1});if(Z.length>0)return Z[0]}return null},d=Object.keys(h),b=0;b<d.length;b++){var y=d[b],m=h[y],E=v(e,r,m);if(E!=null){var S=m[5],B=m[3],C=m[1],O=St(S,B,C,E);if(m.isTop&&O<=r||m.isBottom&&r<=O)return!0}}return!1}}};on.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Zt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,u){var l=e-(n/2+o),c=r-(a/2+o),f=c,h=e+(n/2+o),v=Tn(i,s,e,r,l,c,h,f,!1);return v.length>0?v:b0(i,s,e,r,n,a,o,u)},checkPoint:function(e,r,n,a,i,s,o,u){u=u==="auto"?ua(a,i):u;var l=2*u;if(an(e,r,this.points,s,o,a,i-l,[0,-1],n)||an(e,r,this.points,s,o,a-l,i,[0,-1],n))return!0;var c=a/2+2*n,f=i/2+2*n,h=[s-c,o-f,s-c,o,s+c,o,s+c,o-f];return!!(jt(e,r,h)||Jn(e,r,l,l,s+a/2-u,o+i/2-u,n)||Jn(e,r,l,l,s-a/2+u,o+i/2-u,n))}}};on.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Zt(3,0)),this.generateRoundPolygon("round-triangle",Zt(3,0)),this.generatePolygon("rectangle",Zt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Zt(5,0)),this.generateRoundPolygon("round-pentagon",Zt(5,0)),this.generatePolygon("hexagon",Zt(6,0)),this.generateRoundPolygon("round-hexagon",Zt(6,0)),this.generatePolygon("heptagon",Zt(7,0)),this.generateRoundPolygon("round-heptagon",Zt(7,0)),this.generatePolygon("octagon",Zt(8,0)),this.generateRoundPolygon("round-octagon",Zt(8,0));var n=new Array(20);{var a=Il(5,0),i=Il(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<i.length/2;o++)i[o*2]*=s,i[o*2+1]*=s;for(var o=0;o<20/4;o++)n[o*4]=a[o*2],n[o*4+1]=a[o*2+1],n[o*4+2]=i[o*2],n[o*4+3]=i[o*2+1]}n=w0(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,h;return(h=this[f])?h:e.generatePolygon(f,l)}};var cs={};cs.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};cs.redraw=function(t){t=t||v0();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};cs.beforeRender=function(t,e){if(!this.destroyed){e==null&&st("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var Fd=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};cs.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function n(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Fd(t,!0,a);var i=nn();t.render(t.renderOptions);var s=t.lastDrawTime=nn();t.averageRedrawTime===void 0&&(t.averageRedrawTime=s-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var o=s-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else Fd(t,!1,a);t.skipFrame=!1,Io(n)}};Io(r)}};var ST=function(e){this.init(e)},bp=ST,ii=bp.prototype;ii.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];ii.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=a.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!u){var l=a.createElement("style");l.id=s,l.textContent="."+o+" { position: relative; }",i.insertBefore(l,i.children[0])}var c=n.getComputedStyle(r),f=c.getPropertyValue("position");f==="static"&&Ve("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=Ee(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};ii.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};ii.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};ii.isHeadless=function(){return!1};[Cc,yp,mp,ai,on,cs].forEach(function(t){Ae(ii,t)});var Qu=1e3/60,wp={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=eu(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),s=function(l,c){var f=nn(),h=a.averageRedrawTime,v=a.lastRedrawTime,d=[],b=a.cy.extent(),y=a.getPixelRatio();for(l||a.flushRenderedStyleQueue();;){var m=nn(),E=m-f,S=m-c;if(v<Qu){var B=Qu-(l?h:0);if(S>=e.deqFastCost*B)break}else if(l){if(E>=e.deqCost*v||E>=e.deqAvgCost*h)break}else if(S>=e.deqNoDrawCost*Qu)break;var C=e.deq(n,y,b);if(C.length>0)for(var O=0;O<C.length;O++)d.push(C[O]);else break}d.length>0&&(e.onDeqd(n,d),!l&&e.shouldRedraw(n,d,y,b)&&i())},o=e.priority||hc;a.beforeRender(s,o(n))}}}},TT=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:No;uc(this,t),this.idsByKey=new qr,this.keyForId=new qr,this.cachesByLvl=new qr,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return lc(t,[{key:"getIdsFor",value:function(r){r==null&&st("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new Qa,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new qr,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}]),t}(),Dd=25,Us=50,go=-4,zl=3,_T=7.99,BT=8,AT=1024,CT=1024,IT=1024,NT=.2,RT=.8,kT=10,PT=.15,OT=.1,MT=.9,FT=.9,DT=100,UT=1,Pa={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},LT=Pt({getKey:null,doesEleInvalidateKey:No,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:f0,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),xi=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=LT(r);Ae(n,a),n.lookup=new TT(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},xt=xi.prototype;xt.reasons=Pa;xt.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};xt.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};xt.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new ss(function(r,n){return n.reqs-r.reqs});return e};xt.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};xt.getElement=function(t,e,r,n,a){var i=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(pc(o*r))),n<go)n=go;else if(o>=_T||n>zl)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,h=s.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,h))return null;var v=u.get(t,n);if(v&&v.invalidated&&(v.invalidated=!1,v.texture.invalidatedWidth-=v.width),v)return v;var d;if(c<=Dd?d=Dd:c<=Us?d=Us:d=Math.ceil(c/Us)*Us,c>IT||f>CT)return null;var b=i.getTextureQueue(d),y=b[b.length-2],m=function(){return i.recycleTexture(d,f)||i.addTexture(d,f)};y||(y=b[b.length-1]),y||(y=m()),y.width-y.usedWidth<f&&(y=m());for(var E=function(V){return V&&V.scaledLabelShown===h},S=a&&a===Pa.dequeue,B=a&&a===Pa.highQuality,C=a&&a===Pa.downscale,O,A=n+1;A<=zl;A++){var D=u.get(t,A);if(D){O=D;break}}var F=O&&O.level===n+1?O:null,U=function(){y.context.drawImage(F.texture.canvas,F.x,0,F.width,F.height,y.usedWidth,0,f,c)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,f,d),E(F))U();else if(E(O))if(B){for(var W=O.level;W>n;W--)F=i.getElement(t,e,r,W,Pa.downscale);U()}else return i.queueElement(t,O.level-1),O;else{var H;if(!S&&!B&&!C)for(var R=n-1;R>=go;R--){var I=u.get(t,R);if(I){H=I;break}}if(E(H))return i.queueElement(t,n),H;y.context.translate(y.usedWidth,0),y.context.scale(l,l),this.drawElement(y.context,t,e,h,!1),y.context.scale(1/l,1/l),y.context.translate(-y.usedWidth,0)}return v={x:y.usedWidth,texture:y,level:n,scale:l,width:f,height:c,scaledLabelShown:h},y.usedWidth+=Math.ceil(f+BT),y.eleCaches.push(v),u.set(t,n,v),i.checkTextureFullness(y),v};xt.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};xt.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=go;i<=zl;i++){var s=r.getForCachedKey(t,i);s&&n.push(s)}var o=r.invalidate(t);if(o)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};xt.checkTextureUtility=function(t){t.invalidatedWidth>=NT*t.width&&this.retireTexture(t)};xt.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>RT&&t.fullnessChecks>=kT?Nn(r,t):t.fullnessChecks++};xt.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;Nn(n,t),t.retired=!0;for(var i=t.eleCaches,s=0;s<i.length;s++){var o=i[s];a.deleteCache(o.key,o.level)}vc(i);var u=e.getRetiredTextureQueue(r);u.push(t)};xt.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(AT,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};xt.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var s=a[i];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,vc(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),Nn(a,s),n.push(s),s}};xt.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),s=a[i];if(s)s.level=Math.max(s.level,e),s.eles.merge(t),s.reqs++,n.updateItem(s);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(o),a[i]=o}};xt.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,s=0;s<UT&&r.size()>0;s++){var o=r.pop(),u=o.key,l=o.eles[0],c=i.hasCache(l,o.level);if(n[u]=null,c)continue;a.push(o);var f=e.getBoundingBox(l);e.getElement(l,f,t,o.level,Pa.dequeue)}return a};xt.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=dc,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};xt.onDequeue=function(t){this.onDequeues.push(t)};xt.offDequeue=function(t){Nn(this.onDequeues,t)};xt.setupDequeueing=wp.setupDequeueing({deqRedrawThreshold:DT,deqCost:PT,deqAvgCost:OT,deqNoDrawCost:MT,deqFastCost:FT,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var s=r[i].eles,o=0;o<s.length;o++){var u=s[o].boundingBox();if(gc(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var $T=1,Ai=-4,Uo=2,zT=3.99,VT=50,qT=50,GT=.15,HT=.1,WT=.9,KT=.9,YT=1,Ud=250,ZT=4e3*4e3,XT=!0,xp=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=nn()-2*Ud,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=eu(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},qT),n.beforeRender(function(s,o){o-r.lastInvalidationTime<=Ud?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(o,u){return u.reqs-o.reqs};r.layersQueue=new ss(i),r.setupDequeueing()},Ot=xp.prototype,Ld=0,QT=Math.pow(2,53)-1;Ot.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),s={id:Ld=++Ld%QT,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,l=-s.bb.y1;return o.scale(r,r),o.translate(u,l),s};Ot.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,s=i.zoom(),o=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(pc(s*e)),r<Ai)r=Ai;else if(s>=zT||r>Uo)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,l=Math.pow(2,r),c=u[r]=u[r]||[],f,h=n.levelIsComplete(r,t),v,d=function(){var U=function(G){if(n.validateLayersElesOrdering(G,t),n.levelIsComplete(G,t))return v=u[G],!0},W=function(G){if(!v)for(var V=r+G;Ai<=V&&V<=Uo&&!U(V);V+=G);};W(1),W(-1);for(var H=c.length-1;H>=0;H--){var R=c[H];R.invalid&&Nn(c,R)}};if(!h)d();else return c;var b=function(){if(!f){f=er();for(var U=0;U<t.length;U++)y0(f,t[U].boundingBox())}return f},y=function(U){U=U||{};var W=U.after;b();var H=f.w*l*(f.h*l);if(H>ZT)return null;var R=n.makeLayer(f,r);if(W!=null){var I=c.indexOf(W)+1;c.splice(I,0,R)}else(U.insert===void 0||U.insert)&&c.unshift(R);return R};if(n.skipping&&!o)return null;for(var m=null,E=t.length/$T,S=!o,B=0;B<t.length;B++){var C=t[B],O=C._private.rscratch,A=O.imgLayerCaches=O.imgLayerCaches||{},D=A[r];if(D){m=D;continue}if((!m||m.eles.length>=E||!m0(m.bb,C.boundingBox()))&&(m=y({insert:!0,after:m}),!m))return null;v||S?n.queueLayer(m,C):n.drawEleInLayer(m,C,r,e),m.eles.push(C),A[r]=m}return v||(S?null:c)};Ot.getEleLevelForLayerLevel=function(t,e){return t};Ot.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,s=t.context,o=e.boundingBox();o.w===0||o.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(s,!1),i.drawCachedElement(s,e,null,null,r,XT),i.setImgSmoothing(s,!0))};Ot.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var s=n[i];if(s.reqs>0||s.invalid)return!1;a+=s.eles.length}return a===e.length};Ot.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,s=0;s<e.length;s++)if(a.eles[0]===e[s]){i=s;break}if(i<0){this.invalidateLayer(a);continue}for(var o=i,s=0;s<a.eles.length;s++)if(a.eles[s]!==e[o+s]){this.invalidateLayer(a);break}}};Ot.updateElementsInLayers=function(t,e){for(var r=this,n=as(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],s=n?t[a]:t[a].ele,o=s._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},l=Ai;l<=Uo;l++){var c=u[l];c&&(i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,s,i))}};Ot.haveLayers=function(){for(var t=this,e=!1,r=Ai;r<=Uo;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};Ot.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=nn(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};Ot.invalidateLayer=function(t){if(this.lastInvalidationTime=nn(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];Nn(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};Ot.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)e.queueLayer(s,s.eles[o])})};Ot.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};Ot.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};Ot.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<YT&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var s=i.elesQueue.shift();s&&(e.drawEleInLayer(i,s,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};Ot.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var s=t.eles[i]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[t.level]=t)}e.requestRedraw()}};Ot.requestRedraw=eu(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);Ot.setupDequeueing=wp.setupDequeueing({deqRedrawThreshold:VT,deqCost:GT,deqAvgCost:HT,deqNoDrawCost:WT,deqFastCost:KT,deq:function(e,r){return e.dequeue(r)},onDeqd:hc,shouldRedraw:f0,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Ep={},$d;function jT(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function JT(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function zd(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var s=r,o=r[0];t.moveTo(o.x,o.y);for(var a=1;a<s.length;a++){var i=s[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function e_(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,s=i[0];t.moveTo(s.x,s.y);for(var o=0;o<i.length;o++){var u=i[o];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function t_(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}Ep.arrowShapeImpl=function(t){return($d||($d={polygon:jT,"triangle-backcurve":JT,"triangle-tee":zd,"circle-triangle":e_,"triangle-cross":zd,circle:t_}))[t]};var Yr={};Yr.drawElement=function(t,e,r,n,a,i){var s=this;e.isNode()?s.drawNode(t,e,r,n,a,i):s.drawEdge(t,e,r,n,a,i)};Yr.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};Yr.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};Yr.drawCachedElementPortion=function(t,e,r,n,a,i,s,o){var u=this,l=r.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=r.getElement(e,l,n,a,i);if(c!=null){var f=o(u,e);if(f===0)return;var h=s(u,e),v=l.x1,d=l.y1,b=l.w,y=l.h,m,E,S,B,C;if(h!==0){var O=r.getRotationPoint(e);S=O.x,B=O.y,t.translate(S,B),t.rotate(h),C=u.getImgSmoothing(t),C||u.setImgSmoothing(t,!0);var A=r.getRotationOffset(e);m=A.x,E=A.y}else m=v,E=d;var D;f!==1&&(D=t.globalAlpha,t.globalAlpha=D*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,m,E,b,y),f!==1&&(t.globalAlpha=D),h!==0&&(t.rotate(-h),t.translate(-S,-B),C||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var r_=function(){return 0},n_=function(e,r){return e.getTextAngle(r,null)},a_=function(e,r){return e.getTextAngle(r,"source")},i_=function(e,r){return e.getTextAngle(r,"target")},s_=function(e,r){return r.effectiveOpacity()},ju=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Yr.drawCachedElement=function(t,e,r,n,a,i){var s=this,o=s.data,u=o.eleTxrCache,l=o.lblTxrCache,c=o.slbTxrCache,f=o.tlbTxrCache,h=e.boundingBox(),v=i===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||gc(h,n))){var d=e.isEdge(),b=e.element()._private.rscratch.badLine;s.drawElementUnderlay(t,e),s.drawCachedElementPortion(t,e,u,r,a,v,r_,s_),(!d||!b)&&s.drawCachedElementPortion(t,e,l,r,a,v,n_,ju),d&&!b&&(s.drawCachedElementPortion(t,e,c,r,a,v,a_,ju),s.drawCachedElementPortion(t,e,f,r,a,v,i_,ju)),s.drawElementOverlay(t,e)}};Yr.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};Yr.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];a.drawCachedElement(t,s,r,n)}};Yr.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];s.isNode()&&a.drawCachedElement(t,s,r,n)}};Yr.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var s=0;s<i.length;s++){var o=i[s],u=o.bb;u.w===0||u.h===0||t.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(t,e,r,n)};var un={};un.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=e._private.rscratch;if(!(i&&!e.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var l=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,v=e.pstyle("width").pfValue,d=e.pstyle("line-cap").value,b=e.pstyle("line-outline-width").value,y=e.pstyle("line-outline-color").value,m=l*c,E=l*c,S=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;f==="straight-triangle"?(s.eleStrokeStyle(t,e,G),s.drawEdgeTrianglePath(e,t,o.allpts)):(t.lineWidth=v,t.lineCap=d,s.eleStrokeStyle(t,e,G),s.drawEdgePath(e,t,o.allpts,h),t.lineCap="butt")},B=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;if(t.lineWidth=v+b,t.lineCap=d,b>0)s.colorStrokeStyle(t,y[0],y[1],y[2],G);else{t.lineCap="butt";return}f==="straight-triangle"?s.drawEdgeTrianglePath(e,t,o.allpts):(s.drawEdgePath(e,t,o.allpts,h),t.lineCap="butt")},C=function(){a&&s.drawEdgeOverlay(t,e)},O=function(){a&&s.drawEdgeUnderlay(t,e)},A=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:E;s.drawArrowheads(t,e,G)},D=function(){s.drawElementText(t,e,null,n)};t.lineJoin="round";var F=e.pstyle("ghost").value==="yes";if(F){var U=e.pstyle("ghost-offset-x").pfValue,W=e.pstyle("ghost-offset-y").pfValue,H=e.pstyle("ghost-opacity").value,R=m*H;t.translate(U,W),S(R),A(R),t.translate(-U,-W)}else B();O(),S(),A(),C(),D(),r&&t.translate(u.x1,u.y1)}};var Sp=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,s=i.usePaths(),o=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=l,o.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,o.allpts,"solid")}}}};un.drawEdgeOverlay=Sp("overlay");un.drawEdgeUnderlay=Sp("underlay");un.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,s,o=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var f=r.join("$"),h=a.pathCacheKey&&a.pathCacheKey===f;h?(s=e=a.pathCache,o=!0):(s=e=new Path2D,a.pathCacheKey=f,a.pathCache=s)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(l),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!o&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var v=2;v+3<r.length;v+=4)e.quadraticCurveTo(r[v],r[v+1],r[v+2],r[v+3]);break;case"straight":case"haystack":for(var d=2;d+1<r.length;d+=2)e.lineTo(r[d],r[d+1]);break;case"segments":if(a.isRound){var b=Qv(a.roundCorners),y;try{for(b.s();!(y=b.n()).done;){var m=y.value;dp(e,m)}}catch(S){b.e(S)}finally{b.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var E=2;E+1<r.length;E+=2)e.lineTo(r[E],r[E+1]);break}e=i,u?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])};un.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=[i[1]/s,-i[0]/s],u=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(r[a]-u[0],r[a+1]-u[1]),e.lineTo(r[a]+u[0],r[a+1]+u[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};un.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};un.drawArrowhead=function(t,e,r,n,a,i,s){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var o=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,h=e.pstyle(r+"-arrow-width"),v=h.value==="match-line"?f:h.pfValue;h.units==="%"&&(v*=f);var d=e.pstyle("opacity").value;s===void 0&&(s=d);var b=t.globalCompositeOperation;(s!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,1),o.colorStrokeStyle(t,255,255,255,1),o.drawArrowShape(e,t,l,f,u,v,n,a,i),t.globalCompositeOperation=b);var y=e.pstyle(r+"-arrow-color").value;o.colorFillStyle(t,y[0],y[1],y[2],s),o.colorStrokeStyle(t,y[0],y[1],y[2],s),o.drawArrowShape(e,t,c,f,u,v,n,a,i)}}};un.drawArrowShape=function(t,e,r,n,a,i,s,o,u){var l=this,c=this.usePaths()&&a!=="triangle-cross",f=!1,h,v=e,d={x:s,y:o},b=t.pstyle("arrow-scale").value,y=this.getArrowWidth(n,b),m=l.arrowShapes[a];if(c){var E=l.arrowPathCache=l.arrowPathCache||[],S=sa(a),B=E[S];B!=null?(h=e=B,f=!0):(h=e=new Path2D,E[S]=h)}f||(e.beginPath&&e.beginPath(),c?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,y,u,d,n),e.closePath&&e.closePath()),e=v,c&&(e.translate(s,o),e.rotate(u),e.scale(y,y)),(r==="filled"||r==="both")&&(c?e.fill(h):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(c?y:1),e.lineJoin="miter",c?e.stroke(h):e.stroke()),c&&(e.scale(1/y,1/y),e.rotate(-u),e.translate(-s,-o))};var Rc={};Rc.safeDrawImage=function(t,e,r,n,a,i,s,o,u,l){if(!(a<=0||i<=0||u<=0||l<=0))try{t.drawImage(e,r,n,a,i,s,o,u,l)}catch(c){Ve(c)}};Rc.drawInscribedImage=function(t,e,r,n,a){var i=this,s=r.position(),o=s.x,u=s.y,l=r.cy().style(),c=l.getIndexedStyle.bind(l),f=c(r,"background-fit","value",n),h=c(r,"background-repeat","value",n),v=r.width(),d=r.height(),b=r.padding()*2,y=v+(c(r,"background-width-relative-to","value",n)==="inner"?0:b),m=d+(c(r,"background-height-relative-to","value",n)==="inner"?0:b),E=r._private.rscratch,S=c(r,"background-clip","value",n),B=S==="node",C=c(r,"background-image-opacity","value",n)*a,O=c(r,"background-image-smoothing","value",n),A=r.pstyle("corner-radius").value;A!=="auto"&&(A=r.pstyle("corner-radius").pfValue);var D=e.width||e.cachedW,F=e.height||e.cachedH;(D==null||F==null)&&(document.body.appendChild(e),D=e.cachedW=e.width||e.offsetWidth,F=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var U=D,W=F;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?U=c(r,"background-width","pfValue",n)*y:U=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?W=c(r,"background-height","pfValue",n)*m:W=c(r,"background-height","pfValue",n)),!(U===0||W===0)){if(f==="contain"){var H=Math.min(y/U,m/W);U*=H,W*=H}else if(f==="cover"){var H=Math.max(y/U,m/W);U*=H,W*=H}var R=o-y/2,I=c(r,"background-position-x","units",n),G=c(r,"background-position-x","pfValue",n);I==="%"?R+=(y-U)*G:R+=G;var V=c(r,"background-offset-x","units",n),$=c(r,"background-offset-x","pfValue",n);V==="%"?R+=(y-U)*$:R+=$;var X=u-m/2,ae=c(r,"background-position-y","units",n),ce=c(r,"background-position-y","pfValue",n);ae==="%"?X+=(m-W)*ce:X+=ce;var re=c(r,"background-offset-y","units",n),Z=c(r,"background-offset-y","pfValue",n);re==="%"?X+=(m-W)*Z:X+=Z,E.pathCache&&(R-=o,X-=u,o=0,u=0);var le=t.globalAlpha;t.globalAlpha=C;var N=i.getImgSmoothing(t),fe=!1;if(O==="no"&&N?(i.setImgSmoothing(t,!1),fe=!0):O==="yes"&&!N&&(i.setImgSmoothing(t,!0),fe=!0),h==="no-repeat")B&&(t.save(),E.pathCache?t.clip(E.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,o,u,y,m,A,E),t.clip())),i.safeDrawImage(t,e,0,0,D,F,R,X,U,W),B&&t.restore();else{var he=t.createPattern(e,h);t.fillStyle=he,i.nodeShapes[i.getNodeShape(r)].draw(t,o,u,y,m,A,E),t.translate(R,X),t.fill(),t.translate(-R,-X)}t.globalAlpha=le,fe&&i.setImgSmoothing(t,N)}};var va={};va.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(pc(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,s=t.pstyle("min-zoomed-font-size").pfValue;return!(i<s)};va.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(i&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),h=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!h||!h.value))return;t.textAlign="center",t.textBaseline="bottom"}var v=!r,d;r&&(d=r,t.translate(-d.x1,-d.y1)),a==null?(s.drawText(t,e,null,v,i),e.isEdge()&&(s.drawText(t,e,"source",v,i),s.drawText(t,e,"target",v,i))):s.drawText(t,e,a,v,i),r&&t.translate(d.x1,d.y1)};va.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};va.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,o=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*o,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],o),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function Ju(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),s?t.stroke():t.fill()}va.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",s=t.pstyle(i+"text-rotation"),o=Tr(a,"labelAngle",e);return s.strValue==="autorotate"?r=t.isEdge()?o:0:s.strValue==="none"?r=0:r=s.pfValue,r};va.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,s=i.rscratch,o=a?e.effectiveOpacity():1;if(!(a&&(o===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Tr(s,"labelX",r),l=Tr(s,"labelY",r),c,f,h=this.getLabelText(e,r);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,a);var v=r?r+"-":"",d=Tr(s,"labelWidth",r),b=Tr(s,"labelHeight",r),y=e.pstyle(v+"text-margin-x").pfValue,m=e.pstyle(v+"text-margin-y").pfValue,E=e.isEdge(),S=e.pstyle("text-halign").value,B=e.pstyle("text-valign").value;E&&(S="center",B="center"),u+=y,l+=m;var C;switch(n?C=this.getTextAngle(e,r):C=0,C!==0&&(c=u,f=l,t.translate(c,f),t.rotate(C),u=0,l=0),B){case"top":break;case"center":l+=b/2;break;case"bottom":l+=b;break}var O=e.pstyle("text-background-opacity").value,A=e.pstyle("text-border-opacity").value,D=e.pstyle("text-border-width").pfValue,F=e.pstyle("text-background-padding").pfValue,U=e.pstyle("text-background-shape").strValue,W=U.indexOf("round")===0,H=2;if(O>0||D>0&&A>0){var R=u-F;switch(S){case"left":R-=d;break;case"center":R-=d/2;break}var I=l-b-F,G=d+2*F,V=b+2*F;if(O>0){var $=t.fillStyle,X=e.pstyle("text-background-color").value;t.fillStyle="rgba("+X[0]+","+X[1]+","+X[2]+","+O*o+")",W?Ju(t,R,I,G,V,H):t.fillRect(R,I,G,V),t.fillStyle=$}if(D>0&&A>0){var ae=t.strokeStyle,ce=t.lineWidth,re=e.pstyle("text-border-color").value,Z=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+re[0]+","+re[1]+","+re[2]+","+A*o+")",t.lineWidth=D,t.setLineDash)switch(Z){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=D/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(W?Ju(t,R,I,G,V,H,"stroke"):t.strokeRect(R,I,G,V),Z==="double"){var le=D/2;W?Ju(t,R+le,I+le,G-le*2,V-le*2,H,"stroke"):t.strokeRect(R+le,I+le,G-le*2,V-le*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=ce,t.strokeStyle=ae}}var N=2*e.pstyle("text-outline-width").pfValue;if(N>0&&(t.lineWidth=N),e.pstyle("text-wrap").value==="wrap"){var fe=Tr(s,"labelWrapCachedLines",r),he=Tr(s,"labelLineHeight",r),pe=d/2,ie=this.getLabelJustification(e);switch(ie==="auto"||(S==="left"?ie==="left"?u+=-d:ie==="center"&&(u+=-pe):S==="center"?ie==="left"?u+=-pe:ie==="right"&&(u+=pe):S==="right"&&(ie==="center"?u+=pe:ie==="right"&&(u+=d))),B){case"top":l-=(fe.length-1)*he;break;case"center":case"bottom":l-=(fe.length-1)*he;break}for(var J=0;J<fe.length;J++)N>0&&t.strokeText(fe[J],u,l),t.fillText(fe[J],u,l),l+=he}else N>0&&t.strokeText(h,u,l),t.fillText(h,u,l);C!==0&&(t.rotate(-C),t.translate(-c,-f))}}};var si={};si.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,u,l=e._private,c=l.rscratch,f=e.position();if(!(!Ee(f.x)||!Ee(f.y))&&!(i&&!e.visible())){var h=i?e.effectiveOpacity():1,v=s.usePaths(),d,b=!1,y=e.padding();o=e.width()+2*y,u=e.height()+2*y;var m;r&&(m=r,t.translate(-m.x1,-m.y1));for(var E=e.pstyle("background-image"),S=E.value,B=new Array(S.length),C=new Array(S.length),O=0,A=0;A<S.length;A++){var D=S[A],F=B[A]=D!=null&&D!=="none";if(F){var U=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",A);O++,C[A]=s.getCachedImage(D,U,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var W=e.pstyle("background-blacken").value,H=e.pstyle("border-width").pfValue,R=e.pstyle("background-opacity").value*h,I=e.pstyle("border-color").value,G=e.pstyle("border-style").value,V=e.pstyle("border-join").value,$=e.pstyle("border-cap").value,X=e.pstyle("border-position").value,ae=e.pstyle("border-dash-pattern").pfValue,ce=e.pstyle("border-dash-offset").pfValue,re=e.pstyle("border-opacity").value*h,Z=e.pstyle("outline-width").pfValue,le=e.pstyle("outline-color").value,N=e.pstyle("outline-style").value,fe=e.pstyle("outline-opacity").value*h,he=e.pstyle("outline-offset").value,pe=e.pstyle("corner-radius").value;pe!=="auto"&&(pe=e.pstyle("corner-radius").pfValue);var ie=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R;s.eleFillStyle(t,e,z)},J=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:re;s.colorStrokeStyle(t,I[0],I[1],I[2],z)},k=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fe;s.colorStrokeStyle(t,le[0],le[1],le[2],z)},M=function(z,Y,ne,ue){var me=s.nodePathCache=s.nodePathCache||[],be=c0(ne==="polygon"?ne+","+ue.join(","):ne,""+Y,""+z,""+pe),we=me[be],ye,xe=!1;return we!=null?(ye=we,xe=!0,c.pathCache=ye):(ye=new Path2D,me[be]=c.pathCache=ye),{path:ye,cacheHit:xe}},K=e.pstyle("shape").strValue,te=e.pstyle("shape-polygon-points").pfValue;if(v){t.translate(f.x,f.y);var Q=M(o,u,K,te);d=Q.path,b=Q.cacheHit}var ee=function(){if(!b){var z=f;v&&(z={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(d||t,z.x,z.y,o,u,pe,c)}v?t.fill(d):t.fill()},_=function(){for(var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ne=l.backgrounding,ue=0,me=0;me<C.length;me++){var be=e.cy().style().getIndexedStyle(e,"background-image-containment","value",me);if(Y&&be==="over"||!Y&&be==="inside"){ue++;continue}B[me]&&C[me].complete&&!C[me].error&&(ue++,s.drawInscribedImage(t,C[me],e,me,z))}l.backgrounding=ue!==O,ne!==l.backgrounding&&e.updateStyle(!1)},g=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;s.hasPie(e)&&(s.drawPie(t,e,Y),z&&(v||s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,u,pe,c)))},w=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,Y=(W>0?W:-W)*z,ne=W>0?0:255;W!==0&&(s.colorFillStyle(t,ne,ne,ne,Y),v?t.fill(d):t.fill())},P=function(){if(H>0){if(t.lineWidth=H,t.lineCap=$,t.lineJoin=V,t.setLineDash)switch(G){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(ae),t.lineDashOffset=ce;break;case"solid":case"double":t.setLineDash([]);break}if(X!=="center"){if(t.save(),t.lineWidth*=2,X==="inside")v?t.clip(d):t.clip();else{var z=new Path2D;z.rect(-o/2-H,-u/2-H,o+2*H,u+2*H),z.addPath(d),t.clip(z,"evenodd")}v?t.stroke(d):t.stroke(),t.restore()}else v?t.stroke(d):t.stroke();if(G==="double"){t.lineWidth=H/3;var Y=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",v?t.stroke(d):t.stroke(),t.globalCompositeOperation=Y}t.setLineDash&&t.setLineDash([])}},q=function(){if(Z>0){if(t.lineWidth=Z,t.lineCap="butt",t.setLineDash)switch(N){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var z=f;v&&(z={x:0,y:0});var Y=s.getNodeShape(e),ne=H;X==="inside"&&(ne=0),X==="outside"&&(ne*=2);var ue=(o+ne+(Z+he))/o,me=(u+ne+(Z+he))/u,be=o*ue,we=u*me,ye=s.nodeShapes[Y].points,xe;if(v){var Ce=M(be,we,Y,ye);xe=Ce.path}if(Y==="ellipse")s.drawEllipsePath(xe||t,z.x,z.y,be,we);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(Y)){var qe=0,Ct=0,vt=0;Y==="round-diamond"?qe=(ne+he+Z)*1.4:Y==="round-heptagon"?(qe=(ne+he+Z)*1.075,vt=-(ne/2+he+Z)/35):Y==="round-hexagon"?qe=(ne+he+Z)*1.12:Y==="round-pentagon"?(qe=(ne+he+Z)*1.13,vt=-(ne/2+he+Z)/15):Y==="round-tag"?(qe=(ne+he+Z)*1.12,Ct=(ne/2+Z+he)*.07):Y==="round-triangle"&&(qe=(ne+he+Z)*(Math.PI/2),vt=-(ne+he/2+Z)/Math.PI),qe!==0&&(ue=(o+qe)/o,be=o*ue,["round-hexagon","round-tag"].includes(Y)||(me=(u+qe)/u,we=u*me)),pe=pe==="auto"?x0(be,we):pe;for(var ut=be/2,Mt=we/2,et=pe+(ne+Z+he)/2,Ft=new Array(ye.length/2),ir=new Array(ye.length/2),tr=0;tr<ye.length/2;tr++)Ft[tr]={x:z.x+Ct+ut*ye[tr*2],y:z.y+vt+Mt*ye[tr*2+1]};var Ht,Ge,Ir,sr,ft=Ft.length;for(Ge=Ft[ft-1],Ht=0;Ht<ft;Ht++)Ir=Ft[Ht%ft],sr=Ft[(Ht+1)%ft],ir[Ht]=Ic(Ge,Ir,sr,et),Ge=Ir,Ir=sr;s.drawRoundPolygonPath(xe||t,z.x+Ct,z.y+vt,o*ue,u*me,ye,ir)}else if(["roundrectangle","round-rectangle"].includes(Y))pe=pe==="auto"?ua(be,we):pe,s.drawRoundRectanglePath(xe||t,z.x,z.y,be,we,pe+(ne+Z+he)/2);else if(["cutrectangle","cut-rectangle"].includes(Y))pe=pe==="auto"?yc():pe,s.drawCutRectanglePath(xe||t,z.x,z.y,be,we,null,pe+(ne+Z+he)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(Y))pe=pe==="auto"?ua(be,we):pe,s.drawBottomRoundRectanglePath(xe||t,z.x,z.y,be,we,pe+(ne+Z+he)/2);else if(Y==="barrel")s.drawBarrelPath(xe||t,z.x,z.y,be,we);else if(Y.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(Y)){var dt=(ne+Z+he)/o;ye=Ro(ko(ye,dt)),s.drawPolygonPath(xe||t,z.x,z.y,o,u,ye)}else{var Et=(ne+Z+he)/o;ye=Ro(ko(ye,-Et)),s.drawPolygonPath(xe||t,z.x,z.y,o,u,ye)}if(v?t.stroke(xe):t.stroke(),N==="double"){t.lineWidth=ne/3;var ln=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",v?t.stroke(xe):t.stroke(),t.globalCompositeOperation=ln}t.setLineDash&&t.setLineDash([])}},j=function(){a&&s.drawNodeOverlay(t,e,f,o,u)},oe=function(){a&&s.drawNodeUnderlay(t,e,f,o,u)},ge=function(){s.drawElementText(t,e,null,n)},ve=e.pstyle("ghost").value==="yes";if(ve){var L=e.pstyle("ghost-offset-x").pfValue,de=e.pstyle("ghost-offset-y").pfValue,T=e.pstyle("ghost-opacity").value,p=T*h;t.translate(L,de),k(),q(),ie(T*R),ee(),_(p,!0),J(T*re),P(),g(W!==0||H!==0),_(p,!1),w(p),t.translate(-L,-de)}v&&t.translate(-f.x,-f.y),oe(),v&&t.translate(f.x,f.y),k(),q(),ie(),ee(),_(h,!0),J(),P(),g(W!==0||H!==0),_(h,!1),w(),v&&t.translate(-f.x,-f.y),ge(),j(),r&&t.translate(m.x1,m.y1)}};var Tp=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,s){var o=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(a=a||n.position(),i==null||s==null){var v=n.padding();i=n.width()+2*v,s=n.height()+2*v}o.colorFillStyle(r,c[0],c[1],c[2],l),o.nodeShapes[f].draw(r,a.x,a.y,i+u*2,s+u*2,h),r.fill()}}}};si.drawNodeOverlay=Tp("overlay");si.drawNodeUnderlay=Tp("underlay");si.hasPie=function(t){return t=t[0],t._private.hasPie};si.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),s=n.x,o=n.y,u=e.width(),l=e.height(),c=Math.min(u,l)/2,f=0,h=this.usePaths();h&&(s=0,o=0),i.units==="%"?c=c*i.pfValue:i.pfValue!==void 0&&(c=i.pfValue/2);for(var v=1;v<=a.pieBackgroundN;v++){var d=e.pstyle("pie-"+v+"-background-size").value,b=e.pstyle("pie-"+v+"-background-color").value,y=e.pstyle("pie-"+v+"-background-opacity").value*r,m=d/100;m+f>1&&(m=1-f);var E=1.5*Math.PI+2*Math.PI*f,S=2*Math.PI*m,B=E+S;d===0||f>=1||f+m>1||(t.beginPath(),t.moveTo(s,o),t.arc(s,o,c,E,B),t.closePath(),this.colorFillStyle(t,b[0],b[1],b[2],y),t.fill(),f+=m)}};var ar={},o_=100;ar.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};ar.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};ar.createGradientStyleFor=function(t,e,r,n,a){var i,s=this.usePaths(),o=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var l=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),h=oa(l,f),v=oa(c,f);i=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(h,v))}else{var d=s?{x:0,y:0}:r.position(),b=r.paddedWidth(),y=r.paddedHeight();i=t.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(b,y))}else if(r.isEdge()){var m=r.sourceEndpoint(),E=r.targetEndpoint();i=t.createLinearGradient(m.x,m.y,E.x,E.y)}else{var S=s?{x:0,y:0}:r.position(),B=r.paddedWidth(),C=r.paddedHeight(),O=B/2,A=C/2,D=r.pstyle("background-gradient-direction").value;switch(D){case"to-bottom":i=t.createLinearGradient(S.x,S.y-A,S.x,S.y+A);break;case"to-top":i=t.createLinearGradient(S.x,S.y+A,S.x,S.y-A);break;case"to-left":i=t.createLinearGradient(S.x+O,S.y,S.x-O,S.y);break;case"to-right":i=t.createLinearGradient(S.x-O,S.y,S.x+O,S.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(S.x-O,S.y-A,S.x+O,S.y+A);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(S.x-O,S.y+A,S.x+O,S.y-A);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(S.x+O,S.y-A,S.x-O,S.y+A);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(S.x+O,S.y+A,S.x-O,S.y-A);break}}if(!i)return null;for(var F=u.length===o.length,U=o.length,W=0;W<U;W++)i.addColorStop(F?u[W]:W/(U-1),"rgba("+o[W][0]+","+o[W][1]+","+o[W][2]+","+a+")");return i};ar.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};ar.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};ar.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};ar.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};ar.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};ar.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};ar.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],s=e.getPixelRatio(),o=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var u=a*s,l=i*s,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=a+"px",f.style.height=i+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)c=r.canvases[h],c.width=u,c.height=l,c.style.width=a+"px",c.style.height=i+"px";for(var h=0;h<e.BUFFER_COUNT;h++)c=r.bufferCanvases[h],c.width=u,c.height=l,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,s<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l}};ar.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};ar.render=function(t){t=t||v0();var e=t.forcedContext,r=t.drawAllLayers,n=t.drawOnlyNodeLayer,a=t.forcedZoom,i=t.forcedPan,s=this,o=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,u=s.cy,l=s.data,c=l.canvasNeedsRedraw,f=s.textureOnViewport&&!e&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming),h=t.motionBlur!==void 0?t.motionBlur:s.motionBlur,v=s.motionBlurPxRatio,d=u.hasCompoundNodes(),b=s.hoverData.draggingEles,y=!!(s.hoverData.selecting||s.touchData.selecting);h=h&&!e&&s.motionBlurEnabled&&!y;var m=h;e||(s.prevPxRatio!==o&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container),s.redrawHint("eles",!0),s.redrawHint("drag",!0)),s.prevPxRatio=o),!e&&s.motionBlurTimeout&&clearTimeout(s.motionBlurTimeout),h&&(s.mbFrames==null&&(s.mbFrames=0),s.mbFrames++,s.mbFrames<3&&(m=!1),s.mbFrames>s.minMbLowQualFrames&&(s.motionBlurPxRatio=s.mbPxRBlurry)),s.clearingMotionBlur&&(s.motionBlurPxRatio=1),s.textureDrawLastFrame&&!f&&(c[s.NODE]=!0,c[s.SELECT_BOX]=!0);var E=u.style(),S=u.zoom(),B=a!==void 0?a:S,C=u.pan(),O={x:C.x,y:C.y},A={zoom:S,pan:{x:C.x,y:C.y}},D=s.prevViewport,F=D===void 0||A.zoom!==D.zoom||A.pan.x!==D.pan.x||A.pan.y!==D.pan.y;!F&&!(b&&!d)&&(s.motionBlurPxRatio=1),i&&(O=i),B*=o,O.x*=o,O.y*=o;var U=s.getCachedZSortedEles();function W(Q,ee,_,g,w){var P=Q.globalCompositeOperation;Q.globalCompositeOperation="destination-out",s.colorFillStyle(Q,255,255,255,s.motionBlurTransparency),Q.fillRect(ee,_,g,w),Q.globalCompositeOperation=P}function H(Q,ee){var _,g,w,P;!s.clearingMotionBlur&&(Q===l.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]||Q===l.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG])?(_={x:C.x*v,y:C.y*v},g=S*v,w=s.canvasWidth*v,P=s.canvasHeight*v):(_=O,g=B,w=s.canvasWidth,P=s.canvasHeight),Q.setTransform(1,0,0,1,0,0),ee==="motionBlur"?W(Q,0,0,w,P):!e&&(ee===void 0||ee)&&Q.clearRect(0,0,w,P),r||(Q.translate(_.x,_.y),Q.scale(g,g)),i&&Q.translate(i.x,i.y),a&&Q.scale(a,a)}if(f||(s.textureDrawLastFrame=!1),f){if(s.textureDrawLastFrame=!0,!s.textureCache){s.textureCache={},s.textureCache.bb=u.mutableElements().boundingBox(),s.textureCache.texture=s.data.bufferCanvases[s.TEXTURE_BUFFER];var R=s.data.bufferContexts[s.TEXTURE_BUFFER];R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,s.canvasWidth*s.textureMult,s.canvasHeight*s.textureMult),s.render({forcedContext:R,drawOnlyNodeLayer:!0,forcedPxRatio:o*s.textureMult});var A=s.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:s.canvasWidth,height:s.canvasHeight};A.mpan={x:(0-A.pan.x)/A.zoom,y:(0-A.pan.y)/A.zoom}}c[s.DRAG]=!1,c[s.NODE]=!1;var I=l.contexts[s.NODE],G=s.textureCache.texture,A=s.textureCache.viewport;I.setTransform(1,0,0,1,0,0),h?W(I,0,0,A.width,A.height):I.clearRect(0,0,A.width,A.height);var V=E.core("outside-texture-bg-color").value,$=E.core("outside-texture-bg-opacity").value;s.colorFillStyle(I,V[0],V[1],V[2],$),I.fillRect(0,0,A.width,A.height);var S=u.zoom();H(I,!1),I.clearRect(A.mpan.x,A.mpan.y,A.width/A.zoom/o,A.height/A.zoom/o),I.drawImage(G,A.mpan.x,A.mpan.y,A.width/A.zoom/o,A.height/A.zoom/o)}else s.textureOnViewport&&!e&&(s.textureCache=null);var X=u.extent(),ae=s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles||s.cy.animated(),ce=s.hideEdgesOnViewport&&ae,re=[];if(re[s.NODE]=!c[s.NODE]&&h&&!s.clearedForMotionBlur[s.NODE]||s.clearingMotionBlur,re[s.NODE]&&(s.clearedForMotionBlur[s.NODE]=!0),re[s.DRAG]=!c[s.DRAG]&&h&&!s.clearedForMotionBlur[s.DRAG]||s.clearingMotionBlur,re[s.DRAG]&&(s.clearedForMotionBlur[s.DRAG]=!0),c[s.NODE]||r||n||re[s.NODE]){var Z=h&&!re[s.NODE]&&v!==1,I=e||(Z?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]:l.contexts[s.NODE]),le=h&&!Z?"motionBlur":void 0;H(I,le),ce?s.drawCachedNodes(I,U.nondrag,o,X):s.drawLayeredElements(I,U.nondrag,o,X),s.debug&&s.drawDebugPoints(I,U.nondrag),!r&&!h&&(c[s.NODE]=!1)}if(!n&&(c[s.DRAG]||r||re[s.DRAG])){var Z=h&&!re[s.DRAG]&&v!==1,I=e||(Z?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]:l.contexts[s.DRAG]);H(I,h&&!Z?"motionBlur":void 0),ce?s.drawCachedNodes(I,U.drag,o,X):s.drawCachedElements(I,U.drag,o,X),s.debug&&s.drawDebugPoints(I,U.drag),!r&&!h&&(c[s.DRAG]=!1)}if(s.showFps||!n&&c[s.SELECT_BOX]&&!r){var I=e||l.contexts[s.SELECT_BOX];if(H(I),s.selection[4]==1&&(s.hoverData.selecting||s.touchData.selecting)){var S=s.cy.zoom(),N=E.core("selection-box-border-width").value/S;I.lineWidth=N,I.fillStyle="rgba("+E.core("selection-box-color").value[0]+","+E.core("selection-box-color").value[1]+","+E.core("selection-box-color").value[2]+","+E.core("selection-box-opacity").value+")",I.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),N>0&&(I.strokeStyle="rgba("+E.core("selection-box-border-color").value[0]+","+E.core("selection-box-border-color").value[1]+","+E.core("selection-box-border-color").value[2]+","+E.core("selection-box-opacity").value+")",I.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(l.bgActivePosistion&&!s.hoverData.selecting){var S=s.cy.zoom(),fe=l.bgActivePosistion;I.fillStyle="rgba("+E.core("active-bg-color").value[0]+","+E.core("active-bg-color").value[1]+","+E.core("active-bg-color").value[2]+","+E.core("active-bg-opacity").value+")",I.beginPath(),I.arc(fe.x,fe.y,E.core("active-bg-size").pfValue/S,0,2*Math.PI),I.fill()}var he=s.lastRedrawTime;if(s.showFps&&he){he=Math.round(he);var pe=Math.round(1e3/he);I.setTransform(1,0,0,1,0,0),I.fillStyle="rgba(255, 0, 0, 0.75)",I.strokeStyle="rgba(255, 0, 0, 0.75)",I.lineWidth=1,I.fillText("1 frame = "+he+" ms = "+pe+" fps",0,20);var ie=60;I.strokeRect(0,30,250,20),I.fillRect(0,30,250*Math.min(pe/ie,1),20)}r||(c[s.SELECT_BOX]=!1)}if(h&&v!==1){var J=l.contexts[s.NODE],k=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE],M=l.contexts[s.DRAG],K=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG],te=function(ee,_,g){ee.setTransform(1,0,0,1,0,0),g||!m?ee.clearRect(0,0,s.canvasWidth,s.canvasHeight):W(ee,0,0,s.canvasWidth,s.canvasHeight);var w=v;ee.drawImage(_,0,0,s.canvasWidth*w,s.canvasHeight*w,0,0,s.canvasWidth,s.canvasHeight)};(c[s.NODE]||re[s.NODE])&&(te(J,k,re[s.NODE]),c[s.NODE]=!1),(c[s.DRAG]||re[s.DRAG])&&(te(M,K,re[s.DRAG]),c[s.DRAG]=!1)}s.prevViewport=A,s.clearingMotionBlur&&(s.clearingMotionBlur=!1,s.motionBlurCleared=!0,s.motionBlur=!0),h&&(s.motionBlurTimeout=setTimeout(function(){s.motionBlurTimeout=null,s.clearedForMotionBlur[s.NODE]=!1,s.clearedForMotionBlur[s.DRAG]=!1,s.motionBlur=!1,s.clearingMotionBlur=!f,s.mbFrames=0,c[s.NODE]=!0,c[s.DRAG]=!0,s.redraw()},o_)),e||u.emit("render")};var Dn={};Dn.drawPolygonPath=function(t,e,r,n,a,i){var s=n/2,o=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*i[0],r+o*i[1]);for(var u=1;u<i.length/2;u++)t.lineTo(e+s*i[u*2],r+o*i[u*2+1]);t.closePath()};Dn.drawRoundPolygonPath=function(t,e,r,n,a,i,s){s.forEach(function(o){return dp(t,o)}),t.closePath()};Dn.drawRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,u=i==="auto"?ua(n,a):Math.min(i,o,s);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+s,r-o,e+s,r,u),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.arcTo(e-s,r-o,e,r-o,u),t.lineTo(e,r-o),t.closePath()};Dn.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,u=i==="auto"?ua(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+s,r-o),t.lineTo(e+s,r),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.lineTo(e-s,r-o),t.lineTo(e,r-o),t.closePath()};Dn.drawCutRectanglePath=function(t,e,r,n,a,i,s){var o=n/2,u=a/2,l=s==="auto"?yc():s;t.beginPath&&t.beginPath(),t.moveTo(e-o+l,r-u),t.lineTo(e+o-l,r-u),t.lineTo(e+o,r-u+l),t.lineTo(e+o,r+u-l),t.lineTo(e+o-l,r+u),t.lineTo(e-o+l,r+u),t.lineTo(e-o,r+u-l),t.lineTo(e-o,r-u+l),t.closePath()};Dn.drawBarrelPath=function(t,e,r,n,a){var i=n/2,s=a/2,o=e-i,u=e+i,l=r-s,c=r+s,f=Nl(n,a),h=f.widthOffset,v=f.heightOffset,d=f.ctrlPtOffsetPct*h;t.beginPath&&t.beginPath(),t.moveTo(o,l+v),t.lineTo(o,c-v),t.quadraticCurveTo(o+d,c,o+h,c),t.lineTo(u-h,c),t.quadraticCurveTo(u-d,c,u,c-v),t.lineTo(u,l+v),t.quadraticCurveTo(u-d,l,u-h,l),t.lineTo(o+h,l),t.quadraticCurveTo(o+d,l,o,l+v),t.closePath()};var Vd=Math.sin(0),qd=Math.cos(0),Vl={},ql={},_p=Math.PI/40;for(var _a=0*Math.PI;_a<2*Math.PI;_a+=_p)Vl[_a]=Math.sin(_a),ql[_a]=Math.cos(_a);Dn.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,s,o=n/2,u=a/2,l=0*Math.PI;l<2*Math.PI;l+=_p)i=e-o*Vl[l]*Vd+o*ql[l]*qd,s=r+u*ql[l]*Vd+u*Vl[l]*qd,l===0?t.moveTo(i,s):t.lineTo(i,s);t.closePath()};var fs={};fs.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};fs.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],s=t.full?Math.ceil(n.h):a[3],o=Ee(t.maxWidth)||Ee(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)i*=t.scale,s*=t.scale,l=t.scale;else if(o){var c=1/0,f=1/0;Ee(t.maxWidth)&&(c=l*t.maxWidth/i),Ee(t.maxHeight)&&(f=l*t.maxHeight/s),l=Math.min(c,f),i*=l,s*=l}o||(i*=u,s*=u,l*=u);var h=document.createElement("canvas");h.width=i,h.height=s,h.style.width=i+"px",h.style.height=s+"px";var v=h.getContext("2d");if(i>0&&s>0){v.clearRect(0,0,i,s),v.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(t.full)v.translate(-n.x1*l,-n.y1*l),v.scale(l,l),this.drawElements(v,d),v.scale(1/l,1/l),v.translate(n.x1*l,n.y1*l);else{var b=e.pan(),y={x:b.x*l,y:b.y*l};l*=e.zoom(),v.translate(y.x,y.y),v.scale(l,l),this.drawElements(v,d),v.scale(1/l,1/l),v.translate(-y.x,-y.y)}t.bg&&(v.globalCompositeOperation="destination-over",v.fillStyle=t.bg,v.rect(0,0,i,s),v.fill())}return h};function u_(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function Gd(t){var e=t.indexOf(",");return t.substr(e+1)}function Bp(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new ja(function(a,i){try{e.toBlob(function(s){s!=null?a(s):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(s){i(s)}});case"blob":return u_(Gd(n()),r);case"base64":return Gd(n());case"base64uri":default:return n()}}fs.png=function(t){return Bp(t,this.bufferCanvasImage(t),"image/png")};fs.jpg=function(t){return Bp(t,this.bufferCanvasImage(t),"image/jpeg")};var Ap={};Ap.nodeShapeImpl=function(t,e,r,n,a,i,s,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,s);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,o);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var l_=Cp,Ue=Cp.prototype;Ue.CANVAS_LAYERS=3;Ue.SELECT_BOX=0;Ue.DRAG=1;Ue.NODE=2;Ue.BUFFER_COUNT=3;Ue.TEXTURE_BUFFER=0;Ue.MOTIONBLUR_BUFFER_NODE=1;Ue.MOTIONBLUR_BUFFER_DRAG=2;function Cp(t){var e=this,r=e.cy.window(),n=r.document;e.data={canvases:new Array(Ue.CANVAS_LAYERS),contexts:new Array(Ue.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ue.CANVAS_LAYERS),bufferCanvases:new Array(Ue.BUFFER_COUNT),bufferContexts:new Array(Ue.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var s=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[a]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};X1()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Ue.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas");e.data.contexts[l]=c.getContext("2d"),Object.keys(u).forEach(function(ie){c.style[ie]=u[ie]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(Ue.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Ue.NODE].setAttribute("data-id","layer"+Ue.NODE+"-node"),e.data.canvases[Ue.SELECT_BOX].setAttribute("data-id","layer"+Ue.SELECT_BOX+"-selectbox"),e.data.canvases[Ue.DRAG].setAttribute("data-id","layer"+Ue.DRAG+"-drag");for(var l=0;l<Ue.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var f=er(),h=function(J){return{x:(J.x1+J.x2)/2,y:(J.y1+J.y2)/2}},v=function(J){return{x:-J.w/2,y:-J.h/2}},d=function(J){var k=J[0]._private,M=k.oldBackgroundTimestamp===k.backgroundTimestamp;return!M},b=function(J){return J[0]._private.nodeKey},y=function(J){return J[0]._private.labelStyleKey},m=function(J){return J[0]._private.sourceLabelStyleKey},E=function(J){return J[0]._private.targetLabelStyleKey},S=function(J,k,M,K,te){return e.drawElement(J,k,M,!1,!1,te)},B=function(J,k,M,K,te){return e.drawElementText(J,k,M,K,"main",te)},C=function(J,k,M,K,te){return e.drawElementText(J,k,M,K,"source",te)},O=function(J,k,M,K,te){return e.drawElementText(J,k,M,K,"target",te)},A=function(J){return J.boundingBox(),J[0]._private.bodyBounds},D=function(J){return J.boundingBox(),J[0]._private.labelBounds.main||f},F=function(J){return J.boundingBox(),J[0]._private.labelBounds.source||f},U=function(J){return J.boundingBox(),J[0]._private.labelBounds.target||f},W=function(J,k){return k},H=function(J){return h(A(J))},R=function(J,k,M){var K=J?J+"-":"";return{x:k.x+M.pstyle(K+"text-margin-x").pfValue,y:k.y+M.pstyle(K+"text-margin-y").pfValue}},I=function(J,k,M){var K=J[0]._private.rscratch;return{x:K[k],y:K[M]}},G=function(J){return R("",I(J,"labelX","labelY"),J)},V=function(J){return R("source",I(J,"sourceLabelX","sourceLabelY"),J)},$=function(J){return R("target",I(J,"targetLabelX","targetLabelY"),J)},X=function(J){return v(A(J))},ae=function(J){return v(F(J))},ce=function(J){return v(U(J))},re=function(J){var k=D(J),M=v(D(J));if(J.isNode()){switch(J.pstyle("text-halign").value){case"left":M.x=-k.w;break;case"right":M.x=0;break}switch(J.pstyle("text-valign").value){case"top":M.y=-k.h;break;case"bottom":M.y=0;break}}return M},Z=e.data.eleTxrCache=new xi(e,{getKey:b,doesEleInvalidateKey:d,drawElement:S,getBoundingBox:A,getRotationPoint:H,getRotationOffset:X,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),le=e.data.lblTxrCache=new xi(e,{getKey:y,drawElement:B,getBoundingBox:D,getRotationPoint:G,getRotationOffset:re,isVisible:W}),N=e.data.slbTxrCache=new xi(e,{getKey:m,drawElement:C,getBoundingBox:F,getRotationPoint:V,getRotationOffset:ae,isVisible:W}),fe=e.data.tlbTxrCache=new xi(e,{getKey:E,drawElement:O,getBoundingBox:U,getRotationPoint:$,getRotationOffset:ce,isVisible:W}),he=e.data.lyrTxrCache=new xp(e);e.onUpdateEleCalcs(function(J,k){Z.invalidateElements(k),le.invalidateElements(k),N.invalidateElements(k),fe.invalidateElements(k),he.invalidateElements(k);for(var M=0;M<k.length;M++){var K=k[M]._private;K.oldBackgroundTimestamp=K.backgroundTimestamp}});var pe=function(J){for(var k=0;k<J.length;k++)he.enqueueElementRefinement(J[k].ele)};Z.onDequeue(pe),le.onDequeue(pe),N.onDequeue(pe),fe.onDequeue(pe)}Ue.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Ue.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Ue.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Ue.SELECT_BOX]=e;break}};var c_=typeof Path2D<"u";Ue.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Ue.usePaths=function(){return c_&&this.pathsEnabled};Ue.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Ue.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Ue.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":wt(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[Ep,Yr,un,Rc,va,si,ar,Dn,fs,Ap].forEach(function(t){Ae(Ue,t)});var f_=[{name:"null",impl:lp},{name:"base",impl:bp},{name:"canvas",impl:l_}],d_=[{type:"layout",extensions:mT},{type:"renderer",extensions:f_}],Ip={},Np={};function Rp(t,e,r){var n=r,a=function(D){Ve("Can not register `"+e+"` for `"+t+"` since `"+D+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Wi.prototype[e])return a(e);Wi.prototype[e]=r}else if(t==="collection"){if(kt.prototype[e])return a(e);kt.prototype[e]=r}else if(t==="layout"){for(var i=function(D){this.options=D,r.call(this,D),De(this._private)||(this._private={}),this._private.cy=D.cy,this._private.listeners=[],this.createEmitter()},s=i.prototype=Object.create(r.prototype),o=[],u=0;u<o.length;u++){var l=o[u];s[l]=s[l]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var c=r.prototype.stop;s.stop=function(){var A=this.options;if(A&&A.animate){var D=this.animations;if(D)for(var F=0;F<D.length;F++)D[F].stop()}return c?c.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var f=function(D){return D._private.cy},h={addEventFields:function(D,F){F.layout=D,F.cy=f(D),F.target=D},bubble:function(){return!0},parent:function(D){return f(D)}};Ae(s,{createEmitter:function(){return this._private.emitter=new uu(h,this),this},emitter:function(){return this._private.emitter},on:function(D,F){return this.emitter().on(D,F),this},one:function(D,F){return this.emitter().one(D,F),this},once:function(D,F){return this.emitter().one(D,F),this},removeListener:function(D,F){return this.emitter().removeListener(D,F),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(D,F){return this.emitter().emit(D,F),this}}),ze.eventAliasesOn(s),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var v=kp("renderer","base"),d=v.prototype,b=r,y=r.prototype,m=function(){v.apply(this,arguments),b.apply(this,arguments)},E=m.prototype;for(var S in d){var B=d[S],C=y[S]!=null;if(C)return a(S);E[S]=B}for(var O in y)E[O]=y[O];d.clientFunctions.forEach(function(A){E[A]=E[A]||function(){st("Renderer does not implement `renderer."+A+"()` on its prototype")}}),n=m}else if(t==="__proto__"||t==="constructor"||t==="prototype")return st(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return n0({map:Ip,keys:[t,e],value:n})}function kp(t,e){return a0({map:Ip,keys:[t,e]})}function h_(t,e,r,n,a){return n0({map:Np,keys:[t,e,r,n],value:a})}function v_(t,e,r,n){return a0({map:Np,keys:[t,e,r,n]})}var Gl=function(){if(arguments.length===2)return kp.apply(null,arguments);if(arguments.length===3)return Rp.apply(null,arguments);if(arguments.length===4)return v_.apply(null,arguments);if(arguments.length===5)return h_.apply(null,arguments);st("Invalid extension access syntax")};Wi.prototype.extension=Gl;d_.forEach(function(t){t.extensions.forEach(function(e){Rp(t.type,e.name,e.impl)})});var Pp=function t(){if(!(this instanceof t))return new t;this.length=0},fa=Pp.prototype;fa.instanceString=function(){return"stylesheet"};fa.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};fa.css=function(t,e){var r=this.length-1;if(Be(t))this[r].properties.push({name:t,value:e});else if(De(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var s=a[i],o=n[s];if(o!=null){var u=Lt.properties[s]||Lt.properties[jo(s)];if(u!=null){var l=u.name,c=o;this[r].properties.push({name:l,value:c})}}}return this};fa.style=fa.css;fa.generateStyle=function(t){var e=new Lt(t);return this.appendToStyle(e)};fa.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var s=a[i];t.css(s.name,s.value)}}return t};var p_="3.30.2",da=function(e){if(e===void 0&&(e={}),De(e))return new Wi(e);if(Be(e))return Gl.apply(Gl,arguments)};da.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(da),t.apply(null,e),this};da.warnings=function(t){return d0(t)};da.version=p_;da.stylesheet=da.Stylesheet=Pp;function Op(t){return JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString():r)}class g_{constructor(e){Xe(this,"heap");Xe(this,"elements");this.heap=e,this.elements=[]}renderCytoscape(e){this.addNodes();for(let r of this.heap.objects)this.addEdges(r);return this.addRoots(),this.createCytoscape(e)}createCytoscape(e){const r=[{selector:"node",style:{label:"data(label)","background-color":"#666",color:"#555"}},{selector:"edge",style:{label:"data(label)",width:3,"line-color":"#ccc","target-arrow-color":"#ccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],n={name:"cose",idealEdgeLength:a=>100,nodeOverlap:20,refresh:20,fit:!0,padding:30,randomize:!1,componentSpacing:100,nodeRepulsion:a=>4e5,edgeElasticity:a=>100,nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1};return da({container:e,elements:this.elements,style:r,layout:n})}addNodes(){for(let e of this.heap.objects)this.elements.push({data:{id:e.objectId.toString(),label:this.getLabel(e),...e}})}addRoots(){const e="MainActor";this.elements.push({data:{id:e,label:e}}),this.addFields(e,this.heap.roots)}getLabel(e){if(e instanceof Tl)return`"${e.value}"`;if(e instanceof _l)return`mut ${this.valueToText(e.field)}`;if(e instanceof xl){let r="{";for(let n of e.fields)n instanceof gi||(r+=`${this.valueToText(n)}; `);return r+="}",r}else if(e instanceof Sl){let r="[";for(let n of e.elements)n instanceof gi||(r+=`${this.valueToText(n)}, `);return r+="]",r}else return e instanceof El?`blob ${e.bytes.length}`:e instanceof Bl?"actor":e instanceof Al?"shared function":Op(e)}valueToText(e){if(e instanceof gi)return"";if(e instanceof Cl)return e.value.toString();if(e instanceof Yv)return e.value.toString();throw new Error(`Unsupported value ${e.valueType}`)}getFields(e){if(e instanceof xl)return[e.hashBlob].concat(e.fields);if(e instanceof Sl)return e.elements;if(e instanceof _l)return[e.field];if(e instanceof Wv)return e.elements;if(e instanceof Kv)return[e.field];if(e instanceof El||e instanceof Tl||e instanceof Bl||e instanceof Hv)return[];if(e instanceof Al)return[e.actor,e.functionName];throw new Error(`Unsupported heap object type ${e.objectType}`)}addEdges(e){const r=e.objectId.toString(),n=this.getFields(e);this.addFields(r,n)}addFields(e,r){r.forEach((n,a)=>{if(n instanceof gi&&!n.isNull()){const i=n.objectId;this.elements.push({data:{id:`${e}_to_${i}_${a}`,source:e,target:i.toString(),label:""}})}})}}var Lo,Ki,Hl;class y_{constructor(){Su(this,Ki);Su(this,Lo,async e=>{e.preventDefault();let r=null;try{const n=await M1(Gv,"local");console.log("Downloaded heap image of "+n.length+" bytes"),r=D1.parse(n),this.output=Op(r)}catch(n){n.message.includes("Unauthorized call of __motoko_inspect_data")?this.output="Missing authorization: Only canister controller are allowed to use data inspection":this.output=n.message}try{if(r!=null){const n=document.getElementById("graph");new g_(r).renderCytoscape(n)}}catch(n){console.error(n)}await O1.change(),Tu(this,Ki,Hl).call(this)});Tu(this,Ki,Hl).call(this)}}Lo=new WeakMap,Ki=new WeakSet,Hl=function(){let e=zp`
      <main>
        <form action="#">
          <button type="submit">Inspect</button>
        </form>
        <section id="graph"></section>
        <section id="output">${this.output}</section>
      </main>
    `;Zp(e,document.getElementById("root")),document.querySelector("form").addEventListener("submit",Pc(this,Lo))};new y_;
